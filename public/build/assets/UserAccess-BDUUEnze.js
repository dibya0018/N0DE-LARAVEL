import{r as c,j as e,H as v,b as p,t as i}from"./app-BAYl1HSz.js";import{A as S}from"./app-layout-BEHjmAYT.js";import U from"./layout-DjpJEdUZ.js";import{H as A}from"./heading-small-BlUNSpUE.js";import{B as u}from"./button-BUWHkrIo.js";import{S as C}from"./Select-b8uBCLur.js";/* empty css            */import"./utils-CSG-oG7g.js";import"./index-DzNUrV5G.js";import"./index-D0mva12j.js";import"./Combination-DBQolvko.js";import"./index-DRazXELc.js";import"./index-WjG9McFh.js";import"./tooltip-DsY4Q31h.js";import"./index-DU1cekCd.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./dropdown-menu-zE5wHxoc.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";import"./index-CDr1GRbl.js";import"./user-BSjMmka3.js";import"./settings-Bhr0gP4l.js";import"./app-logo-icon-BrzWybGo.js";import"./index-B_2jjvkB.js";import"./folder-BjjgW9yE.js";import"./image-u2W-qx98.js";import"./globe-CUGWl2f4.js";import"./users-DJytDsFA.js";import"./key-BAlHmL0b.js";import"./download-DYCYjKDs.js";import"./layout-grid-DOI_FcEe.js";import"./chevron-right-D6wPFmnq.js";import"./heading-zKqXxHZB.js";import"./separator-DNWIp4wA.js";import"./extends-CF3RwP-h.js";function le({project:j}){var x;const[s,l]=c.useState(j),[o,n]=c.useState(null),[f,d]=c.useState([]),b=[{title:s.name,href:route("projects.show",s.id)},{title:"Settings",href:route("projects.settings.project",s.id)},{title:"User Access",href:route("projects.settings.user-access",s.id)}],g=t=>t?(p.get("/user-management/api/users",{params:{search:t,per_page:10}}).then(r=>{var h;const m=((h=s.members)==null?void 0:h.map(a=>a.id))||[],w=r.data.data.filter(a=>!m.includes(a.id)).map(a=>({value:a.id,label:`${a.name} <${a.email}>`}));d(w)}),t):(d([]),t),N=async()=>{if(o)try{const t=await p.post(route("projects.settings.members.add",s.id),{user_id:o.value});l(t.data),n(null),i.success("Member added")}catch{i.error("Failed to add member")}},y=async t=>{try{const r=await p.delete(route("projects.settings.members.remove",[s.id,t]));l(r.data),i.success("Member removed")}catch{i.error("Failed to remove member")}};return e.jsxs(S,{breadcrumbs:b,children:[e.jsx(v,{title:"User Access"}),e.jsx(U,{project:s,children:e.jsxs("div",{className:"space-y-8 max-w-2xl",children:[e.jsx(A,{title:"User Access",description:"Grant or revoke access to this project"}),e.jsx("div",{className:"border rounded-md overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Email"}),e.jsx("th",{className:"px-3 py-2",children:"Roles"}),e.jsx("th",{className:"px-3 py-2"})]})}),e.jsxs("tbody",{children:[(x=s.members)==null?void 0:x.map(t=>{var r;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:t.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:t.email}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:(r=t.roles)==null?void 0:r.map(m=>m.name).join(", ")}),e.jsx("td",{className:"px-3 py-2 text-center whitespace-nowrap",children:e.jsx(u,{size:"icon",variant:"ghost",className:"text-red-600",onClick:()=>y(t.id),children:"âœ•"})})]},t.id)}),(!s.members||s.members.length===0)&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-2 text-muted-foreground",colSpan:4,children:"No members yet."})})]})]})}),e.jsxs("div",{className:"flex gap-2 items-center mt-4 w-full",children:[e.jsx(C,{value:o,onChange:n,onInputChange:g,options:f,placeholder:"Search users...",isClearable:!0,className:"w-full"}),e.jsx(u,{disabled:!o,onClick:N,children:"Add"})]})]})})]})}export{le as default};
