import{r as $,j as r}from"./app-BAYl1HSz.js";import{h as w}from"./moment-BLMuvzoS.js";import{g as k}from"./lexical-converter-4eQd3LVe.js";import{D as E,a as F,b as R,c as Y,d as I}from"./dialog-DohomiSb.js";import{D as K}from"./data-table-DBeixPDt.js";import{B as U}from"./badge-QMdTmx3v.js";import{F as H}from"./file-text-CWXDWnWc.js";/* empty css            */import"./index-DzNUrV5G.js";import"./button-BUWHkrIo.js";import"./utils-CSG-oG7g.js";import"./index-D0mva12j.js";import"./Combination-DBQolvko.js";import"./index-DRazXELc.js";import"./index-WjG9McFh.js";import"./input-CNhlXZJH.js";import"./table-BXEyF7RO.js";import"./pagination-DqjXBUBk.js";import"./chevron-left-CIVxo5Hh.js";import"./chevron-right-D6wPFmnq.js";import"./select-CN0qBbIi.js";import"./scroll-area-4-y7N4RV.js";import"./index-ClMuC-A5.js";import"./index-CC0gYkaS.js";import"./index-DU1cekCd.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./index-47IHtonF.js";import"./tooltip-DsY4Q31h.js";import"./chevron-down-Cw2QYx2J.js";import"./check-B69XlBAf.js";import"./search-bar-CXlHkVVx.js";import"./checkbox-DM2FAlZO.js";import"./popover-BngHBur4.js";import"./label-cm5VjJbG.js";import"./date-picker-B4BjS-4b.js";import"./calendar-CA5vAzoc.js";import"./clock-B4VR18tN.js";import"./format-C_TaVLmE.js";import"./switch-DYMSKvXv.js";import"./loader-circle-GU8JMaLt.js";function Ae({isOpen:d,onClose:x,collection:s,projectId:b,locale:h,excludeEntryIds:L=[],onSelect:D}){const[u,f]=$.useState(null),_=`/projects/${b}/collections/${s.id}/content/search?filter_locale=${h}`;$.useEffect(()=>{d&&f(null)},[d]);const A=()=>{const i=[{header:"Status",accessorKey:"status",sortable:!0,filter:{type:"select",options:[{label:"Draft",value:"draft"},{label:"Published",value:"published"}]},cell:n=>r.jsx(U,{variant:n.status==="published"?"default":"outline",className:n.status==="published"?"bg-green-600 hover:bg-green-700":"text-amber-600 border-amber-300",children:n.status==="published"?"Published":"Draft"})},{header:"Created",accessorKey:"created_at",sortable:!0,filter:{type:"date"},cell:n=>{var t;return r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:new Date(n.created_at).toLocaleString()}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",((t=n.creator)==null?void 0:t.name)||"Unknown"]})]})}},{header:"Updated",accessorKey:"updated_at",sortable:!0,filter:{type:"date"},cell:n=>{var t;return r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:new Date(n.updated_at).toLocaleString()}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",((t=n.updater)==null?void 0:t.name)||"Unknown"]})]})}}];return s!=null&&s.fields&&(s==null?void 0:s.fields.length)>0&&s.fields.filter(t=>{var c;return t.type!=="password"&&t.type!=="json"&&!((c=t.options)!=null&&c.hideInContentList)&&!t.parent_field_id}).forEach(t=>{i.push({header:t.label,accessorKey:t.name,sortable:!0,cell:c=>{var y,j,S,v,N;const e=c[t.name];if(e==null||e==="")return"-";if((y=t.options)!=null&&y.repeatable&&Array.isArray(e)){if(e.length===0)return"-";const l=e[0];return typeof l=="object"&&l!==null&&!Array.isArray(l)?`${e.length} item${e.length===1?"":"s"}`:`${String(l)}${e.length>1?` (+${e.length-1} more)`:""}`}switch(t.type){case"text":return typeof e=="string"&&e.length>30?`${e.substring(0,30)}...`:e;case"email":case"slug":return e;case"richtext":const l=k(e);return l.length>30?`${l.substring(0,30)}...`:l;case"longtext":return typeof e=="string"&&e.length>30?`${e.substring(0,30)}...`:e;case"date":if(!e)return"-";let g="YYYY-MM-DD"+((j=t.options)!=null&&j.includeTime?" HH:mm":"");return((S=t.options)==null?void 0:S.mode)==="range"?e.split(" - ").map(a=>w.parseZone(a).format(g)).join(" / "):w.parseZone(e).format(g);case"boolean":return e?"Yes":"No";case"enumeration":if(Array.isArray(e))return e.join(", ");if(typeof e=="string")try{const a=JSON.parse(e);if(Array.isArray(a))return a.join(", ")}catch{}return e;case"number":return e===null?"-":Number(e).toString();case"media":return e&&Array.isArray(e)?r.jsx("div",{className:"flex flex-wrap gap-1",children:e.map((a,m)=>r.jsx("div",{className:"w-8 h-8",children:a.thumbnail_url?r.jsx("img",{src:a.thumbnail_url,alt:"",className:"w-full h-full object-cover rounded"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted rounded",children:r.jsx(H,{className:"w-4 h-4"})})},m))}):"-";case"group":const p=Array.isArray(e)?e:e?[e]:[];if(p.length>0){if((v=t.options)!=null&&v.repeatable)return`${p.length} item${p.length===1?"":"s"}`;{const a=t.children||((N=s.fields)==null?void 0:N.filter(m=>m.parent_field_id===t.id))||[];if(a.length>0&&p[0]){const m=a[0],o=p[0][m.name];if(o!=null&&o!=="")return String(o).length>30?`${String(o).substring(0,30)}...`:String(o)}return"Group data"}}return"-";default:return typeof e=="object"&&e!==null&&!Array.isArray(e)?JSON.stringify(e):e}}})}),i},C=i=>{f(i)},T=()=>{u&&(D(u),x())};return r.jsx(E,{open:d,onOpenChange:x,children:r.jsxs(F,{className:"sm:max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(R,{children:[r.jsx(Y,{children:"Select Translation Entry"}),r.jsxs(I,{children:["Select an entry in locale ",r.jsx("strong",{children:h.toUpperCase()})," to link as a translation."]})]}),r.jsx("div",{className:"space-y-4 overflow-x-auto",children:r.jsx(K,{columns:A(),searchRoute:_,pageName:`translation_select_${b}_${s.id}_${h}`,onRowClick:C,selectable:!0,onSelectionChange:i=>{f(i.length>0?i[i.length-1]:null)},selectedItems:u?[u]:[],actions:u?[{label:"Select",onClick:T}]:[]})})]})})}export{Ae as default};
