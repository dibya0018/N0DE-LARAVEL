import{c as F,r as n,b as S,j as e}from"./app-BAYl1HSz.js";import{B as u}from"./button-BUWHkrIo.js";import{C as D}from"./checkbox-DM2FAlZO.js";import{D as I,a as E,b as R,c as T,d as P,e as L}from"./dialog-DohomiSb.js";import{I as y}from"./input-CNhlXZJH.js";import{L as r}from"./label-cm5VjJbG.js";import{T as M}from"./textarea-BninraIe.js";import{S as v}from"./Select-b8uBCLur.js";import{R as B,a as h}from"./radio-group-CThl2yM6.js";import{I as m}from"./input-error-BN6HrjaN.js";import{l as V}from"./locales-BuGYwHl-.js";import{U as G}from"./upload-IcDaw6Sm.js";/* empty css            */import"./utils-CSG-oG7g.js";import"./index-D0mva12j.js";import"./index-47IHtonF.js";import"./index-WbFOJLSP.js";import"./index-WjG9McFh.js";import"./index-DRazXELc.js";import"./check-B69XlBAf.js";import"./index-DzNUrV5G.js";import"./Combination-DBQolvko.js";import"./extends-CF3RwP-h.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-CDr1GRbl.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";function ue({open:d,onOpenChange:c}){const x=Object.entries(V).map(([t,l])=>({value:t,label:`${t} - ${l}`})),w=(t,l)=>{const o=t;s("default_locale",o?o.value:"")},{data:a,setData:s,post:f,processing:C,errors:i,reset:j}=F({name:"",description:"",default_locale:"en",template_slug:"",create_type:"blank",with_demo_data:!1,import_file:null}),_=n.useRef(null),[g,b]=n.useState([]),N=g.map(t=>({value:t.slug,label:t.name}));n.useEffect(()=>{d&&S.get(route("project-templates.index")).then(t=>b(t.data)).catch(()=>b([]))},[d]);const p=g.find(t=>t.slug===a.template_slug),k=t=>{t.preventDefault(),a.create_type==="import"&&a.import_file?f(route("projects.import"),{forceFormData:!0,onSuccess:()=>{j(),c(!1)},onError:l=>{console.error("Import error:",l)}}):f(route("projects.store"),{onSuccess:()=>{j(),c(!1)}})};return e.jsx(I,{open:d,onOpenChange:c,children:e.jsxs(E,{className:"sm:max-w-3xl",children:[e.jsxs(R,{className:"border-b pb-3",children:[e.jsx(T,{children:"Create New Project"}),e.jsx(P,{className:"sr-only",children:"Fill in the details below to create a new project."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Project Name"}),e.jsx(y,{id:"name",value:a.name,onChange:t=>s("name",t.target.value),required:!0,placeholder:"Enter project name"}),e.jsx(m,{message:i.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(M,{id:"description",value:a.description,onChange:t=>s("description",t.target.value),placeholder:"Enter project description"}),e.jsx(m,{message:i.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"default_locale",children:"Default Locale"}),e.jsx(v,{defaultValue:x.find(t=>t.value===a.default_locale),isSearchable:!0,isClearable:!0,options:x,onChange:w}),e.jsx(m,{message:i.default_locale})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"project_type",children:"Project Type"}),e.jsx(B,{value:a.create_type,onValueChange:t=>{s("create_type",t),t==="blank"?(s("template_slug",""),s("with_demo_data",!1),s("import_file",null)):t==="import"?(s("template_slug",""),s("with_demo_data",!1)):s("import_file",null)},className:"grid gap-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"flex items-start space-x-2 p-4 rounded-md border border-dashed border-gray-600 dark:border-gray-400",children:[e.jsx(h,{value:"blank",id:"type_blank",className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"type_blank",className:"font-medium",children:"Blank"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start from scratch without a template."})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-4 rounded-md border border-dashed border-gray-600 dark:border-gray-400",children:[e.jsx(h,{value:"template",id:"type_template",className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"type_template",className:"font-medium",children:"Choose from a template"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start with a predefined template."})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 p-4 rounded-md border border-dashed border-gray-600 dark:border-gray-400",children:[e.jsx(h,{value:"import",id:"type_import",className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"type_import",className:"font-medium",children:"Import from file"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Import project structure from JSON file."})]})]})]})}),a.create_type==="template"&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(r,{htmlFor:"template_select",children:"Template"}),e.jsx(v,{defaultValue:N.find(t=>t.value===a.template_slug),isSearchable:!0,isClearable:!0,options:N,onChange:(t,l)=>{const o=t;s("template_slug",o?o.value:""),s("with_demo_data",!1)}}),e.jsx(m,{message:i.template_slug})]}),a.create_type==="template"&&(p==null?void 0:p.has_demo_data)&&e.jsxs("div",{className:"flex items-start space-x-2 p-4 rounded-md border border-dashed border-gray-600 dark:border-gray-400",children:[e.jsx(D,{id:"with_demo_data",checked:a.with_demo_data,onCheckedChange:t=>s("with_demo_data",!!t),className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"with_demo_data",className:"font-medium",children:"Include demo content"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will include demo content in your project."})]})]}),a.create_type==="import"&&e.jsxs("div",{className:"space-y-2 pt-2",children:[e.jsx(r,{htmlFor:"import_file",children:"Import File (JSON)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{ref:_,id:"import_file",type:"file",accept:".json",onChange:t=>{var o;const l=(o=t.target.files)==null?void 0:o[0];l&&s("import_file",l)},className:"hidden"}),e.jsxs(u,{type:"button",variant:"outline",onClick:()=>{var t;return(t=_.current)==null?void 0:t.click()},className:"w-full sm:w-auto",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),a.import_file?a.import_file.name:"Choose File"]})]}),a.import_file&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",a.import_file.name]}),e.jsx(m,{message:i.import_file})]})]}),e.jsxs(L,{className:"border-t pt-3",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:C,children:"Create Project"})]})]})]})})}export{ue as default};
