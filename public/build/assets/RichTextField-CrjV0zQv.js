const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/image-component-DbQ9BFiv.js","assets/app-BAYl1HSz.js","assets/app-DItdhHVa.css","assets/button-BUWHkrIo.js","assets/utils-CSG-oG7g.js","assets/FieldBase-Bf9Vt966.js","assets/label-cm5VjJbG.js","assets/index-DRazXELc.js","assets/input-error-BN6HrjaN.js","assets/tooltip-DsY4Q31h.js","assets/index-D0mva12j.js","assets/Combination-DBQolvko.js","assets/index-DU1cekCd.js","assets/floating-ui.dom-DtF1XweH.js","assets/index-WbFOJLSP.js","assets/index-WjG9McFh.js","assets/prism-Dqf3inl0.js","assets/separator-DNWIp4wA.js","assets/index-B_2jjvkB.js","assets/dialog-DohomiSb.js","assets/index-DzNUrV5G.js","assets/textarea-BninraIe.js","assets/list-ordered-CAJaYuK2.js","assets/save-BrDiTwid.js","assets/MediaFieldSelectModal-CtCYjuY2.js","assets/tabs-VLokmgZM.js","assets/index-CDr1GRbl.js","assets/index-CC0gYkaS.js","assets/index-ClMuC-A5.js","assets/dropdown-menu-zE5wHxoc.js","assets/search-bar-CXlHkVVx.js","assets/input-CNhlXZJH.js","assets/pagination-DqjXBUBk.js","assets/chevron-left-CIVxo5Hh.js","assets/chevron-right-D6wPFmnq.js","assets/alert-dialog-rwDNo7n6.js","assets/AssetGrid-2_pYCbtF.js","assets/card-CrMVoWAt.js","assets/checkbox-DM2FAlZO.js","assets/index-47IHtonF.js","assets/check-B69XlBAf.js","assets/badge-QMdTmx3v.js","assets/AssetDetailsModal-BtHtV5lE.js","assets/download-DYCYjKDs.js","assets/lock-op3ureYo.js","assets/copy-mrXhSjRK.js","assets/file-image-B6fjxKfq.js","assets/file-Da2ZVSrE.js","assets/file-text-CWXDWnWc.js","assets/AssetDetailsModal-D4wcebRk.css","assets/AssetActionMenu-Dy7nZ14i.js","assets/ellipsis-vertical-Dhv4-4ce.js","assets/eye-qNAffJdW.js","assets/trash-CiO9M-2A.js","assets/AssetTable-CRXC0oAN.js","assets/table-BXEyF7RO.js","assets/format-C_TaVLmE.js","assets/AssetUploader-D4dsnDyd.js","assets/scroll-area-4-y7N4RV.js","assets/upload-IcDaw6Sm.js","assets/circle-alert-BCdqIib6.js","assets/image-u2W-qx98.js","assets/Select-b8uBCLur.js","assets/extends-CF3RwP-h.js","assets/calendar-CA5vAzoc.js","assets/plus-WwBbC7Wx.js","assets/layout-grid-DOI_FcEe.js","assets/chevron-down-Cw2QYx2J.js","assets/popover-BngHBur4.js","assets/align-center-TgbYJwzI.js","assets/link-t6pPAohe.js","assets/code-DWMjAwzg.js","assets/grip-vertical-CVrUASli.js"])))=>i.map(i=>d[i]);
var yg=Object.defineProperty;var xg=(t,e,n)=>e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>xg(t,typeof e!="symbol"?e+"":e,n);import{r as b,j as p,_ as bg,e as Cn,u as Cg,U as be}from"./app-BAYl1HSz.js";import vg from"./FieldBase-Bf9Vt966.js";import{a as pe,b as me,c as _e,T as Sg}from"./tooltip-DsY4Q31h.js";import"./prism-Dqf3inl0.js";import{c as ye,B as re,a as wg}from"./button-BUWHkrIo.js";import{S as Lr}from"./separator-DNWIp4wA.js";import{D as Gr,a as qr,b as Yr,c as Xr,d as Zr,e as hs,f as Tg}from"./dialog-DohomiSb.js";import{T as kg}from"./textarea-BninraIe.js";import{A as md,L as Ng}from"./list-ordered-CAJaYuK2.js";import{X as Eg,R as $g,P as Ag,O as Og,C as Fg}from"./index-DzNUrV5G.js";import{S as Mg}from"./save-BrDiTwid.js";import{MediaLibraryModal as Rg}from"./MediaFieldSelectModal-CtCYjuY2.js";import{I as vn}from"./input-CNhlXZJH.js";import{L as _n}from"./label-cm5VjJbG.js";import{I as Lg}from"./image-u2W-qx98.js";import{D as Ol,a as Fl,b as Ml,c as Rl,g as _d}from"./dropdown-menu-zE5wHxoc.js";import{C as gs}from"./chevron-down-Cw2QYx2J.js";import{P as yd,a as xd,b as bd}from"./popover-BngHBur4.js";import{A as Ig}from"./align-center-TgbYJwzI.js";import{S as jg}from"./Select-b8uBCLur.js";import{S as Dg,a as Pg}from"./scroll-area-4-y7N4RV.js";import{F as zg}from"./file-text-CWXDWnWc.js";import{L as Bg}from"./link-t6pPAohe.js";import{L as Kg}from"./tabs-VLokmgZM.js";import{C as Cd}from"./code-DWMjAwzg.js";import{P as yt}from"./index-DRazXELc.js";import{b as Gn}from"./Combination-DBQolvko.js";import{b as Ir,c as Ln}from"./utils-CSG-oG7g.js";import{P as Ga}from"./plus-WwBbC7Wx.js";import{G as Wg}from"./grip-vertical-CVrUASli.js";import{u as Ll,a as Ug,c as Hg}from"./index-D0mva12j.js";import{c as vd,I as Jg,R as Vg}from"./index-CDr1GRbl.js";import{u as Gg}from"./index-ClMuC-A5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]],Yg=ye("AlignJustify",qg);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Zg=ye("AlignRight",Xg);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"M4 20h16",key:"14thso"}],["path",{d:"m6 16 6-12 6 12",key:"1b4byz"}],["path",{d:"M8 12h8",key:"1wcyev"}]],ep=ye("Baseline",Qg);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Sd=ye("Bold",tp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],rp=ye("Eraser",np);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],sp=ye("Heading1",op);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],lp=ye("Heading2",ip);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],cp=ye("Heading3",ap);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=[["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3",key:"tj5zdr"}],["path",{d:"M21 10v8",key:"1kdml4"}],["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}]],dp=ye("Heading4",up);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 13v-3h4",key:"1nvgqp"}],["path",{d:"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17",key:"2nebdn"}]],hp=ye("Heading5",fp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["circle",{cx:"19",cy:"16",r:"2",key:"15mx69"}],["path",{d:"M20 10c-2 2-3 3.5-3 6",key:"f35dl0"}]],pp=ye("Heading6",gp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],_p=ye("ImagePlus",mp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m7 8-4 4 4 4",key:"o5hrat"}]],xp=ye("IndentDecrease",yp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]],Cp=ye("IndentIncrease",bp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],wd=ye("Italic",vp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],wp=ye("Maximize2",Sp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],kp=ye("Minimize2",Tp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ep=ye("Minus",Np);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Ap=ye("NotebookPen",$p);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],Td=ye("PaintBucket",Op);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Mp=ye("Quote",Fp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Lp=ye("Redo",Rp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],qa=ye("SquareCode",Ip);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],kd=ye("Strikethrough",jp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]],Nd=ye("Subscript",Dp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]],Ed=ye("Superscript",Pp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Bp=ye("Table",zp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Qr=ye("Type",Kp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],$d=ye("Underline",Wp);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],Hp=ye("Undo",Up),Ad=b.createContext(null);function Jp(t,e){return{getTheme:function(){return e??null}}}function ie(){const t=b.useContext(Ad);return t==null&&function(e,...n){const r=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",e);for(const s of n)o.append("v",s);throw r.search=o.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),t}function D(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const vt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Vp=vt&&"documentMode"in document?document.documentMode:null,Nt=vt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Sn=vt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Io=!(!vt||!("InputEvent"in window)||Vp)&&"getTargetRanges"in new window.InputEvent("input"),jr=vt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),rr=vt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Gp=vt&&/Android/.test(navigator.userAgent),Od=vt&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Ya=vt&&Gp&&Od,jo=vt&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Od;function Do(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}const qp=1,Yp=3,Xp=9,Zp=11,wn=0,Fd=1,or=2,Qp=0,em=1,tm=2,Po=4,zo=8,Il=128,nm=1792|(112|(3|Po|zo)|Il),jl=1,Dl=2,Pl=3,zl=4,Bl=5,Kl=6,ps=jr||rr||jo?" ":"​",Kt=`

`,rm=Sn?" ":ps,Md="֑-߿יִ-﷽ﹰ-ﻼ",Rd="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",om=new RegExp("^[^"+Rd+"]*["+Md+"]"),sm=new RegExp("^[^"+Md+"]*["+Rd+"]"),Zt={bold:1,capitalize:1024,code:16,highlight:Il,italic:2,lowercase:256,strikethrough:Po,subscript:32,superscript:64,underline:zo,uppercase:512},im={directionless:1,unmergeable:2},Xa={center:Dl,end:Kl,justify:zl,left:jl,right:Pl,start:Bl},lm={[Dl]:"center",[Kl]:"end",[zl]:"justify",[jl]:"left",[Pl]:"right",[Bl]:"start"},am={normal:0,segmented:2,token:1},cm={[Qp]:"normal",[tm]:"segmented",[em]:"token"},Za="$config";function Ld(t,e,n,r,o,s){let i=t.getFirstChild();for(;i!==null;){const l=i.__key;i.__parent===e&&($(i)&&Ld(i,l,n,r,o,s),n.has(l)||s.delete(l),o.push(l)),i=i.getNextSibling()}}const um=100;let Ri=!1,Wl=0;function dm(t){Wl=t.timeStamp}function si(t,e,n){const r=t.nodeName==="BR",o=e.__lexicalLineBreak;return o&&(t===o||r&&t.previousSibling===o)||r&&Is(t,n)!==void 0}function fm(t,e,n){const r=Qe(ut(n));let o=null,s=null;r!==null&&r.anchorNode===t&&(o=r.anchorOffset,s=r.focusOffset);const i=t.nodeValue;i!==null&&ua(e,i,o,s,!1)}function hm(t,e,n){if(E(t)){const r=t.anchor.getNode();if(r.is(n)&&t.format!==r.getFormat())return!1}return Ut(e)&&n.isAttached()}function gm(t,e,n,r){for(let o=t;o&&!c_(o);o=io(o)){const s=Is(o,e);if(s!==void 0){const i=we(s,n);if(i)return de(i)||!ge(o)?void 0:[o,i]}else if(o===r)return[r,vf(n)]}}function Id(t,e,n){Ri=!0;const r=performance.now()-Wl>um;try{lt(t,()=>{const o=F()||function(f){return f.getEditorState().read(()=>{const h=F();return h!==null?h.clone():null})}(t),s=new Map,i=t.getRootElement(),l=t._editorState,a=t._blockCursorElement;let c=!1,u="";for(let f=0;f<e.length;f++){const h=e[f],g=h.type,m=h.target,_=gm(m,t,l,i);if(!_)continue;const[y,x]=_;if(g==="characterData")r&&R(x)&&Ut(m)&&hm(o,m,x)&&fm(m,x,t);else if(g==="childList"){c=!0;const C=h.addedNodes;for(let v=0;v<C.length;v++){const N=C[v],S=bf(N),T=N.parentNode;if(T!=null&&N!==a&&S===null&&!si(N,T,t)){if(Sn){const A=(ge(N)?N.innerText:null)||N.nodeValue;A&&(u+=A)}T.removeChild(N)}}const k=h.removedNodes,w=k.length;if(w>0){let v=0;for(let N=0;N<w;N++){const S=k[N];(si(S,m,t)||a===S)&&(m.appendChild(S),v++)}w!==v&&s.set(y,x)}}}if(s.size>0)for(const[f,h]of s)h.reconcileObservedMutation(f,t);const d=n.takeRecords();if(d.length>0){for(let f=0;f<d.length;f++){const h=d[f],g=h.addedNodes,m=h.target;for(let _=0;_<g.length;_++){const y=g[_],x=y.parentNode;x==null||y.nodeName!=="BR"||si(y,m,t)||x.removeChild(y)}}n.takeRecords()}o!==null&&(c&&ke(o),Sn&&kf(t)&&o.insertRawText(u))})}finally{Ri=!1}}function jd(t){const e=t._observer;e!==null&&Id(t,e.takeRecords(),e)}function Dd(t){(function(e){Wl===0&&ut(e).addEventListener("textInput",dm,!0)})(t),t._observer=new MutationObserver((e,n)=>{Id(t,e,n)})}function pm(t){const e=new Map,n=new Set;for(let r=typeof t=="function"?t:t.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:o}=ma(r);if(o&&o.stateConfigs)for(const s of o.stateConfigs){let i;"stateConfig"in s?(i=s.stateConfig,s.flat&&n.add(i.key)):i=s,e.set(i.key,i)}}return{flatKeys:n,sharedConfigMap:e}}let mm=class Pd{constructor(e,n,r=void 0,o=new Map,s=void 0){this.node=e,this.sharedNodeState=n,this.unknownState=r,this.knownState=o;const{sharedConfigMap:i}=this.sharedNodeState,l=s!==void 0?s:function(a,c,u){let d=u.size;if(c)for(const f in c){const h=a.get(f);h&&u.has(h)||d++}return d}(i,r,o);this.size=l}getValue(e){const n=this.knownState.get(e);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const o=this.unknownState[e.key];o!==void 0&&(r=e.parse(o)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},n={};for(const[r,o]of this.knownState)r.isEqual(o,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(o);for(const r of this.sharedNodeState.flatKeys)r in e&&(n[r]=e[r],delete e[r]);return Qa(e)&&(n.$=e),n}getWritable(e){if(this.node===e)return this;const{sharedNodeState:n,unknownState:r}=this,o=new Map(this.knownState);return new Pd(e,n,function(s,i,l){let a;if(l)for(const[c,u]of Object.entries(l)){const d=s.get(c);d?i.has(d)||i.set(d,d.parse(u)):(a=a||{},a[c]=u)}return a}(n.sharedConfigMap,o,r),o,this.size)}updateFromKnown(e,n){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:o,unknownState:s}=this;o.has(e)||s&&r in s||(s&&(delete s[r],this.unknownState=Qa(s)),this.size++),o.set(e,n)}updateFromUnknown(e,n){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=n)}updateFromJSON(e){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,e)for(const[r,o]of Object.entries(e))this.updateFromUnknown(r,o)}};function _m(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new mm(e,zd(e));return e.__state=n,n}function zd(t){return t.__state?t.__state.sharedNodeState:_f(lo(),t.getType()).sharedNodeState}function Qa(t){if(t)for(const e in t)return t}function ec(t,e,n){for(const[r,o]of e.knownState){if(t.has(r.key))continue;t.add(r.key);const s=n?n.getValue(r):r.defaultValue;if(s!==o&&!r.isEqual(s,o))return!0}return!1}function tc(t,e,n){const{unknownState:r}=e,o=n?n.unknownState:void 0;if(r){for(const[s,i]of Object.entries(r))if(!t.has(s)&&(t.add(s),i!==(o?o[s]:void 0)))return!0}return!1}function nc(t,e){const n=t.__state;return n&&n.node===t?n.getWritable(e):n}function rc(t,e){const n=t.__mode,r=t.__format,o=t.__style,s=e.__mode,i=e.__format,l=e.__style,a=t.__state,c=e.__state;return(n===null||n===s)&&(r===null||r===i)&&(o===null||o===l)&&(t.__state===null||a===c||function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;const f=new Set;return!(u&&ec(f,u,d)||d&&ec(f,d,u)||u&&tc(f,u,d)||d&&tc(f,d,u))}(a,c))}function oc(t,e){const n=t.mergeWithSibling(e),r=$e()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function sc(t){let e,n,r=t;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&R(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(rc(e,r)){r=oc(e,r);break}break}e.remove()}for(;(n=r.getNextSibling())!==null&&R(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(rc(r,n)){r=oc(r,n);break}break}n.remove()}}else r.remove()}function sr(t){return ic(t.anchor),ic(t.focus),t}function ic(t){for(;t.type==="element";){const e=t.getNode(),n=t.offset;let r,o;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),o=!0):(r=e.getChildAtIndex(n),o=!1),R(r)){t.set(r.__key,o?r.getTextContentSize():0,"text",!0);break}if(!$(r))break;t.set(r.__key,o?r.getChildrenSize():0,"element",!0)}}let Qt,Xe,Dr,ms,Li,Ii,Tn,pt,ji,Pr,Le="",qe="",wt=null,Tt="",Dt="",Bd=!1,zr=!1,Oo=null;function Bo(t,e){const n=Tn.get(t);if(e!==null){const r=zi(t);r.parentNode===e&&e.removeChild(r)}if(pt.has(t)||Xe._keyToDOMMap.delete(t),$(n)){const r=Wo(n,Tn);Di(r,0,r.length-1,null)}n!==void 0&&da(Pr,Dr,ms,n,"destroyed")}function Di(t,e,n,r){let o=e;for(;o<=n;++o){const s=t[o];s!==void 0&&Bo(s,r)}}function an(t,e){t.setProperty("text-align",e)}const ym="40px";function Kd(t,e){const n=Qt.theme.indent;if(typeof n=="string"){const o=t.classList.contains(n);e>0&&!o?t.classList.add(n):e<1&&o&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||ym;t.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function Wd(t,e){const n=t.style;e===0?an(n,""):e===jl?an(n,"left"):e===Dl?an(n,"center"):e===Pl?an(n,"right"):e===zl?an(n,"justify"):e===Bl?an(n,"start"):e===Kl&&an(n,"end")}function Ko(t,e){const n=pt.get(t);n===void 0&&D(60);const r=n.createDOM(Qt,Xe);if(function(o,s,i){const l=i._keyToDOMMap;(function(a,c,u){const d=`__lexicalKey_${c._key}`;a[d]=u})(s,i,o),l.set(o,s)}(t,r,Xe),R(n)?r.setAttribute("data-lexical-text","true"):de(n)&&r.setAttribute("data-lexical-decorator","true"),$(n)){const o=n.__indent,s=n.__size;if(o!==0&&Kd(r,o),s!==0){const l=s-1;(function(a,c,u,d){const f=qe;qe="",Pi(a,u,0,c,u.getDOMSlot(d)),Hd(u,d),qe=f})(Wo(n,pt),l,n,r)}const i=n.__format;i!==0&&Wd(r,i),n.isInline()||Ud(null,n,r),js(n)&&(Le+=Kt,Dt+=Kt)}else{const o=n.getTextContent();if(de(n)){const s=n.decorate(Xe,Qt);s!==null&&Jd(t,s),r.contentEditable="false"}else R(n)&&(n.isDirectionless()||(qe+=o));Le+=o,Dt+=o}return e!==null&&e.insertChild(r),da(Pr,Dr,ms,n,"created"),r}function Pi(t,e,n,r,o){const s=Le;Le="";let i=n;for(;i<=r;++i){Ko(t[i],o);const l=pt.get(t[i]);l!==null&&R(l)&&(wt===null&&(wt=l.getFormat()),Tt===""&&(Tt=l.getStyle()))}js(e)&&(Le+=Kt),o.element.__lexicalTextContent=Le,Le=s+Le}function lc(t,e){if(t){const n=t.__last;if(n){const r=e.get(n);if(r)return Ot(r)?"line-break":de(r)&&r.isInline()?"decorator":null}return"empty"}return null}function Ud(t,e,n){const r=lc(t,Tn),o=lc(e,pt);r!==o&&e.getDOMSlot(n).setManagedLineBreak(o)}function Hd(t,e){const n=e.__lexicalDirTextContent||"",r=e.__lexicalDir||"";if(n!==qe||r!==Oo){const o=qe==="",s=o?Oo:function(i){return om.test(i)?"rtl":sm.test(i)?"ltr":null}(qe);if(s!==r){const i=e.classList,l=Qt.theme;let a=r!==null?l[r]:void 0,c=s!==null?l[s]:void 0;if(a!==void 0){if(typeof a=="string"){const u=Do(a);a=l[r]=u}i.remove(...a)}if(s===null||o&&s==="ltr")e.removeAttribute("dir");else{if(c!==void 0){if(typeof c=="string"){const u=Do(c);c=l[s]=u}c!==void 0&&i.add(...c)}e.dir=s}zr||(t.getWritable().__dir=s)}Oo=s,e.__lexicalDirTextContent=qe,e.__lexicalDir=s}}function xm(t,e,n){const r=qe;var o;qe="",wt=null,Tt="",function(s,i,l){const a=Le,c=s.__size,u=i.__size;Le="";const d=l.element;if(c===1&&u===1){const f=s.__first,h=i.__first;if(f===h)Tr(f,d);else{const m=zi(f),_=Ko(h,null);try{d.replaceChild(_,m)}catch(y){if(typeof y=="object"&&y!=null){const x=`${y.toString()} Parent: ${d.tagName}, new child: {tag: ${_.tagName} key: ${h}}, old child: {tag: ${m.tagName}, key: ${f}}.`;throw new Error(x)}throw y}Bo(f,null)}const g=pt.get(h);R(g)&&(wt===null&&(wt=g.getFormat()),Tt===""&&(Tt=g.getStyle()))}else{const f=Wo(s,Tn),h=Wo(i,pt);if(f.length!==c&&D(227),h.length!==u&&D(228),c===0)u!==0&&Pi(h,i,0,u-1,l);else if(u===0){if(c!==0){const g=l.after==null&&l.before==null&&l.element.__lexicalLineBreak==null;Di(f,0,c-1,g?null:d),g&&(d.textContent="")}}else(function(g,m,_,y,x,C){const k=y-1,w=x-1;let v,N,S=C.getFirstChild(),T=0,A=0;for(;T<=k&&A<=w;){const I=m[T],j=_[A];if(I===j)S=ii(Tr(j,C.element)),T++,A++;else{v===void 0&&(v=new Set(m)),N===void 0&&(N=new Set(_));const W=N.has(I),P=v.has(j);if(W)if(P){const H=ar(Xe,j);H===S?S=ii(Tr(j,C.element)):(C.withBefore(S).insertChild(H),Tr(j,C.element)),T++,A++}else Ko(j,C.withBefore(S)),A++;else S=ii(zi(I)),Bo(I,C.element),T++}const B=pt.get(j);B!==null&&R(B)&&(wt===null&&(wt=B.getFormat()),Tt===""&&(Tt=B.getStyle()))}const M=T>k,L=A>w;if(M&&!L){const I=_[w+1],j=I===void 0?null:Xe.getElementByKey(I);Pi(_,g,A,w,C.withBefore(j))}else L&&!M&&Di(m,T,k,C.element)})(i,f,h,c,u,l)}js(i)&&(Le+=Kt),d.__lexicalTextContent=Le,Le=a+Le}(t,e,e.getDOMSlot(n)),Hd(e,n),o=e,wt==null||wt===o.__textFormat||zr||o.setTextFormat(wt),function(s){Tt===""||Tt===s.__textStyle||zr||s.setTextStyle(Tt)}(e),qe=r}function Wo(t,e){const n=[];let r=t.__first;for(;r!==null;){const o=e.get(r);o===void 0&&D(101),n.push(r),r=o.__next}return n}function Tr(t,e){const n=Tn.get(t);let r=pt.get(t);n!==void 0&&r!==void 0||D(61);const o=Bd||Ii.has(t)||Li.has(t),s=ar(Xe,t);if(n===r&&!o){if($(n)){const i=s.__lexicalTextContent;i!==void 0&&(Le+=i,Dt+=i);const l=s.__lexicalDirTextContent;l!==void 0&&(qe+=l)}else{const i=n.getTextContent();R(n)&&!n.isDirectionless()&&(qe+=i),Dt+=i,Le+=i}return s}if(n!==r&&o&&da(Pr,Dr,ms,r,"updated"),r.updateDOM(n,s,Qt)){const i=Ko(t,null);return e===null&&D(62),e.replaceChild(i,s),Bo(t,null),i}if($(n)&&$(r)){const i=r.__indent;i!==n.__indent&&Kd(s,i);const l=r.__format;l!==n.__format&&Wd(s,l),o&&(xm(n,r,s),Pe(r)||r.isInline()||Ud(n,r,s)),js(r)&&(Le+=Kt,Dt+=Kt)}else{const i=r.getTextContent();if(de(r)){const l=r.decorate(Xe,Qt);l!==null&&Jd(t,l)}else R(r)&&!r.isDirectionless()&&(qe+=i);Le+=i,Dt+=i}if(!zr&&Pe(r)&&r.__cachedText!==Dt){const i=r.getWritable();i.__cachedText=Dt,r=i}return s}function Jd(t,e){let n=Xe._pendingDecorators;const r=Xe._decorators;if(n===null){if(r[t]===e)return;n=Cf(Xe)}n[t]=e}function ii(t){let e=t.nextSibling;return e!==null&&e===Xe._blockCursorElement&&(e=e.nextSibling),e}function bm(t,e,n,r,o,s){Le="",Dt="",qe="",Bd=r===or,Oo=null,Xe=n,Qt=n._config,Dr=n._nodes,ms=Xe._listeners.mutation,Li=o,Ii=s,Tn=t._nodeMap,pt=e._nodeMap,zr=e._readOnly,ji=new Map(n._keyToDOMMap);const i=new Map;return Pr=i,Tr("root",null),Xe=void 0,Dr=void 0,Li=void 0,Ii=void 0,Tn=void 0,pt=void 0,Qt=void 0,ji=void 0,Pr=void 0,i}function zi(t){const e=ji.get(t);return e===void 0&&D(75,t),e}function X(t){return{type:t}}const tt=X("SELECTION_CHANGE_COMMAND"),Ul=X("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),_s=X("CLICK_COMMAND"),Yt=X("DELETE_CHARACTER_COMMAND"),qn=X("INSERT_LINE_BREAK_COMMAND"),kn=X("INSERT_PARAGRAPH_COMMAND"),yn=X("CONTROLLED_TEXT_INSERTION_COMMAND"),Hl=X("PASTE_COMMAND"),Bi=X("REMOVE_TEXT_COMMAND"),ir=X("DELETE_WORD_COMMAND"),Nn=X("DELETE_LINE_COMMAND"),Ke=X("FORMAT_TEXT_COMMAND"),ys=X("UNDO_COMMAND"),xs=X("REDO_COMMAND"),Cm=X("KEYDOWN_COMMAND"),Jl=X("KEY_ARROW_RIGHT_COMMAND"),vm=X("MOVE_TO_END"),bs=X("KEY_ARROW_LEFT_COMMAND"),Sm=X("MOVE_TO_START"),Cs=X("KEY_ARROW_UP_COMMAND"),vs=X("KEY_ARROW_DOWN_COMMAND"),Uo=X("KEY_ENTER_COMMAND"),Vl=X("KEY_SPACE_COMMAND"),Gl=X("KEY_BACKSPACE_COMMAND"),Ss=X("KEY_ESCAPE_COMMAND"),ql=X("KEY_DELETE_COMMAND"),ws=X("KEY_TAB_COMMAND"),Vd=X("INSERT_TAB_COMMAND"),Ho=X("INDENT_CONTENT_COMMAND"),Jo=X("OUTDENT_CONTENT_COMMAND"),Ts=X("DROP_COMMAND"),Yl=X("FORMAT_ELEMENT_COMMAND"),Xl=X("DRAGSTART_COMMAND"),ks=X("DRAGOVER_COMMAND"),wm=X("DRAGEND_COMMAND"),Ns=X("COPY_COMMAND"),Es=X("CUT_COMMAND"),Ki=X("SELECT_ALL_COMMAND"),Tm=X("CLEAR_EDITOR_COMMAND"),km=X("CLEAR_HISTORY_COMMAND"),kr=X("CAN_REDO_COMMAND"),Nr=X("CAN_UNDO_COMMAND"),Gd=X("FOCUS_COMMAND"),Nm=X("BLUR_COMMAND"),Em=X("KEY_MODIFIER_COMMAND"),Lt=Object.freeze({}),Wi=30,Ui=[["keydown",function(t,e){if($r=t.timeStamp,qd=t.key,!e.isComposing()&&!J(e,Cm,t)&&t.key!=null){if(li&&Lc(t))return lt(e,()=>{mo(e,ai)}),li=!1,void(ai="");if(function(n){return xe(n,"ArrowRight",{shiftKey:"any"})}(t))J(e,Jl,t);else if(function(n){return xe(n,"ArrowRight",jt)}(t))J(e,vm,t);else if(function(n){return xe(n,"ArrowLeft",{shiftKey:"any"})}(t))J(e,bs,t);else if(function(n){return xe(n,"ArrowLeft",jt)}(t))J(e,Sm,t);else if(function(n){return xe(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(t))J(e,Cs,t);else if(function(n){return xe(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(t))J(e,vs,t);else if(function(n){return xe(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(t))Ar=!0,J(e,Uo,t);else if(function(n){return n.key===" "}(t))J(e,Vl,t);else if(function(n){return Nt&&xe(n,"o",{ctrlKey:!0})}(t))t.preventDefault(),Ar=!0,J(e,qn,!0);else if(function(n){return xe(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(t))Ar=!1,J(e,Uo,t);else if(function(n){return xe(n,"Backspace",{shiftKey:"any"})||Nt&&xe(n,"h",{ctrlKey:!0})}(t))Lc(t)?J(e,Gl,t):(t.preventDefault(),J(e,Yt,!0));else if(function(n){return n.key==="Escape"}(t))J(e,Ss,t);else if(function(n){return xe(n,"Delete",{})||Nt&&xe(n,"d",{ctrlKey:!0})}(t))(function(n){return n.key==="Delete"})(t)?J(e,ql,t):(t.preventDefault(),J(e,Yt,!1));else if(function(n){return xe(n,"Backspace",Rc)}(t))t.preventDefault(),J(e,ir,!0);else if(function(n){return xe(n,"Delete",Rc)}(t))t.preventDefault(),J(e,ir,!1);else if(function(n){return Nt&&xe(n,"Backspace",{metaKey:!0})}(t))t.preventDefault(),J(e,Nn,!0);else if(function(n){return Nt&&(xe(n,"Delete",{metaKey:!0})||xe(n,"k",{ctrlKey:!0}))}(t))t.preventDefault(),J(e,Nn,!1);else if(function(n){return xe(n,"b",jt)}(t))t.preventDefault(),J(e,Ke,"bold");else if(function(n){return xe(n,"u",jt)}(t))t.preventDefault(),J(e,Ke,"underline");else if(function(n){return xe(n,"i",jt)}(t))t.preventDefault(),J(e,Ke,"italic");else if(function(n){return xe(n,"Tab",{shiftKey:"any"})}(t))J(e,ws,t);else if(function(n){return xe(n,"z",jt)}(t))t.preventDefault(),J(e,ys,void 0);else if(function(n){return Nt?xe(n,"z",{metaKey:!0,shiftKey:!0}):xe(n,"y",{ctrlKey:!0})||xe(n,"z",{ctrlKey:!0,shiftKey:!0})}(t))t.preventDefault(),J(e,xs,void 0);else{const n=e._editorState._selection;n===null||E(n)?Ic(t)&&(t.preventDefault(),J(e,Ki,t)):function(r){return xe(r,"c",jt)}(t)?(t.preventDefault(),J(e,Ns,t)):function(r){return xe(r,"x",jt)}(t)?(t.preventDefault(),J(e,Es,t)):Ic(t)&&(t.preventDefault(),J(e,Ki,t))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(t)&&J(e,Em,t)}}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;ct(n)&&r!=="touch"&&r!=="pen"&&t.button===0&&lt(e,()=>{Oc(n)||(Ji=!0)})}],["compositionstart",function(t,e){lt(e,()=>{const n=F();if(E(n)&&!e.isComposing()){const r=n.anchor,o=n.anchor.getNode();We(r.key),(t.timeStamp<$r+Wi||r.type==="element"||!n.isCollapsed()||o.getFormat()!==n.format||R(o)&&o.getStyle()!==n.style)&&J(e,yn,rm)}})}],["compositionend",function(t,e){Sn?br=!0:rr||!jr&&!jo?lt(e,()=>{mo(e,t.data)}):(li=!0,ai=t.data)}],["input",function(t,e){t.stopPropagation(),lt(e,()=>{if(ge(t.target)&&Oc(t.target))return;const n=F(),r=t.data,o=ef(t);if(r!=null&&E(n)&&Zd(n,o,r,t.timeStamp,!1)){br&&(mo(e,r),br=!1);const s=n.anchor.getNode(),i=Qe(ut(e));if(i===null)return;const l=n.isBackward(),a=l?n.anchor.offset:n.focus.offset,c=l?n.focus.offset:n.anchor.offset;Io&&!n.isCollapsed()&&R(s)&&i.anchorNode!==null&&s.getTextContent().slice(0,a)+r+s.getTextContent().slice(a+c)===Tf(i.anchorNode)||J(e,yn,r);const u=r.length;Sn&&u>1&&t.inputType==="insertCompositionText"&&!e.isComposing()&&(n.anchor.offset-=u),jr||rr||jo||!e.isComposing()||($r=0,We(null))}else ca(!1,e,r!==null?r:void 0),br&&(mo(e,r||void 0),br=!1);(function(){Je();const s=$e();jd(s)})()},{event:t}),Kn=null}],["click",function(t,e){lt(e,()=>{const n=F(),r=Qe(ut(e)),o=Mt();if(r){if(E(n)){const s=n.anchor,i=s.getNode();if(s.type==="element"&&s.offset===0&&n.isCollapsed()&&!Pe(i)&&fe().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&o!==null&&n.is(o))r.removeAllRanges(),n.dirty=!0;else if(t.detail===3&&!n.isCollapsed()&&i!==n.focus.getNode()){const l=function(a,c){let u=a;for(;u!==fe()&&u!=null;){if(c(u))return u;u=u.getParent()}return null}(i,a=>$(a)&&!a.isInline());$(l)&&l.select(0)}}else if(t.pointerType==="touch"||t.pointerType==="pen"){const s=r.anchorNode;(ge(s)||Ut(s))&&ke(Os(o,r,e,t))}}J(e,_s,t)})}],["cut",Lt],["copy",Lt],["dragstart",Lt],["dragover",Lt],["dragend",Lt],["paste",Lt],["focus",Lt],["blur",Lt],["drop",Lt]];Io&&Ui.push(["beforeinput",(t,e)=>function(n,r){const o=n.inputType,s=ef(n);o==="deleteCompositionText"||Sn&&kf(r)||o!=="insertCompositionText"&&lt(r,()=>{const i=F();if(o==="deleteContentBackward"){if(i===null){const h=Mt();if(!E(h))return;ke(h.clone())}if(E(i)){const h=i.anchor.key===i.focus.key;if(l=n.timeStamp,qd==="MediaLast"&&l<$r+Wi&&r.isComposing()&&h){if(We(null),$r=0,setTimeout(()=>{lt(r,()=>{We(null)})},Wi),E(i)){const g=i.anchor.getNode();g.markDirty(),R(g)||D(142),Qd(i,g)}}else{We(null),n.preventDefault();const g=i.anchor.getNode(),m=g.getTextContent(),_=g.canInsertTextAfter(),y=i.anchor.offset===0&&i.focus.offset===m.length;let x=Ya&&h&&!y&&_;if(x&&i.isCollapsed()&&(x=!de(Yi(i.anchor,!0))),!x){J(r,Yt,!0);const C=F();Ya&&E(C)&&C.isCollapsed()&&(hn=C,setTimeout(()=>hn=null))}}return}}var l;if(!E(i))return;const a=n.data;Kn!==null&&ca(!1,r,Kn),i.dirty&&Kn===null||!i.isCollapsed()||Pe(i.anchor.getNode())||s===null||i.applyDOMRange(s),Kn=null;const c=i.anchor,u=i.focus,d=c.getNode(),f=u.getNode();if(o!=="insertText"&&o!=="insertTranspose")switch(n.preventDefault(),o){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":J(r,yn,n);break;case"insertFromComposition":We(null),J(r,yn,n);break;case"insertLineBreak":We(null),J(r,qn,!1);break;case"insertParagraph":We(null),Ar&&!rr?(Ar=!1,J(r,qn,!1)):J(r,kn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":J(r,Hl,n);break;case"deleteByComposition":(function(h,g){return h!==g||$(h)||$(g)||!xn(h)||!xn(g)})(d,f)&&J(r,Bi,n);break;case"deleteByDrag":case"deleteByCut":J(r,Bi,n);break;case"deleteContent":J(r,Yt,!1);break;case"deleteWordBackward":J(r,ir,!0);break;case"deleteWordForward":J(r,ir,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":J(r,Nn,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":J(r,Nn,!1);break;case"formatStrikeThrough":J(r,Ke,"strikethrough");break;case"formatBold":J(r,Ke,"bold");break;case"formatItalic":J(r,Ke,"italic");break;case"formatUnderline":J(r,Ke,"underline");break;case"historyUndo":J(r,ys,void 0);break;case"historyRedo":J(r,xs,void 0)}else{if(a===`
`)n.preventDefault(),J(r,qn,!1);else if(a===Kt)n.preventDefault(),J(r,kn,void 0);else if(a==null&&n.dataTransfer){const h=n.dataTransfer.getData("text/plain");n.preventDefault(),i.insertRawText(h)}else a!=null&&Zd(i,s,a,n.timeStamp,!0)?(n.preventDefault(),J(r,yn,a)):Kn=a;Yd=n.timeStamp}})}(t,e)]);let $r=0,qd=null,Yd=0,Kn=null;const Vo=new WeakMap;let Hi=!1,Ji=!1,Ar=!1,br=!1,li=!1,ai="",hn=null,Xd=[0,"",0,"root",0];function Zd(t,e,n,r,o){const s=t.anchor,i=t.focus,l=s.getNode(),a=$e(),c=Qe(ut(a)),u=c!==null?c.anchorNode:null,d=s.key,f=a.getElementByKey(d),h=n.length;return d!==i.key||!R(l)||(!o&&(!Io||Yd<r+50)||l.isDirty()&&h<2||Sf(n))&&s.offset!==i.offset&&!l.isComposing()||kt(l)||l.isDirty()&&h>1||(o||!Io)&&f!==null&&!l.isComposing()&&u!==lr(f)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==t.format||l.getStyle()!==t.style||function(g,m){if(m.isSegmented())return!0;if(!g.isCollapsed())return!1;const _=g.anchor.offset,y=m.getParentOrThrow(),x=xn(m);return _===0?!m.canInsertTextBefore()||!y.canInsertTextBefore()&&!m.isComposing()||x||function(C){const k=C.getPreviousSibling();return(R(k)||$(k)&&k.isInline())&&!k.canInsertTextAfter()}(m):_===m.getTextContentSize()&&(!m.canInsertTextAfter()||!y.canInsertTextAfter()&&!m.isComposing()||x)}(t,l)}function ac(t,e){return Ut(t)&&t.nodeValue!==null&&e!==0&&e!==t.nodeValue.length}function cc(t,e,n){const{anchorNode:r,anchorOffset:o,focusNode:s,focusOffset:i}=t;Hi&&(Hi=!1,ac(r,o)&&ac(s,i)&&!hn)||lt(e,()=>{if(!n)return void ke(null);if(!so(e,r,s))return;let l=F();if(hn&&E(l)&&l.isCollapsed()){const a=l.anchor,c=hn.anchor;(a.key===c.key&&a.offset===c.offset+1||a.offset===1&&c.getNode().is(a.getNode().getPreviousSibling()))&&(l=hn.clone(),ke(l))}if(hn=null,E(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){t.type==="Range"&&t.anchorNode===t.focusNode&&(l.dirty=!0);const u=ut(e).event,d=u?u.timeStamp:performance.now(),[f,h,g,m,_]=Xd,y=fe(),x=e.isComposing()===!1&&y.getTextContent()==="";if(d<_+200&&a.offset===g&&a.key===m)Fo(l,f,h);else if(a.type==="text")R(c)||D(141),Qd(l,c);else if(a.type==="element"&&!x){$(c)||D(259);const C=a.getNode();C.isEmpty()?function(k,w){const v=w.getTextFormat(),N=w.getTextStyle();Fo(k,v,N)}(l,C):Fo(l,0,"")}}else{const u=a.key,d=l.focus.key,f=l.getNodes(),h=f.length,g=l.isBackward(),m=g?i:o,_=g?o:i,y=g?d:u,x=g?u:d;let C=nm,k=!1;for(let w=0;w<h;w++){const v=f[w],N=v.getTextContentSize();if(R(v)&&N!==0&&!(w===0&&v.__key===y&&m===N||w===h-1&&v.__key===x&&_===0)&&(k=!0,C&=v.getFormat(),C===0))break}l.format=k?C:0}}J(e,tt,void 0)})}function Fo(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function Qd(t,e){Fo(t,e.getFormat(),e.getStyle())}function ef(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return e.length===0?null:e[0]}function mo(t,e){const n=t._compositionKey;if(We(null),n!==null&&e!=null){if(e===""){const r=we(n),o=lr(t.getElementByKey(n));return void(o!==null&&o.nodeValue!==null&&R(r)&&ua(r,o.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=F();if(E(r)){const o=r.focus;return r.anchor.set(o.key,o.offset,o.type),void J(t,Uo,null)}}}ca(!0,t,e)}function tf(t){let e=t.__lexicalEventHandles;return e===void 0&&(e=[],t.__lexicalEventHandles=e),e}const Yn=new Map;function nf(t){const e=i_(t.target);if(e===null)return;const n=Rs(e.anchorNode);if(n===null)return;Ji&&(Ji=!1,lt(n,()=>{const a=Mt(),c=e.anchorNode;(ge(c)||Ut(c))&&ke(Os(a,e,n,t))}));const r=aa(n),o=r[r.length-1],s=o._key,i=Yn.get(s),l=i||o;l!==n&&cc(e,l,!1),cc(e,n,!0),n!==o?Yn.set(s,n):i&&Yn.delete(s)}function uc(t){t._lexicalHandled=!0}function dc(t){return t._lexicalHandled===!0}function $m(t){const e=t.ownerDocument,n=Vo.get(e);if(n===void 0)return;const r=n-1;r>=0||D(164),Vo.set(e,r),r===0&&e.removeEventListener("selectionchange",nf);const o=Ls(t);la(o)?(function(i){if(i._parentEditor!==null){const l=aa(i),a=l[l.length-1]._key;Yn.get(a)===i&&Yn.delete(a)}else Yn.delete(i._key)}(o),t.__lexicalEditor=null):o&&D(198);const s=tf(t);for(let i=0;i<s.length;i++)s[i]();t.__lexicalEventHandles=[]}function Vi(t,e,n){Je();const r=t.__key,o=t.getParent();if(o===null)return;const s=function(l){const a=F();if(!E(a)||!$(l))return a;const{anchor:c,focus:u}=a,d=c.getNode(),f=u.getNode();return Xi(d,l)&&c.set(l.__key,0,"element"),Xi(f,l)&&u.set(l.__key,0,"element"),a}(t);let i=!1;if(E(s)&&e){const l=s.anchor,a=s.focus;l.key===r&&(Yo(l,t,o,t.getPreviousSibling(),t.getNextSibling()),i=!0),a.key===r&&(Yo(a,t,o,t.getPreviousSibling(),t.getNextSibling()),i=!0)}else Re(s)&&e&&t.isSelected()&&t.selectPrevious();if(E(s)&&e&&!i){const l=t.getIndexWithinParent();bn(t),qo(s,o,l,-1)}else bn(t);n||ze(o)||o.canBeEmpty()||!o.isEmpty()||Vi(o,e),e&&s&&Pe(o)&&o.isEmpty()&&o.selectEnd()}class dr{static getType(){const{ownNodeType:e}=ma(this);return e===void 0&&D(64,this.name),e}static clone(e){D(65,this.name)}$config(){return{}}config(e,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:e}),{[e]:n}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),xf(this,e)}getType(){return this.__type}isInline(){D(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const n=we(e);if(n===null)break;e=n.__parent}return!1}isSelected(e){const n=e||F();if(n==null)return!1;const r=n.getNodes().some(o=>o.__key===this.__key);if(R(this))return r;if(E(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const o=this.getParent();if(de(this)&&this.isInline()&&o){const s=n.isBackward()?n.focus:n.anchor;if(o.is(s.getNode())&&s.offset===o.getChildrenSize()&&this.is(o.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let n=e.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:we(e)}getParentOrThrow(){const e=this.getParent();return e===null&&D(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const n=e.getParent();if(ze(n))return $(e)||e===this&&de(e)||D(194),e;e=n}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&D(67,this.__key),e}getParents(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n),n=n.getParent();return e}getParentKeys(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n.__key),n=n.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:we(e)}getPreviousSiblings(){const e=[],n=this.getParent();if(n===null)return e;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:we(e)}getNextSiblings(){const e=[];let n=this.getNextSibling();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getCommonAncestor(e){const n=$(this)?this:this.getParent(),r=$(e)?e:e.getParent(),o=n&&r?Ro(n,r):null;return o?o.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const n=Ro(this,e);return n!==null&&(n.type==="descendant"||(n.type==="branch"?Af(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&D(279),!1)))}isParentOf(e){const n=Ro(this,e);return n!==null&&n.type==="ancestor"}getNodesBetween(e){const n=this.isBefore(e),r=[],o=new Set;let s=this;for(;s!==null;){const i=s.__key;if(o.has(i)||(o.add(i),r.push(s)),s===e)break;const l=$(s)?n?s.getFirstChild():s.getLastChild():null;if(l!==null){s=l;continue}const a=n?s.getNextSibling():s.getPreviousSibling();if(a!==null){s=a;continue}const c=s.getParentOrThrow();if(o.has(c.__key)||r.push(c),c===e)break;let u=null,d=c;do{if(d===null&&D(68),u=n?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||o.has(d.__key)||r.push(d)}while(u===null);s=u}return n||r.reverse(),r}isDirty(){const e=$e()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=we(this.__key);return e===null&&D(113),e}getWritable(){Je();const e=rn(),n=$e(),r=e._nodeMap,o=this.__key,s=this.getLatest(),i=n._cloneNotNeeded,l=F();if(l!==null&&l.setCachedNodes(null),i.has(o))return Qo(s),s;const a=ga(s);return i.add(o),Qo(a),r.set(o,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,n){D(70)}updateDOM(e,n,r){D(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){D(18,this.name)}updateFromJSON(e){return function(n,r){const o=n.getWritable(),s=r.$;let i=s;for(const l of zd(o).flatKeys)l in r&&(i!==void 0&&i!==s||(i={...s}),i[l]=r[l]);return(o.__state||i)&&_m(n).updateFromJSON(i),o}(this,e)}static transform(){return null}remove(e){Vi(this,!0,e)}replace(e,n){Je();let r=F();r!==null&&(r=r.clone()),gi(this,e);const o=this.getLatest(),s=this.__key,i=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;bn(l);const u=o.getPreviousSibling(),d=o.getNextSibling(),f=o.__prev,h=o.__next,g=o.__parent;if(Vi(o,!1,!0),u===null?a.__first=i:u.getWritable().__next=i,l.__prev=f,d===null?a.__last=i:d.getWritable().__prev=i,l.__next=h,l.__parent=g,a.__size=c,n&&($(this)&&$(l)||D(139),this.getChildren().forEach(m=>{l.append(m)})),E(r)){ke(r);const m=r.anchor,_=r.focus;m.key===s&&pc(m,l),_.key===s&&pc(_,l)}return Vt()===s&&We(i),l}insertAfter(e,n=!0){Je(),gi(this,e);const r=this.getWritable(),o=e.getWritable(),s=o.getParent(),i=F();let l=!1,a=!1;if(s!==null){const h=e.getIndexWithinParent();if(bn(o),E(i)){const g=s.__key,m=i.anchor,_=i.focus;l=m.type==="element"&&m.key===g&&m.offset===h+1,a=_.type==="element"&&_.key===g&&_.offset===h+1}}const c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=o.__key,f=r.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,r.__next=d,o.__next=f,o.__prev=r.__key,o.__parent=r.__parent,n&&E(i)){const h=this.getIndexWithinParent();qo(i,u,h+1);const g=u.__key;l&&i.anchor.set(g,h+2,"element"),a&&i.focus.set(g,h+2,"element")}return e}insertBefore(e,n=!0){Je(),gi(this,e);const r=this.getWritable(),o=e.getWritable(),s=o.__key;bn(o);const i=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();i===null?l.__first=s:i.getWritable().__next=s,l.__size++,r.__prev=s,o.__prev=a,o.__next=r.__key,o.__parent=r.__parent;const u=F();return n&&E(u)&&qo(u,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return ee()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,n){Je();const r=this.getPreviousSibling(),o=this.getParentOrThrow();if(r===null)return o.select(0,0);if($(r))return r.select();if(!R(r)){const s=r.getIndexWithinParent()+1;return o.select(s,s)}return r.select(e,n)}selectNext(e,n){Je();const r=this.getNextSibling(),o=this.getParentOrThrow();if(r===null)return o.select();if($(r))return r.select(0,0);if(!R(r)){const s=r.getIndexWithinParent();return o.select(s,s)}return r.select(e,n)}markDirty(){this.getWritable()}reconcileObservedMutation(e,n){this.markDirty()}}class eo extends dr{static getType(){return"linebreak"}static clone(e){return new eo(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>function(n){const r=n.parentElement;if(r!==null&&es(r)){const o=r.firstChild;if(o===n||o.nextSibling===n&&_o(o)){const s=r.lastChild;if(s===n||s.previousSibling===n&&_o(s))return!0}}return!1}(e)||function(n){const r=n.parentElement;if(r!==null&&es(r)){const o=r.firstChild;if(o===n||o.nextSibling===n&&_o(o))return!1;const s=r.lastChild;if(s===n||s.previousSibling===n&&_o(s))return!0}return!1}(e)?null:{conversion:Am,priority:0}}}static importJSON(e){return xt().updateFromJSON(e)}}function Am(t){return{node:xt()}}function xt(){return Me(new eo)}function Ot(t){return t instanceof eo}function _o(t){return Ut(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function ci(t,e){return 16&e?"code":e&Il?"mark":32&e?"sub":64&e?"sup":null}function ui(t,e){return 1&e?"strong":2&e?"em":"span"}function rf(t,e,n,r,o){const s=r.classList;let i=Qn(o,"base");i!==void 0&&s.add(...i),i=Qn(o,"underlineStrikethrough");let l=!1;const a=e&zo&&e&Po;i!==void 0&&(n&zo&&n&Po?(l=!0,a||s.add(...i)):a&&s.remove(...i));for(const c in Zt){const u=Zt[c];if(i=Qn(o,c),i!==void 0)if(n&u){if(l&&(c==="underline"||c==="strikethrough")){e&u&&s.remove(...i);continue}e&u&&(!a||c!=="underline")&&c!=="strikethrough"||s.add(...i)}else e&u&&s.remove(...i)}}function of(t,e,n){const r=e.firstChild,o=n.isComposing(),s=t+(o?ps:"");if(r==null)e.textContent=s;else{const i=r.nodeValue;if(i!==s)if(o||Sn){const[l,a,c]=function(u,d){const f=u.length,h=d.length;let g=0,m=0;for(;g<f&&g<h&&u[g]===d[g];)g++;for(;m+g<f&&m+g<h&&u[f-m-1]===d[h-m-1];)m++;return[g,f-g-m,d.slice(g,h-m)]}(i,s);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=s}}function fc(t,e,n,r,o,s){of(o,t,e);const i=s.theme.text;i!==void 0&&rf(0,0,r,t,i)}function yo(t,e){const n=document.createElement(e);return n.appendChild(t),n}class at extends dr{static getType(){return"text"}static clone(e){return new at(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",n){super(n),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return cm[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Vt()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const n=Zt[e];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,n){return Zo(this.getLatest().__format,e,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,n){const r=this.__format,o=ci(0,r),s=ui(0,r),i=o===null?s:o,l=document.createElement(i);let a=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),o!==null&&(a=document.createElement(s),l.appendChild(a)),fc(a,this,0,r,this.__text,e);const c=this.__style;return c!==""&&(l.style.cssText=c),l}updateDOM(e,n,r){const o=this.__text,s=e.__format,i=this.__format,l=ci(0,s),a=ci(0,i),c=ui(0,s),u=ui(0,i);if((l===null?c:l)!==(a===null?u:a))return!0;if(l===a&&c!==u){const m=n.firstChild;m==null&&D(48);const _=document.createElement(u);return fc(_,this,0,i,o,r),n.replaceChild(_,m),!1}let d=n;a!==null&&l!==null&&(d=n.firstChild,d==null&&D(49)),of(o,d,this);const f=r.theme.text;f!==void 0&&s!==i&&rf(0,s,i,d,f);const h=e.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:Rm,priority:0}),b:()=>({conversion:Fm,priority:0}),code:()=>({conversion:It,priority:0}),em:()=>({conversion:It,priority:0}),i:()=>({conversion:It,priority:0}),mark:()=>({conversion:It,priority:0}),s:()=>({conversion:It,priority:0}),span:()=>({conversion:Om,priority:0}),strong:()=>({conversion:It,priority:0}),sub:()=>({conversion:It,priority:0}),sup:()=>({conversion:It,priority:0}),u:()=>({conversion:It,priority:0})}}static importJSON(e){return ue().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:n}=super.exportDOM(e);return ge(n)||D(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=yo(n,"b")),this.hasFormat("italic")&&(n=yo(n,"i")),this.hasFormat("strikethrough")&&(n=yo(n,"s")),this.hasFormat("underline")&&(n=yo(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,n){}setFormat(e){const n=this.getWritable();return n.__format=typeof e=="string"?Zt[e]:e,n}setDetail(e){const n=this.getWritable();return n.__detail=typeof e=="string"?im[e]:e,n}setStyle(e){const n=this.getWritable();return n.__style=e,n}toggleFormat(e){const n=Zo(this.getFormat(),e,null);return this.setFormat(n)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const n=am[e];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(e){if(this.__text===e)return this;const n=this.getWritable();return n.__text=e,n}select(e,n){Je();let r=e,o=n;const s=F(),i=this.getTextContent(),l=this.__key;if(typeof i=="string"){const a=i.length;r===void 0&&(r=a),o===void 0&&(o=a)}else r=0,o=0;if(!E(s))return af(l,r,l,o,"text","text");{const a=Vt();a!==s.anchor.key&&a!==s.focus.key||We(l),s.setTextNodeRange(this,r,this,o)}return s}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,n,r,o){const s=this.getWritable(),i=s.__text,l=r.length;let a=e;a<0&&(a=l+a,a<0&&(a=0));const c=F();if(o&&E(c)){const d=e+l;c.setTextNodeRange(s,d,s,d)}const u=i.slice(0,a)+r+i.slice(a+n);return s.__text=u,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){Je();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const o=n.__key,s=Vt(),i=r.length;e.sort((S,T)=>S-T),e.push(i);const l=[],a=e.length;for(let S=0,T=0;S<i&&T<=a;T++){const A=e[T];A>S&&(l.push(r.slice(S,A)),S=A)}const c=l.length;if(c===1)return[n];const u=l[0],d=n.getParent();let f;const h=n.getFormat(),g=n.getStyle(),m=n.__detail;let _=!1,y=null,x=null;const C=F();if(E(C)){const[S,T]=C.isBackward()?[C.focus,C.anchor]:[C.anchor,C.focus];S.type==="text"&&S.key===o&&(y=S),T.type==="text"&&T.key===o&&(x=T)}n.isSegmented()?(f=ue(u),f.__format=h,f.__style=g,f.__detail=m,f.__state=nc(n,f),_=!0):f=n.setTextContent(u);const k=[f];for(let S=1;S<c;S++){const T=ue(l[S]);T.__format=h,T.__style=g,T.__detail=m,T.__state=nc(n,T);const A=T.__key;s===o&&We(A),k.push(T)}const w=y?y.offset:null,v=x?x.offset:null;let N=0;for(const S of k){if(!y&&!x)break;const T=N+S.getTextContentSize();if(y!==null&&w!==null&&w<=T&&w>=N&&(y.set(S.getKey(),w-N,"text"),w<T&&(y=null)),x!==null&&v!==null&&v<=T&&v>=N){x.set(S.getKey(),v-N,"text");break}N=T}if(d!==null){(function(A){const M=A.getPreviousSibling(),L=A.getNextSibling();M!==null&&Qo(M),L!==null&&Qo(L)})(this);const S=d.getWritable(),T=this.getIndexWithinParent();_?(S.splice(T,0,k),this.remove()):S.splice(T,1,k),E(C)&&qo(C,d,T,c-1)}return k}mergeWithSibling(e){const n=e===this.getPreviousSibling();n||e===this.getNextSibling()||D(50);const r=this.__key,o=e.__key,s=this.__text,i=s.length;Vt()===o&&We(r);const l=F();if(E(l)){const d=l.anchor,f=l.focus;d!==null&&d.key===o&&vc(d,n,r,e,i),f!==null&&f.key===o&&vc(f,n,r,e,i)}const a=e.__text,c=n?a+s:s+a;this.setTextContent(c);const u=this.getWritable();return e.remove(),u}isTextEntity(){return!1}}function Om(t){return{forChild:Zl(t.style),node:null}}function Fm(t){const e=t,n=e.style.fontWeight==="normal";return{forChild:Zl(e.style,n?void 0:"bold"),node:null}}const hc=new WeakMap;function Mm(t){if(!ge(t))return!1;if(t.nodeName==="PRE")return!0;const e=t.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function Rm(t){const e=t;t.parentElement===null&&D(129);let n=e.textContent||"";if(function(r){let o,s=r.parentNode;const i=[r];for(;s!==null&&(o=hc.get(s))===void 0&&!Mm(s);)i.push(s),s=s.parentNode;const l=o===void 0?s:o;for(let a=0;a<i.length;a++)hc.set(i[a],l);return l}(e)!==null){const r=n.split(/(\r?\n|\t)/),o=[],s=r.length;for(let i=0;i<s;i++){const l=r[i];l===`
`||l===`\r
`?o.push(xt()):l==="	"?o.push(fr()):l!==""&&o.push(ue(l))}return{node:o}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=e,o=!0;for(;r!==null&&(r=gc(r,!1))!==null;){const s=r.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(n=n.slice(1)),o=!1;break}}o&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=e,o=!0;for(;r!==null&&(r=gc(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){o=!1;break}o&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:ue(n)}}function gc(t,e){let n=t;for(;;){let r;for(;(r=e?n.nextSibling:n.previousSibling)===null;){const s=n.parentElement;if(s===null)return null;n=s}if(n=r,ge(n)){const s=n.style.display;if(s===""&&!el(n)||s!==""&&!s.startsWith("inline"))return null}let o=n;for(;(o=e?n.firstChild:n.lastChild)!==null;)n=o;if(Ut(n))return n;if(n.nodeName==="BR")return null}}const Lm={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function It(t){const e=Lm[t.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:Zl(t.style,e),node:null}}function ue(t=""){return Me(new at(t))}function R(t){return t instanceof at}function Zl(t,e){const n=t.fontWeight,r=t.textDecoration.split(" "),o=n==="700"||n==="bold",s=r.includes("line-through"),i=t.fontStyle==="italic",l=r.includes("underline"),a=t.verticalAlign;return c=>(R(c)&&(o&&!c.hasFormat("bold")&&c.toggleFormat("bold"),s&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),i&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class to extends at{static getType(){return"tab"}static clone(e){return new to(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const n=super.createDOM(e),r=Qn(e.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(e){return fr().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&D(126),super.setTextContent("	")}spliceText(e,n,r,o){return r===""&&n===0||r==="	"&&n===1||D(286),this}setDetail(e){return e!==2&&D(127),this}setMode(e){return e!=="normal"&&D(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function fr(){return Me(new to)}function $s(t){return t instanceof to}class Im{constructor(e,n,r){this._selection=null,this.key=e,this.offset=n,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:$f(Ye(bt(this,"next")),Ye(bt(e,"next")))<0}getNode(){const e=we(this.key);return e===null&&D(20),e}set(e,n,r,o){const s=this._selection,i=this.key;o&&this.key===e&&this.offset===n&&this.type===r||(this.key=e,this.offset=n,this.type=r,gr()||(Vt()===i&&We(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}}function ot(t,e,n){return new Im(t,e,n)}function di(t,e){let n=e.__key,r=t.offset,o="element";if(R(e)){o="text";const s=e.getTextContentSize();r>s&&(r=s)}else if(!$(e)){const s=e.getNextSibling();if(R(s))n=s.__key,r=0,o="text";else{const i=e.getParent();i&&(n=i.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,o)}function pc(t,e){if($(e)){const n=e.getLastDescendant();$(n)||R(n)?di(t,n):di(t,e)}else di(t,e)}class As{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Re(e))return!1;const n=this._nodes,r=e._nodes;return n.size===r.size&&Array.from(n).every(o=>r.has(o))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new As(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const n=this.getNodes(),r=n.length,o=n[r-1];let s;if(R(o))s=o.select();else{const i=o.getIndexWithinParent()+1;s=o.getParentOrThrow().select(i,i)}s.insertNodes(e);for(let i=0;i<r;i++)n[i].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=this._nodes,r=[];for(const o of n){const s=we(o);s!==null&&r.push(s)}return gr()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let n="";for(let r=0;r<e.length;r++)n+=e[r].getTextContent();return n}deleteNodes(){const e=this.getNodes();if((F()||Mt())===this&&e[0]){const n=Ae(e[0],"next");Of(tn(n,n))}for(const n of e)n.remove()}}function E(t){return t instanceof In}class In{constructor(e,n,r,o){this.anchor=e,this.focus=n,e._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=o,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!E(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=function(r){const o=[],[s,i]=r.getTextSlices();s&&o.push(s.caret.origin);const l=new Set,a=new Set;for(const c of r)if(rt(c)){const{origin:u}=c;o.length===0?l.add(u):(a.add(u),o.push(u))}else{const{origin:u}=c;$(u)&&a.has(u)||o.push(u)}if(i&&o.push(i.caret.origin),en(r.focus)&&$(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let c=et(r.focus.origin,"previous");rt(c)&&l.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(o[o.length-1]);c=ao(c))l.delete(c.origin),o.pop();for(;o.length>1;){const c=o[o.length-1];if(!$(c)||a.has(c)||c.isEmpty()||l.has(c))break;o.pop()}if(o.length===0&&r.isCollapsed()){const c=Ye(r.anchor),u=Ye(r.anchor.getFlipped()),d=h=>Ft(h)?h.origin:h.getNodeAtCaret(),f=d(c)||d(u)||(r.anchor.getNodeAtCaret()?c.origin:u.origin);o.push(f)}return o}(Ff(tl(this),"next"));return gr()||(this._cachedNodes=n),n}setTextNodeRange(e,n,r,o){this.anchor.set(e.__key,n,"text"),this.focus.set(r.__key,o,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const n=e[0],r=e[e.length-1],o=this.anchor,s=this.focus,i=o.isBefore(s),[l,a]=Gi(this);let c="",u=!0;for(let d=0;d<e.length;d++){const f=e[d];if($(f)&&!f.isInline())u||(c+=`
`),u=!f.isEmpty();else if(u=!1,R(f)){let h=f.getTextContent();f===n?f===r?o.type==="element"&&s.type==="element"&&s.offset!==o.offset||(h=l<a?h.slice(l,a):h.slice(a,l)):h=i?h.slice(l):h.slice(a):f===r&&(h=i?h.slice(0,a):h.slice(0,l)),c+=h}else!de(f)&&!Ot(f)||f===r&&this.isCollapsed()||(c+=f.getTextContent())}return c}applyDOMRange(e){const n=$e(),r=n.getEditorState()._selection,o=lf(e.startContainer,e.startOffset,e.endContainer,e.endOffset,n,r);if(o===null)return;const[s,i]=o;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(i.key,i.offset,i.type,!0),sr(this)}clone(){const e=this.anchor,n=this.focus;return new In(ot(e.key,e.offset,e.type),ot(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(e){this.format=Zo(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const n=Zt[e];return!!(this.format&n)}insertRawText(e){const n=e.split(/(\r?\n|\t)/),r=[],o=n.length;for(let s=0;s<o;s++){const i=n[s];i===`
`||i===`\r
`?r.push(xt()):i==="	"?r.push(fr()):r.push(ue(i))}this.insertNodes(r)}insertText(e){const n=this.anchor,r=this.focus,o=this.format,s=this.style;let i=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(i=r,l=n),i.type==="element"&&function(_,y,x,C){const k=_.getNode(),w=k.getChildAtIndex(_.offset),v=ue(),N=Pe(k)?ee().append(v):v;v.setFormat(x),v.setStyle(C),w===null?k.append(N):w.insertBefore(N),_.is(y)&&y.set(v.__key,0,"text"),_.set(v.__key,0,"text")}(i,l,o,s),l.type==="element"&&ht(l,Ye(bt(l,"next")));const a=i.offset;let c=l.offset;const u=this.getNodes(),d=u.length;let f=u[0];R(f)||D(26);const h=f.getTextContent().length,g=f.getParentOrThrow();let m=u[d-1];if(d===1&&l.type==="element"&&(c=h,l.set(i.key,c,"text")),this.isCollapsed()&&a===h&&(kt(f)||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&f.getNextSibling()===null)){let _=f.getNextSibling();if(R(_)&&_.canInsertTextBefore()&&!kt(_)||(_=ue(),_.setFormat(o),_.setStyle(s),g.canInsertTextAfter()?f.insertAfter(_):g.insertAfter(_)),_.select(0,0),f=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(kt(f)||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&f.getPreviousSibling()===null)){let _=f.getPreviousSibling();if(R(_)&&!kt(_)||(_=ue(),_.setFormat(o),g.canInsertTextBefore()?f.insertBefore(_):g.insertBefore(_)),_.select(),f=_,e!=="")return void this.insertText(e)}else if(f.isSegmented()&&a!==h){const _=ue(f.getTextContent());_.setFormat(o),f.replace(_),f=_}else if(!this.isCollapsed()&&e!==""){const _=m.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||$(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),sf(this.anchor,this.focus,null),void this.insertText(e)}if(d===1){if(xn(f)){const C=ue(e);return C.select(),void f.replace(C)}const _=f.getFormat(),y=f.getStyle();if(a!==c||_===o&&y===s){if($s(f)){const C=ue(e);return C.setFormat(o),C.setStyle(s),C.select(),void f.replace(C)}}else{if(f.getTextContent()!==""){const C=ue(e);if(C.setFormat(o),C.setStyle(s),C.select(),a===0)f.insertBefore(C,!1);else{const[k]=f.splitText(a);k.insertAfter(C,!1)}return void(C.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}f.setFormat(o),f.setStyle(s)}const x=c-a;f=f.spliceText(a,x,e,!0),f.getTextContent()===""?f.remove():this.anchor.type==="text"&&(f.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=y))}else{const _=new Set([...f.getParentKeys(),...m.getParentKeys()]),y=$(f)?f:f.getParentOrThrow();let x=$(m)?m:m.getParentOrThrow(),C=m;if(!y.is(x)&&x.isInline())do C=x,x=x.getParentOrThrow();while(x.isInline());if(l.type==="text"&&(c!==0||m.getTextContent()==="")||l.type==="element"&&m.getIndexWithinParent()<c)if(R(m)&&!xn(m)&&c!==m.getTextContentSize()){if(m.isSegmented()){const S=ue(m.getTextContent());m.replace(S),m=S}Pe(l.getNode())||l.type!=="text"||(m=m.spliceText(0,c,"")),_.add(m.__key)}else{const S=m.getParentOrThrow();S.canBeEmpty()||S.getChildrenSize()!==1?m.remove():S.remove()}else _.add(m.__key);const k=x.getChildren(),w=new Set(u),v=y.is(x),N=y.isInline()&&f.getNextSibling()===null?y:f;for(let S=k.length-1;S>=0;S--){const T=k[S];if(T.is(f)||$(T)&&T.isParentOf(f))break;T.isAttached()&&(!w.has(T)||T.is(C)?v||N.insertAfter(T,!1):T.remove())}if(!v){let S=x,T=null;for(;S!==null;){const A=S.getChildren(),M=A.length;(M===0||A[M-1].is(T))&&(_.delete(S.__key),T=S),S=S.getParent()}}if(xn(f))if(a===h)f.select();else{const S=ue(e);S.select(),f.replace(S)}else f=f.spliceText(a,h-a,e,!0),f.getTextContent()===""?f.remove():f.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let S=1;S<d;S++){const T=u[S],A=T.__key;_.has(A)||T.remove()}}}removeText(){const e=F()===this;Lo(this,__(tl(this))),e&&F()!==this&&ke(this)}formatText(e,n=null){if(this.isCollapsed())return this.toggleFormat(e),void We(null);const r=this.getNodes(),o=[];for(const k of r)R(k)&&o.push(k);const s=k=>{r.forEach(w=>{if($(w)){const v=w.getFormatFlags(e,k);w.setTextFormat(v)}})},i=o.length;if(i===0)return this.toggleFormat(e),We(null),void s(n);const l=this.anchor,a=this.focus,c=this.isBackward(),u=c?a:l,d=c?l:a;let f=0,h=o[0],g=u.type==="element"?0:u.offset;if(u.type==="text"&&g===h.getTextContentSize()&&(f=1,h=o[1],g=0),h==null)return;const m=h.getFormatFlags(e,n);s(m);const _=i-1;let y=o[_];const x=d.type==="text"?d.offset:y.getTextContentSize();if(h.is(y)){if(g===x)return;if(kt(h)||g===0&&x===h.getTextContentSize())h.setFormat(m);else{const k=h.splitText(g,x),w=g===0?k[0]:k[1];w.setFormat(m),u.type==="text"&&u.set(w.__key,0,"text"),d.type==="text"&&d.set(w.__key,x-g,"text")}return void(this.format=m)}g===0||kt(h)||([,h]=h.splitText(g),g=0),h.setFormat(m);const C=y.getFormatFlags(e,m);x>0&&(x===y.getTextContentSize()||kt(y)||([y]=y.splitText(x)),y.setFormat(C));for(let k=f+1;k<_;k++){const w=o[k],v=w.getFormatFlags(e,C);w.setFormat(v)}u.type==="text"&&u.set(h.__key,g,"text"),d.type==="text"&&d.set(y.__key,x,"text"),this.format=m|C}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=F();return E(g)||D(134),g.insertNodes(e)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=mi(n,Jt),o=e[e.length-1];if($(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const g=fi(this);r.splice(g,0,e),o.selectEnd()}return}if(!e.some(g=>($(g)||de(g))&&!g.isInline())){$(r)||D(211,n.constructor.name,n.getType());const g=fi(this);return r.splice(g,0,e),void o.selectEnd()}const s=function(g){const m=ee();let _=null;for(let y=0;y<g.length;y++){const x=g[y],C=Ot(x);if(C||de(x)&&x.isInline()||$(x)&&x.isInline()||R(x)||x.isParentRequired()){if(_===null&&(_=x.createParentElementNode(),m.append(_),C))continue;_!==null&&_.append(x)}else m.append(x),_=null}return m}(e),i=s.getLastDescendant(),l=s.getChildren(),a=!$(r)||!r.isEmpty()?this.insertParagraph():null,c=l[l.length-1];let u=l[0];var d;$(d=u)&&Jt(d)&&!d.isEmpty()&&$(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&($(r)||D(211,n.constructor.name,n.getType()),r.append(...u.getChildren()),u=l[1]),u&&(r===null&&D(212,n.constructor.name,n.getType()),function(g,m,_){const y=m.getParentOrThrow().getLastChild();let x=m;const C=[m];for(;x!==y;)x.getNextSibling()||D(140),x=x.getNextSibling(),C.push(x);let k=g;for(const w of C)k=k.insertAfter(w)}(r,u));const f=mi(i,Jt);a&&$(f)&&(a.canMergeWhenEmpty()||Jt(c))&&(f.append(...a.getChildren()),a.remove()),$(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const h=$(r)?r.getLastChild():null;Ot(h)&&f!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=ee();return fe().splice(this.anchor.offset,0,[i]),i.select(),i}const e=fi(this),n=mi(this.anchor.getNode(),Jt);$(n)||D(213);const r=n.getChildAtIndex(e),o=r?[r,...r.getNextSiblings()]:[],s=n.insertNewAfter(this,!1);return s?(s.append(...o),s.selectStart(),s):null}insertLineBreak(e){const n=xt();if(this.insertNodes([n]),e){const r=n.getParentOrThrow(),o=n.getIndexWithinParent();r.select(o,o)}}extract(){const e=this.getNodes(),n=e.length,r=n-1,o=this.anchor,s=this.focus;let i=e[0],l=e[r];const[a,c]=Gi(this);if(n===0)return[];if(n===1){if(R(i)&&!this.isCollapsed()){const d=a>c?c:a,f=a>c?a:c,h=i.splitText(d,f),g=d===0?h[0]:h[1];return g!=null?[g]:[]}return[i]}const u=o.isBefore(s);if(R(i)){const d=u?a:c;d===i.getTextContentSize()?e.shift():d!==0&&([,i]=i.splitText(d),e[0]=i)}if(R(l)){const d=l.getTextContent().length,f=u?c:a;f===0?e.pop():f!==d&&([l]=l.splitText(f),e[r]=l)}return e}modify(e,n,r){if(Sc(this,e,n,r))return;const o=e==="move",s=$e(),i=Qe(ut(s));if(!i)return;const l=s._blockCursorElement,a=s._rootElement,c=this.focus.getNode();if(a===null||l===null||!$(c)||c.isInline()||c.canBeEmpty()||Zi(l,s,a),this.dirty){let u=ar(s,this.anchor.key),d=ar(s,this.focus.key);this.anchor.type==="text"&&(u=lr(u)),this.focus.type==="text"&&(d=lr(d)),u&&d&&cf(i,u,this.anchor.offset,d,this.focus.offset)}if(function(u,d,f,h){u.modify(d,f,h)}(i,e,n?"backward":"forward",r),i.rangeCount>0){const u=i.getRangeAt(0),d=this.anchor.getNode(),f=Pe(d)?d:r_(d);if(this.applyDOMRange(u),this.dirty=!0,!o){const h=this.getNodes(),g=[];let m=!1;for(let _=0;_<h.length;_++){const y=h[_];Xi(y,f)?g.push(y):m=!0}if(m&&g.length>0)if(n){const _=g[0];$(_)?_.selectStart():_.getParentOrThrow().selectStart()}else{const _=g[g.length-1];$(_)?_.selectEnd():_.getParentOrThrow().selectEnd()}i.anchorNode===u.startContainer&&i.anchorOffset===u.startOffset||function(_){const y=_.focus,x=_.anchor,C=x.key,k=x.offset,w=x.type;x.set(y.key,y.offset,y.type,!0),y.set(C,k,w,!0)}(this)}}r==="lineboundary"&&Sc(this,e,n,r,"decorators")}forwardDeletion(e,n,r){if(!r&&(e.type==="element"&&$(n)&&e.offset===n.getChildrenSize()||e.type==="text"&&e.offset===n.getTextContentSize())){const o=n.getParent(),s=n.getNextSibling()||(o===null?null:o.getNextSibling());if($(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(e){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let o=r.getNode();if(this.forwardDeletion(r,o,e))return;const s=Kr(bt(r,e?"previous":"next"));if(s.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const a of s.iterNodeCarets("shadowRoot"))if(rt(a)){if(!a.origin.isInline()){if(a.origin.isShadowRoot()){if(l.type==="merge-block")break;if($(s.anchor.origin)&&s.anchor.origin.isEmpty()){const c=Ye(a);Lo(this,tn(c,c)),s.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:a,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(en(a)){if($(a.origin)){if(a.origin.isInline()){if(!a.origin.isParentOf(s.anchor.origin))break}else l={block:a.origin,type:"merge-next-block"};continue}if(de(a.origin)){if(!a.origin.isIsolated())if(l.type==="merge-next-block"&&(a.origin.isKeyboardSelectable()||!a.origin.isInline())&&$(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();const c=Ql();c.add(a.origin.getKey()),ke(c)}else a.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:a,block:c}=l;return Lo(this,tn(!a.origin.isEmpty()&&c.isEmpty()?co(Ae(c,a.direction)):s.anchor,a)),this.removeText()}}const i=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&_c(this,r.getNode()))return}else{const l=i.type==="text"?i.getNode():null;if(o=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=i.offset,c=l.getTextContentSize();if(l.is(o)||e&&a!==c||!e&&a!==0)return void yc(l,e,a)}else if(o!==null&&o.isSegmented()){const a=r.offset,c=o.getTextContentSize();if(o.is(l)||e&&a!==0||!e&&a!==c)return void yc(o,e,a)}(function(a,c){const u=a.anchor,d=a.focus,f=u.getNode(),h=d.getNode();if(f===h&&u.type==="text"&&d.type==="text"){const g=u.offset,m=d.offset,_=g<m,y=_?g:m,x=_?m:g,C=x-1;y!==C&&function(k){return!(Sf(k)||jm(k))}(f.getTextContent().slice(y,x))&&(c?d.set(d.key,C,d.type):u.set(u.key,C,u.type))}})(this,e)}}if(this.removeText(),e&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Pe(r.getParent())&&r.getPreviousSibling()===null&&_c(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Re(t){return t instanceof As}function mc(t){const e=t.offset;if(t.type==="text")return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function Gi(t){const e=t.getStartEndPoints();if(e===null)return[0,0];const[n,r]=e;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[mc(n),mc(r)]}function _c(t,e){for(let n=e;n;n=n.getParent()){if($(n)){if(n.collapseAtStart(t))return!0;if(ze(n))break}if(n.getPreviousSibling())break}return!1}const jm=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch{}return()=>!1})();function yc(t,e,n){const r=t,o=r.getTextContent().split(/(?=\s)/g),s=o.length;let i=0,l=0;for(let c=0;c<s;c++){const u=c===s-1;if(l=i,i+=o[c].length,e&&i===n||i>n||u){o.splice(c,1),u&&(l=void 0);break}}const a=o.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function xc(t,e,n,r){let o,s=e;if(ge(t)){let i=!1;const l=t.childNodes,a=l.length,c=r._blockCursorElement;s===a&&(i=!0,s=a-1);let u=l[s],d=!1;if(u===c)u=l[s+1],d=!0;else if(c!==null){const f=c.parentNode;t===f&&e>Array.prototype.indexOf.call(f.children,c)&&s--}if(o=Jn(u),R(o))s=Mc(o,i);else{let f=Jn(t);if(f===null)return null;if($(f)){const h=r.getElementByKey(f.getKey());h===null&&D(214),[f,s]=f.getDOMSlot(h).resolveChildIndex(f,h,t,e),$(f)||D(215),i&&s>=f.getChildrenSize()&&(s=Math.max(0,f.getChildrenSize()-1));let m=f.getChildAtIndex(s);if($(m)&&function(_,y,x){const C=_.getParent();return x===null||C===null||!C.canBeEmpty()||C!==x.getNode()}(m,0,n)){const _=i?m.getLastDescendant():m.getFirstDescendant();_===null?f=m:(m=_,f=$(m)?m:m.getParentOrThrow()),s=0}R(m)?(o=m,f=null,s=Mc(m,i)):m!==f&&i&&!d&&($(f)||D(216),s=Math.min(f.getChildrenSize(),s+1))}else{const h=f.getIndexWithinParent();s=e===0&&de(f)&&Jn(t)===f?h:h+1,f=f.getParentOrThrow()}if($(f))return ot(f.__key,s,"element")}}else o=Jn(t);return R(o)?ot(o.__key,s,"text"):null}function bc(t,e,n){const r=t.offset,o=t.getNode();if(r===0){const s=o.getPreviousSibling(),i=o.getParent();if(e){if((n||!e)&&s===null&&$(i)&&i.isInline()){const l=i.getPreviousSibling();R(l)&&t.set(l.__key,l.getTextContent().length,"text")}}else $(s)&&!n&&s.isInline()?t.set(s.__key,s.getChildrenSize(),"element"):R(s)&&t.set(s.__key,s.getTextContent().length,"text")}else if(r===o.getTextContent().length){const s=o.getNextSibling(),i=o.getParent();if(e&&$(s)&&s.isInline())t.set(s.__key,0,"element");else if((n||e)&&s===null&&$(i)&&i.isInline()&&!i.canInsertTextAfter()){const l=i.getNextSibling();R(l)&&t.set(l.__key,0,"text")}}}function sf(t,e,n){if(t.type==="text"&&e.type==="text"){const r=t.isBefore(e),o=t.is(e);bc(t,r,o),bc(e,!r,o),o&&e.set(t.key,t.offset,t.type);const s=$e();if(s.isComposing()&&s._compositionKey!==t.key&&E(n)){const i=n.anchor,l=n.focus;t.set(i.key,i.offset,i.type,!0),e.set(l.key,l.offset,l.type,!0)}}}function lf(t,e,n,r,o,s){if(t===null||n===null||!so(o,t,n))return null;const i=xc(t,e,E(s)?s.anchor:null,o);if(i===null)return null;const l=xc(n,r,E(s)?s.focus:null,o);if(l===null)return null;if(i.type==="element"&&l.type==="element"){const a=Jn(t),c=Jn(n);if(de(a)&&de(c))return null}return sf(i,l,s),[i,l]}function Go(t){return $(t)&&!t.isInline()}function af(t,e,n,r,o,s){const i=rn(),l=new In(ot(t,e,o),ot(n,r,s),0,"");return l.dirty=!0,i._selection=l,l}function hr(){const t=ot("root",0,"element"),e=ot("root",0,"element");return new In(t,e,0,"")}function Ql(){return new As(new Set)}function Dm(t,e){return Os(null,t,e,null)}function Os(t,e,n,r){const o=n._window;if(o===null)return null;const s=r||o.event,i=s?s.type:void 0,l=i==="selectionchange",a=!Ri&&(l||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&s&&s.detail===3||i==="drop"||i===void 0);let c,u,d,f;if(E(t)&&!a)return t.clone();if(e===null)return null;if(c=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,l&&E(t)&&!so(n,c,u))return t.clone();const h=lf(c,d,u,f,n,t);if(h===null)return null;const[g,m]=h;return new In(g,m,E(t)?t.format:0,E(t)?t.style:"")}function F(){return rn()._selection}function Mt(){return $e()._editorState._selection}function qo(t,e,n,r=1){const o=t.anchor,s=t.focus,i=o.getNode(),l=s.getNode();if(!e.is(i)&&!e.is(l))return;const a=e.__key;if(t.isCollapsed()){const c=o.offset;if(n<=c&&r>0||n<c&&r<0){const u=Math.max(0,c+r);o.set(a,u,"element"),s.set(a,u,"element"),Cc(t)}}else{const c=t.isBackward(),u=c?s:o,d=u.getNode(),f=c?o:s,h=f.getNode();if(e.is(d)){const g=u.offset;(n<=g&&r>0||n<g&&r<0)&&u.set(a,Math.max(0,g+r),"element")}if(e.is(h)){const g=f.offset;(n<=g&&r>0||n<g&&r<0)&&f.set(a,Math.max(0,g+r),"element")}}Cc(t)}function Cc(t){const e=t.anchor,n=e.offset,r=t.focus,o=r.offset,s=e.getNode(),i=r.getNode();if(t.isCollapsed()){if(!$(s))return;const l=s.getChildrenSize(),a=n>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(n);if(R(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text"),r.set(c.__key,u,"text")}}else{if($(s)){const l=s.getChildrenSize(),a=n>=l,c=a?s.getChildAtIndex(l-1):s.getChildAtIndex(n);if(R(c)){let u=0;a&&(u=c.getTextContentSize()),e.set(c.__key,u,"text")}}if($(i)){const l=i.getChildrenSize(),a=o>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(o);if(R(c)){let u=0;a&&(u=c.getTextContentSize()),r.set(c.__key,u,"text")}}}}function Yo(t,e,n,r,o){let s=null,i=0,l=null;r!==null?(s=r.__key,R(r)?(i=r.getTextContentSize(),l="text"):$(r)&&(i=r.getChildrenSize(),l="element")):o!==null&&(s=o.__key,R(o)?l="text":$(o)&&(l="element")),s!==null&&l!==null?t.set(s,i,l):(i=e.getIndexWithinParent(),i===-1&&(i=n.getChildrenSize()),t.set(n.__key,i,"element"))}function vc(t,e,n,r,o){t.type==="text"?t.set(n,t.offset+(e?0:o),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function cf(t,e,n,r,o){try{t.setBaseAndExtent(e,n,r,o)}catch{}}function Pm(t,e,n,r,o,s,i){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(o.has(pf)&&d!==s||d!==null&&ia(d))return;if(!E(e))return void(t!==null&&so(n,l,a)&&r.removeAllRanges());const f=e.anchor,h=e.focus,g=f.key,m=h.key,_=ar(n,g),y=ar(n,m),x=f.offset,C=h.offset,k=e.format,w=e.style,v=e.isCollapsed();let N=_,S=y,T=!1;if(f.type==="text"){N=lr(_);const B=f.getNode();T=B.getFormat()!==k||B.getStyle()!==w}else E(t)&&t.anchor.type==="text"&&(T=!0);var A,M,L,I,j;if(h.type==="text"&&(S=lr(y)),N!==null&&S!==null&&(v&&(t===null||T||E(t)&&(t.format!==k||t.style!==w))&&(A=k,M=w,L=x,I=g,j=performance.now(),Xd=[A,M,L,I,j]),c!==x||u!==C||l!==N||a!==S||r.type==="Range"&&v||(d!==null&&s.contains(d)||s.focus({preventScroll:!0}),f.type==="element"))){if(cf(r,N,x,S,C),!o.has(Hm)&&e.isCollapsed()&&s!==null&&s===document.activeElement){const B=E(e)&&e.anchor.type==="element"?N.childNodes[x]||null:r.rangeCount>0?r.getRangeAt(0):null;if(B!==null){let W;if(B instanceof Text){const P=document.createRange();P.selectNode(B),W=P.getBoundingClientRect()}else W=B.getBoundingClientRect();(function(P,H,Y){const ne=Nf(Y),U=fa(ne);if(ne===null||U===null)return;let{top:O,bottom:K}=H,G=0,z=0,te=Y;for(;te!==null;){const he=te===ne.body;if(he)G=0,z=ut(P).innerHeight;else{const le=te.getBoundingClientRect();G=le.top,z=le.bottom}let Z=0;if(O<G?Z=-(G-O):K>z&&(Z=K-z),Z!==0)if(he)U.scrollBy(0,Z);else{const le=te.scrollTop;te.scrollTop+=Z;const Ee=te.scrollTop-le;O-=Ee,K-=Ee}if(he)break;te=io(te)}})(n,W,s)}}Hi=!0}}function no(t){let e=F()||Mt();e===null&&(e=fe().selectEnd()),e.insertNodes(t)}function fi(t){let e=t;t.isCollapsed()||e.removeText();const n=F();E(n)&&(e=n),E(e)||D(161);const r=e.anchor;let o=r.getNode(),s=r.offset;for(;!Jt(o);){const i=o;if([o,s]=zm(o,s),i.is(o))break}return s}function zm(t,e){const n=t.getParent();if(!n){const o=ee();return fe().append(o),o.select(),[fe(),0]}if(R(t)){const o=t.splitText(e);if(o.length===0)return[n,t.getIndexWithinParent()];const s=e===0?0:1;return[n,o[0].getIndexWithinParent()+s]}if(!$(t)||e===0)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const o=new In(ot(t.__key,e,"element"),ot(t.__key,e,"element"),0,""),s=t.insertNewAfter(o);s&&s.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function Sc(t,e,n,r,o="decorators-and-blocks"){if(e==="move"&&r==="character"&&!t.isCollapsed()){const[u,d]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return d.set(u.key,u.offset,u.type),!0}const s=bt(t.focus,n?"previous":"next"),i=r==="lineboundary",l=e==="move";let a=s,c=o==="decorators-and-blocks";if(!Ca(a)){for(const u of a){c=!1;const{origin:d}=u;if(!de(d)||d.isIsolated()||(a=u,!i||!d.isInline()))break}if(c)for(const u of Kr(s).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(rt(u))u.origin.isInline()||(a=u);else{if($(u.origin))continue;de(u.origin)&&!u.origin.isInline()&&(a=u)}break}}if(a===s)return!1;if(l&&!i&&de(a.origin)&&a.origin.isKeyboardSelectable()){const u=Ql();return u.add(a.origin.getKey()),ke(u),!0}return a=Ye(a),l&&ht(t.anchor,a),ht(t.focus,a),c||!i}let je=null,De=null,nt=!1,hi=!1,Mo=0;const wc={characterData:!0,childList:!0,subtree:!0};function gr(){return nt||je!==null&&je._readOnly}function Je(){nt&&D(13)}function uf(){Mo>99&&D(14)}function rn(){return je===null&&D(195,df()),je}function $e(){return De===null&&D(196,df()),De}function df(){let t=0;const e=new Set,n=Ms.version;if(typeof window<"u")for(const o of document.querySelectorAll("[contenteditable]")){const s=Ls(o);if(la(s))t++;else if(s){let i=String(s.constructor.version||"<0.17.1");i===n&&(i+=" (separately built, likely a bundler configuration issue)"),e.add(i)}}let r=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function Bm(){return De}function Tc(t,e,n){const r=e.__type,o=_f(t,r);let s=n.get(r);s===void 0&&(s=Array.from(o.transforms),n.set(r,s));const i=s.length;for(let l=0;l<i&&(s[l](e),e.isAttached());l++);}function kc(t,e){return t!==void 0&&t.__key!==e&&t.isAttached()}function ff(t,e){if(!e)return;const n=t._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const o of r)n.add(o)}function Km(t){return ea(t,$e()._nodes)}function ea(t,e){const n=t.type,r=e.get(n);r===void 0&&D(17,n);const o=r.klass;t.type!==o.getType()&&D(18,o.name);const s=o.importJSON(t),i=t.children;if($(s)&&Array.isArray(i))for(let l=0;l<i.length;l++){const a=ea(i[l],e);s.append(a)}return s}function Nc(t,e,n){const r=je,o=nt,s=De;je=e,nt=!0,De=t;try{return n()}finally{je=r,nt=o,De=s}}function Pt(t,e){const n=t._pendingEditorState,r=t._rootElement,o=t._headless||r===null;if(n===null)return;const s=t._editorState,i=s._selection,l=n._selection,a=t._dirtyType!==wn,c=je,u=nt,d=De,f=t._updating,h=t._observer;let g=null;if(t._pendingEditorState=null,t._editorState=n,!o&&a&&h!==null){De=t,je=n,nt=!1,t._updating=!0;try{const v=t._dirtyType,N=t._dirtyElements,S=t._dirtyLeaves;h.disconnect(),g=bm(s,n,t,v,N,S)}catch(v){if(v instanceof Error&&t._onError(v),hi)throw v;return mf(t,null,r,n),Dd(t),t._dirtyType=or,hi=!0,Pt(t,s),void(hi=!1)}finally{h.observe(r,wc),t._updating=f,je=c,nt=u,De=d}}n._readOnly||(n._readOnly=!0);const m=t._dirtyLeaves,_=t._dirtyElements,y=t._normalizedNodes,x=t._updateTags,C=t._deferred;a&&(t._dirtyType=wn,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),function(v,N){const S=v._decorators;let T=v._pendingDecorators||S;const A=N._nodeMap;let M;for(M in T)A.has(M)||(T===S&&(T=Cf(v)),delete T[M])}(t,n);const k=o?null:Qe(ut(t));if(t._editable&&k!==null&&(a||l===null||l.dirty)&&r!==null&&!x.has(Jm)){De=t,je=n;try{if(h!==null&&h.disconnect(),a||l===null||l.dirty){const v=t._blockCursorElement;v!==null&&Zi(v,t,r),Pm(i,l,t,k,x,r)}(function(v,N,S){let T=v._blockCursorElement;if(E(S)&&S.isCollapsed()&&S.anchor.type==="element"&&N.contains(document.activeElement)){const A=S.anchor,M=A.getNode(),L=A.offset;let I=!1,j=null;if(L===M.getChildrenSize())pi(M.getChildAtIndex(L-1))&&(I=!0);else{const B=M.getChildAtIndex(L);if(B!==null&&pi(B)){const W=B.getPreviousSibling();(W===null||pi(W))&&(I=!0,j=v.getElementByKey(B.__key))}}if(I){const B=v.getElementByKey(M.__key);return T===null&&(v._blockCursorElement=T=function(W){const P=W.theme,H=document.createElement("div");H.contentEditable="false",H.setAttribute("data-lexical-cursor","true");let Y=P.blockCursor;if(Y!==void 0){if(typeof Y=="string"){const ne=Do(Y);Y=P.blockCursor=ne}Y!==void 0&&H.classList.add(...Y)}return H}(v._config)),N.style.caretColor="transparent",void(j===null?B.appendChild(T):B.insertBefore(T,j))}}T!==null&&Zi(T,v,N)})(t,r,l)}finally{h!==null&&h.observe(r,wc),De=d,je=c}}g!==null&&function(v,N,S,T,A){const M=Array.from(v._listeners.mutation),L=M.length;for(let I=0;I<L;I++){const[j,B]=M[I];for(const W of B){const P=N.get(W);P!==void 0&&j(P,{dirtyLeaves:T,prevEditorState:A,updateTags:S})}}}(t,g,x,m,s),E(l)||l===null||i!==null&&i.is(l)||t.dispatchCommand(tt,void 0);const w=t._pendingDecorators;w!==null&&(t._decorators=w,t._pendingDecorators=null,Or("decorator",t,!0,w)),function(v,N,S){const T=Fc(N),A=Fc(S);T!==A&&Or("textcontent",v,!0,A)}(t,e||s,n),Or("update",t,!0,{dirtyElements:_,dirtyLeaves:m,editorState:n,mutatedNodes:g,normalizedNodes:y,prevEditorState:e||s,tags:x}),function(v,N){if(v._deferred=[],N.length!==0){const S=v._updating;v._updating=!0;try{for(let T=0;T<N.length;T++)N[T]()}finally{v._updating=S}}}(t,C),function(v){const N=v._updates;if(N.length!==0){const S=N.shift();if(S){const[T,A]=S;ta(v,T,A)}}}(t)}function Or(t,e,n,...r){const o=e._updating;e._updating=n;try{const s=Array.from(e._listeners[t]);for(let i=0;i<s.length;i++)s[i].apply(null,r)}finally{e._updating=o}}function Ec(t,e){const n=t._updates;let r=e||!1;for(;n.length!==0;){const o=n.shift();if(o){const[s,i]=o;let l;if(i!==void 0){if(l=i.onUpdate,i.skipTransforms&&(r=!0),i.discrete){const a=t._pendingEditorState;a===null&&D(191),a._flushSync=!0}l&&t._deferred.push(l),ff(t,i.tag)}s()}}return r}function ta(t,e,n){const r=t._updateTags;let o,s=!1,i=!1;n!==void 0&&(o=n.onUpdate,ff(t,n.tag),s=n.skipTransforms||!1,i=n.discrete||!1),o&&t._deferred.push(o);const l=t._editorState;let a=t._pendingEditorState,c=!1;(a===null||a._readOnly)&&(a=t._pendingEditorState=hf(a||l),c=!0),a._flushSync=i;const u=je,d=nt,f=De,h=t._updating;je=a,nt=!1,t._updating=!0,De=t;const g=t._headless||t.getRootElement()===null;oa(null);try{c&&(g?l._selection!==null&&(a._selection=l._selection.clone()):a._selection=function(x,C){const k=x.getEditorState()._selection,w=Qe(ut(x));return E(k)||k==null?Os(k,w,x,C):k.clone()}(t,n&&n.event||null));const _=t._compositionKey;e(),s=Ec(t,s),function(x,C){const k=C.getEditorState()._selection,w=x._selection;if(E(w)){const v=w.anchor,N=w.focus;let S;if(v.type==="text"&&(S=v.getNode(),S.selectionTransform(k,w)),N.type==="text"){const T=N.getNode();S!==T&&T.selectionTransform(k,w)}}}(a,t),t._dirtyType!==wn&&(s?function(x,C){const k=C._dirtyLeaves,w=x._nodeMap;for(const v of k){const N=w.get(v);R(N)&&N.isAttached()&&N.isSimpleText()&&!N.isUnmergeable()&&sc(N)}}(a,t):function(x,C){const k=C._dirtyLeaves,w=C._dirtyElements,v=x._nodeMap,N=Vt(),S=new Map;let T=k,A=T.size,M=w,L=M.size;for(;A>0||L>0;){if(A>0){C._dirtyLeaves=new Set;for(const I of T){const j=v.get(I);R(j)&&j.isAttached()&&j.isSimpleText()&&!j.isUnmergeable()&&sc(j),j!==void 0&&kc(j,N)&&Tc(C,j,S),k.add(I)}if(T=C._dirtyLeaves,A=T.size,A>0){Mo++;continue}}C._dirtyLeaves=new Set,C._dirtyElements=new Map,M.delete("root")&&M.set("root",!0);for(const I of M){const j=I[0],B=I[1];if(w.set(j,B),!B)continue;const W=v.get(j);W!==void 0&&kc(W,N)&&Tc(C,W,S)}T=C._dirtyLeaves,A=T.size,M=C._dirtyElements,L=M.size,Mo++}C._dirtyLeaves=k,C._dirtyElements=w}(a,t),Ec(t),function(x,C,k,w){const v=x._nodeMap,N=C._nodeMap,S=[];for(const[T]of w){const A=N.get(T);A!==void 0&&(A.isAttached()||($(A)&&Ld(A,T,v,N,S,w),v.has(T)||w.delete(T),S.push(T)))}for(const T of S)N.delete(T);for(const T of k){const A=N.get(T);A===void 0||A.isAttached()||(v.has(T)||k.delete(T),N.delete(T))}}(l,a,t._dirtyLeaves,t._dirtyElements)),_!==t._compositionKey&&(a._flushSync=!0);const y=a._selection;if(E(y)){const x=a._nodeMap,C=y.anchor.key,k=y.focus.key;x.get(C)!==void 0&&x.get(k)!==void 0||D(19)}else Re(y)&&y._nodes.size===0&&(a._selection=null)}catch(_){return _ instanceof Error&&t._onError(_),t._pendingEditorState=l,t._dirtyType=or,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void Pt(t)}finally{je=u,nt=d,De=f,t._updating=h,Mo=0}t._dirtyType!==wn||t._deferred.length>0||function(_,y){const x=y.getEditorState()._selection,C=_._selection;if(C!==null){if(C.dirty||!C.is(x))return!0}else if(x!==null)return!0;return!1}(a,t)?a._flushSync?(a._flushSync=!1,Pt(t)):c&&Ym(()=>{Pt(t)}):(a._flushSync=!1,c&&(r.clear(),t._deferred=[],t._pendingEditorState=null))}function lt(t,e,n){De===t&&n===void 0?e():ta(t,e,n)}class Fr{constructor(e,n,r){this.element=e,this.before=n||null,this.after=r||null}withBefore(e){return new Fr(this.element,e,this.after)}withAfter(e){return new Fr(this.element,this.before,e)}withElement(e){return this.element===e?this:new Fr(e,this.before,this.after)}insertChild(e){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&D(222),this.element.insertBefore(e,n),this}removeChild(e){return e.parentElement!==this.element&&D(223),this.element.removeChild(e),this}replaceChild(e,n){return n.parentElement!==this.element&&D(224),this.element.replaceChild(e,n),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const n=e==="decorator"&&(rr||jr);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const n=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&n.removeChild(r),n.removeChild(e),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const n=this.getManagedLineBreak();if(n){if(e===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,o=this.before,s=document.createElement("br");if(r.insertBefore(s,o),e){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",r.insertBefore(i,s),r.__lexicalLineBreak=i}else r.__lexicalLineBreak=s}getFirstChildOffset(){let e=0;for(let n=this.after;n!==null;n=n.previousSibling)e++;return e}resolveChildIndex(e,n,r,o){if(r===this.element){const a=this.getFirstChildOffset();return[e,Math.min(a+e.getChildrenSize(),Math.max(a,o))]}const s=$c(n,r);s.push(o);const i=$c(n,this.element);let l=e.getIndexWithinParent();for(let a=0;a<i.length;a++){const c=s[a],u=i[a];if(c===void 0||c<u)break;if(c>u){l+=1;break}}return[e.getParentOrThrow(),l]}}function $c(t,e){const n=[];let r=e;for(;r!==t&&r!==null;r=r.parentNode){let o=0;for(let s=r.previousSibling;s!==null;s=s.previousSibling)o++;n.push(o)}return r!==t&&D(225),n.reverse()}class Ie extends dr{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return lm[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getChildrenKeys(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n.__key),n=n.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=$e()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(e)}getAllTextNodes(){const e=[];let n=this.getFirstChild();for(;n!==null;){if(R(n)&&e.push(n),$(n)){const r=n.getAllTextNodes();e.push(...r)}n=n.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;$(e);){const n=e.getFirstChild();if(n===null)break;e=n}return e}getLastDescendant(){let e=this.getLastChild();for(;$(e);){const n=e.getLastChild();if(n===null)break;e=n}return e}getDescendantByIndex(e){const n=this.getChildren(),r=n.length;if(e>=r){const s=n[r-1];return $(s)&&s.getLastDescendant()||s||null}const o=n[e];return $(o)&&o.getFirstDescendant()||o||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:we(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&D(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:we(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&D(96,this.__key),e}getChildAtIndex(e){const n=this.getChildrenSize();let r,o;if(e<n/2){for(r=this.getFirstChild(),o=0;r!==null&&o<=e;){if(o===e)return r;r=r.getNextSibling(),o++}return null}for(r=this.getLastChild(),o=n-1;r!==null&&o>=e;){if(o===e)return r;r=r.getPreviousSibling(),o--}return null}getTextContent(){let e="";const n=this.getChildren(),r=n.length;for(let o=0;o<r;o++){const s=n[o];e+=s.getTextContent(),$(s)&&o!==r-1&&!s.isInline()&&(e+=Kt)}return e}getTextContentSize(){let e=0;const n=this.getChildren(),r=n.length;for(let o=0;o<r;o++){const s=n[o];e+=s.getTextContentSize(),$(s)&&o!==r-1&&!s.isInline()&&(e+=Kt.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const n=Xa[e];return!!(this.getFormat()&n)}return!1}hasTextFormat(e){const n=Zt[e];return!!(this.getTextFormat()&n)}getFormatFlags(e,n){return Zo(this.getLatest().__textFormat,e,n)}getTextStyle(){return this.getLatest().__textStyle}select(e,n){Je();const r=F();let o=e,s=n;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&n===0){const a=this.getFirstChild();if(R(a)||$(a))return a.select(0,0)}else if(!(e!==void 0&&e!==i||n!==void 0&&n!==i)){const a=this.getLastChild();if(R(a)||$(a))return a.select()}}o===void 0&&(o=i),s===void 0&&(s=i);const l=this.__key;return E(r)?(r.anchor.set(l,o,"element"),r.focus.set(l,s,"element"),r.dirty=!0,r):af(l,o,l,s,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(n=>n.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const n=this.getWritable();return n.__dir=e,n}setFormat(e){return this.getWritable().__format=e!==""?Xa[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const n=this.getWritable();return n.__textFormat=e,n}setTextStyle(e){const n=this.getWritable();return n.__textStyle=e,n}setIndent(e){return this.getWritable().__indent=e,this}splice(e,n,r){const o=r.length,s=this.getChildrenSize(),i=this.getWritable();e+n<=s||D(226,String(e),String(n),String(s));const l=i.__key,a=[],c=[],u=this.getChildAtIndex(e+n);let d=null,f=s-n+o;if(e!==0)if(e===s)d=this.getLastChild();else{const g=this.getChildAtIndex(e);g!==null&&(d=g.getPreviousSibling())}if(n>0){let g=d===null?this.getFirstChild():d.getNextSibling();for(let m=0;m<n;m++){g===null&&D(100);const _=g.getNextSibling(),y=g.__key;bn(g.getWritable()),c.push(y),g=_}}let h=d;for(let g=0;g<o;g++){const m=r[g];h!==null&&m.is(h)&&(d=h=h.getPreviousSibling());const _=m.getWritable();_.__parent===l&&f--,bn(_);const y=m.__key;if(h===null)i.__first=y,_.__prev=null;else{const x=h.getWritable();x.__next=y,_.__prev=x.__key}m.__key===l&&D(76),_.__parent=l,a.push(y),h=m}if(e+n===s)h!==null&&(h.getWritable().__next=null,i.__last=h.__key);else if(u!==null){const g=u.getWritable();if(h!==null){const m=h.getWritable();g.__prev=h.__key,m.__next=u.__key}else g.__prev=null}if(i.__size=f,c.length){const g=F();if(E(g)){const m=new Set(c),_=new Set(a),{anchor:y,focus:x}=g;Ac(y,m,_)&&Yo(y,y.getNode(),this,d,u),Ac(x,m,_)&&Yo(x,x.getNode(),this,d,u),f!==0||this.canBeEmpty()||ze(this)||this.remove()}}return i}getDOMSlot(e){return new Fr(e)}exportDOM(e){const{element:n}=super.exportDOM(e);if(ge(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const o=this.getDirection();o&&(n.dir=o)}return{element:n}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(e.textFormat=n),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,n){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,n){const r=this.getDOMSlot(e);let o=r.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){const i=n.getElementByKey(s.getKey());i!==null&&(o==null?(r.insertChild(i),o=i):o!==i&&r.replaceChild(i,o),o=o.nextSibling)}}}function $(t){return t instanceof Ie}function Ac(t,e,n){let r=t.getNode();for(;r;){const o=r.__key;if(e.has(o)&&!n.has(o))return!0;r=r.getParent()}return!1}class ro extends dr{decorate(e,n){D(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function de(t){return t instanceof ro}class oo extends Ie{static getType(){return"root"}static clone(){return new oo}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){D(51)}getTextContent(){const e=this.__cachedText;return!gr()&&$e()._dirtyType!==wn||e===null?super.getTextContent():e}remove(){D(52)}replace(e){D(53)}insertBefore(e){D(54)}insertAfter(e){D(55)}updateDOM(e,n){return!1}splice(e,n,r){for(const o of r)$(o)||de(o)||D(282);return super.splice(e,n,r)}static importJSON(e){return fe().updateFromJSON(e)}collapseAtStart(){return!0}}function Pe(t){return t instanceof oo}function hf(t){return new Fs(new Map(t._nodeMap))}function na(){return new Fs(new Map([["root",new oo]]))}function gf(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&D(130,n.name),$(t)){const r=e.children;Array.isArray(r)||D(59,n.name);const o=t.getChildren();for(let s=0;s<o.length;s++){const i=gf(o[s]);r.push(i)}}return e}class Fs{constructor(e,n){this._nodeMap=e,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,n){return Nc(n&&n.editor||null,this,e)}clone(e){const n=new Fs(this._nodeMap,e===void 0?this._selection:e);return n._readOnly=!0,n}toJSON(){return Nc(null,this,()=>({root:gf(fe())}))}}const Xo="historic",Wm="history-push",Xn="history-merge",Um="paste",pf="collaboration",Hm="skip-scroll-into-view",Jm="skip-dom-selection";class ra extends Ie{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class pr extends Ie{static getType(){return"paragraph"}static clone(e){return new pr(e.__key)}createDOM(e){const n=document.createElement("p"),r=Qn(e.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(e,n,r){return!1}static importDOM(){return{p:e=>({conversion:Vm,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(ge(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(e){return ee().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,n){const r=ee();r.setTextFormat(e.format),r.setTextStyle(e.style);const o=this.getDirection();return r.setDirection(o),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||R(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Vm(t){const e=ee();return t.style&&(e.setFormat(t.style.textAlign),pa(t,e)),{node:e}}function ee(){return Me(new pr)}function dt(t){return t instanceof pr}const se=0,Ge=1,Zn=3,Fe=4;function mf(t,e,n,r){const o=t._keyToDOMMap;o.clear(),t._editorState=na(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=wn,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const s=t._observer;s!==null&&(s.disconnect(),t._observer=null),e!==null&&(e.textContent=""),n!==null&&(n.textContent="",o.set("root",n))}function Gm(t){const e=t||{},n=Bm(),r=e.theme||{},o=t===void 0?n:e.parentEditor||null,s=e.disableEvents||!1,i=na(),l=e.namespace||(o!==null?o._config.namespace:wf()),a=e.editorState,c=[oo,at,eo,to,pr,ra,...e.nodes||[]],{onError:u,html:d}=e,f=e.editable===void 0||e.editable;let h;if(t===void 0&&n!==null)h=n._nodes;else{h=new Map;for(let m=0;m<c.length;m++){let _=c[m],y=null,x=null;if(typeof _!="function"){const N=_;_=N.replace,y=N.with,x=N.withKlass||null}const{ownNodeConfig:C}=ma(_),k=_.getType(),w=_.transform(),v=new Set;C&&C.$transform&&v.add(C.$transform),w!==null&&v.add(w),h.set(k,{exportDOM:d&&d.export?d.export.get(_):void 0,klass:_,replace:y,replaceWithKlass:x,sharedNodeState:pm(c[m]),transforms:v})}}const g=new Ms(i,o,h,{disableEvents:s,namespace:l,theme:r},u||console.error,function(m,_){const y=new Map,x=new Set,C=k=>{Object.keys(k).forEach(w=>{let v=y.get(w);v===void 0&&(v=[],y.set(w,v)),v.push(k[w])})};return m.forEach(k=>{const w=k.klass.importDOM;if(w==null||x.has(w))return;x.add(w);const v=w.call(k.klass);v!==null&&C(v)}),_&&C(_),y}(h,d?d.import:void 0),f,t);return a!==void 0&&(g._pendingEditorState=a,g._dirtyType=or),g}class Ms{constructor(e,n,r,o,s,i,l,a){this._createEditorArgs=a,this._parentEditor=n,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=o,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=wn,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=wf(),this._onError=s,this._htmlConversions=i,this._editable=l,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const n=this._listeners.update;return n.add(e),()=>{n.delete(e)}}registerEditableListener(e){const n=this._listeners.editable;return n.add(e),()=>{n.delete(e)}}registerDecoratorListener(e){const n=this._listeners.decorator;return n.add(e),()=>{n.delete(e)}}registerTextContentListener(e){const n=this._listeners.textcontent;return n.add(e),()=>{n.delete(e)}}registerRootListener(e){const n=this._listeners.root;return e(this._rootElement,null),n.add(e),()=>{e(null,this._rootElement),n.delete(e)}}registerCommand(e,n,r){r===void 0&&D(35);const o=this._commands;o.has(e)||o.set(e,[new Set,new Set,new Set,new Set,new Set]);const s=o.get(e);s===void 0&&D(36,String(e));const i=s[r];return i.add(n),()=>{i.delete(n),s.every(l=>l.size===0)&&o.delete(e)}}registerMutationListener(e,n,r){const o=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,s=this._listeners.mutation;let i=s.get(n);i===void 0&&(i=new Set,s.set(n,i)),i.add(o);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(n,o),()=>{i.delete(o),i.size===0&&s.delete(n)}}getRegisteredNode(e){const n=this._nodes.get(e.getType());return n===void 0&&D(37,e.name),n}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,n){const r=this._editorState,o=Pc(r).get(n.getType());if(!o)return;const s=new Map;for(const i of o.keys())s.set(i,"created");s.size>0&&e(s,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,n){const r=this.getRegisteredNode(e);return r.transforms.add(n),r}registerNodeTransform(e,n){const r=this.registerNodeTransformToKlass(e,n),o=[r],s=r.replaceWithKlass;if(s!=null){const i=this.registerNodeTransformToKlass(s,n);o.push(i)}return function(i,l){const a=Pc(i.getEditorState()),c=[];for(const u of l){const d=a.get(u);d&&c.push(d)}c.length!==0&&i.update(()=>{for(const u of c)for(const d of u.keys()){const f=we(d);f&&f.markDirty()}},i._pendingEditorState===null?{tag:Xn}:void 0)}(this,o.map(i=>i.klass.getType())),()=>{o.forEach(i=>i.transforms.delete(n))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,n){return J(this,e,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const n=this._rootElement;if(e!==n){const r=Qn(this._config.theme,"root"),o=this._pendingEditorState||this._editorState;if(this._rootElement=e,mf(this,n,e,o),n!==null&&(this._config.disableEvents||$m(n),r!=null&&n.classList.remove(...r)),e!==null){const s=fa(e),i=e.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=or,Dd(this),this._updateTags.add(Xn),Pt(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument,u=Vo.get(c);(u===void 0||u<1)&&c.addEventListener("selectionchange",nf),Vo.set(c,(u||0)+1),l.__lexicalEditor=a;const d=tf(l);for(let f=0;f<Ui.length;f++){const[h,g]=Ui[f],m=typeof g=="function"?_=>{dc(_)||(uc(_),(a.isEditable()||h==="click")&&g(_,a))}:_=>{if(dc(_))return;uc(_);const y=a.isEditable();switch(h){case"cut":return y&&J(a,Es,_);case"copy":return J(a,Ns,_);case"paste":return y&&J(a,Hl,_);case"dragstart":return y&&J(a,Xl,_);case"dragover":return y&&J(a,ks,_);case"dragend":return y&&J(a,wm,_);case"focus":return y&&J(a,Gd,_);case"blur":return y&&J(a,Nm,_);case"drop":return y&&J(a,Ts,_)}};l.addEventListener(h,m),d.push(()=>{l.removeEventListener(h,m)})}}(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(Xn),Pt(this);Or("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){e.isEmpty()&&D(38);let r=e;r._readOnly&&(r=hf(e),r._selection=e._selection?e._selection.clone():null),jd(this);const o=this._pendingEditorState,s=this._updateTags,i=n!==void 0?n.tag:null;o===null||o.isEmpty()||(i!=null&&s.add(i),Pt(this)),this._pendingEditorState=r,this._dirtyType=or,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),this._updating||Pt(this)}parseEditorState(e,n){return function(r,o,s){const i=na(),l=je,a=nt,c=De,u=o._dirtyElements,d=o._dirtyLeaves,f=o._cloneNotNeeded,h=o._dirtyType;o._dirtyElements=new Map,o._dirtyLeaves=new Set,o._cloneNotNeeded=new Set,o._dirtyType=0,je=i,nt=!1,De=o,oa(null);try{const g=o._nodes;ea(r.root,g),s&&s(),i._readOnly=!0}catch(g){g instanceof Error&&o._onError(g)}finally{o._dirtyElements=u,o._dirtyLeaves=d,o._cloneNotNeeded=f,o._dirtyType=h,je=l,nt=a,De=c}return i}(typeof e=="string"?JSON.parse(e):e,this,n)}read(e){return Pt(this),this.getEditorState().read(e,{editor:this})}update(e,n){(function(r,o,s){r._updating?r._updates.push([o,s]):ta(r,o,s)})(this,e,n)}focus(e,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),lt(this,()=>{const o=F(),s=fe();o!==null?o.dirty||ke(o.clone()):s.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),e_("focus"),t_(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const n=Qe(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Or("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}Ms.version="0.33.1+prod.esm";let qi=null;function oa(t){qi=t}let qm=1;function _f(t,e){const n=sa(t,e);return n===void 0&&D(30,e),n}function sa(t,e){return t._nodes.get(e)}const Ym=typeof queueMicrotask=="function"?queueMicrotask:t=>{Promise.resolve().then(t)};function Oc(t){return de(Ne(t))}function ia(t){const e=document.activeElement;if(!ge(e))return!1;const n=e.nodeName;return de(Ne(t))&&(n==="INPUT"||n==="TEXTAREA"||e.contentEditable==="true"&&Ls(e)==null)}function so(t,e,n){const r=t.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(n)&&e!==null&&!ia(e)&&Rs(e)===t}catch{return!1}}function la(t){return t instanceof Ms}function Rs(t){let e=t;for(;e!=null;){const n=Ls(e);if(la(n))return n;e=io(e)}return null}function Ls(t){return t?t.__lexicalEditor:null}function xn(t){return $s(t)||t.isToken()}function kt(t){return xn(t)||t.isSegmented()}function Ut(t){return ct(t)&&t.nodeType===Yp}function Xm(t){return ct(t)&&t.nodeType===Xp}function lr(t){let e=t;for(;e!=null;){if(Ut(e))return e;e=e.firstChild}return null}function Zo(t,e,n){const r=Zt[e];if(n!==null&&(t&r)==(n&r))return t;let o=t^r;return e==="subscript"?o&=-65:e==="superscript"?o&=-33:e==="lowercase"?(o&=-513,o&=-1025):e==="uppercase"?(o&=-257,o&=-1025):e==="capitalize"&&(o&=-257,o&=-513),o}function yf(t){return R(t)||Ot(t)||de(t)}function xf(t,e){const n=function(){const i=qi;return qi=null,i}();if((e=e||n&&n.__key)!=null)return void(t.__key=e);Je(),uf();const r=$e(),o=rn(),s=""+qm++;o._nodeMap.set(s,t),$(t)?r._dirtyElements.set(s,!0):r._dirtyLeaves.add(s),r._cloneNotNeeded.add(s),r._dirtyType=Fd,t.__key=s}function bn(t){const e=t.getParent();if(e!==null){const n=t.getWritable(),r=e.getWritable(),o=t.getPreviousSibling(),s=t.getNextSibling(),i=s!==null?s.__key:null,l=o!==null?o.__key:null,a=o!==null?o.getWritable():null,c=s!==null?s.getWritable():null;o===null&&(r.__first=i),s===null&&(r.__last=l),a!==null&&(a.__next=i),c!==null&&(c.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function Qo(t){uf();const e=t.getLatest(),n=e.__parent,r=rn(),o=$e(),s=r._nodeMap,i=o._dirtyElements;n!==null&&function(a,c,u){let d=a;for(;d!==null;){if(u.has(d))return;const f=c.get(d);if(f===void 0)break;u.set(d,!1),d=f.__parent}}(n,s,i);const l=e.__key;o._dirtyType=Fd,$(t)?i.set(l,!0):o._dirtyLeaves.add(l)}function We(t){Je();const e=$e(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,n!==null){const r=we(n);r!==null&&r.getWritable()}if(t!==null){const r=we(t);r!==null&&r.getWritable()}}}function Vt(){return gr()?null:$e()._compositionKey}function we(t,e){const n=(e||rn())._nodeMap.get(t);return n===void 0?null:n}function bf(t,e){const n=Is(t,$e());return n!==void 0?we(n,e):null}function Is(t,e){return t[`__lexicalKey_${e._key}`]}function Ne(t,e){let n=t;for(;n!=null;){const r=bf(n,e);if(r!==null)return r;n=io(n)}return null}function Cf(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function Fc(t){return t.read(()=>fe().getTextContent())}function fe(){return vf(rn())}function vf(t){return t._nodeMap.get("root")}function ke(t){Je();const e=rn();t!==null&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function Jn(t){const e=$e(),n=function(r,o){let s=r;for(;s!=null;){const i=Is(s,o);if(i!==void 0)return i;s=io(s)}return null}(t,e);return n===null?t===e.getRootElement()?we("root"):null:we(n)}function Mc(t,e){return e?t.getTextContentSize():0}function Sf(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function aa(t){const e=[];let n=t;for(;n!==null;)e.push(n),n=n._parentEditor;return e}function wf(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Tf(t){return Ut(t)?t.nodeValue:null}function ca(t,e,n){const r=Qe(ut(e));if(r===null)return;const o=r.anchorNode;let{anchorOffset:s,focusOffset:i}=r;if(o!==null){let l=Tf(o);const a=Ne(o);if(l!==null&&R(a)){if(l===ps&&n){const c=n.length;l=n,s=c,i=c}l!==null&&ua(a,l,s,i,t)}}}function ua(t,e,n,r,o){let s=t;if(s.isAttached()&&(o||!s.isDirty())){const i=s.isComposing();let l=e;(i||o)&&e[e.length-1]===ps&&(l=e.slice(0,-1));const a=s.getTextContent();if(o||l!==a){if(l===""){if(We(null),jr||rr||jo)s.remove();else{const m=$e();setTimeout(()=>{m.update(()=>{s.isAttached()&&s.remove()})},20)}return}const c=s.getParent(),u=Mt(),d=s.getTextContentSize(),f=Vt(),h=s.getKey();if(s.isToken()||f!==null&&h===f&&!i||E(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===t.__key&&u.anchor.offset===0&&!s.canInsertTextBefore()&&!i||u.focus.key===t.__key&&u.focus.offset===d&&!s.canInsertTextAfter()&&!i))return void s.markDirty();const g=F();if(!E(g)||n===null||r===null)return void s.setTextContent(l);if(g.setTextNodeRange(s,n,s,r),s.isSegmented()){const m=ue(s.getTextContent());s.replace(m),s=m}s.setTextContent(l)}}}function xo(t,e,n){const r=e[n]||!1;return r==="any"||r===t[n]}function Zm(t,e){return xo(t,e,"altKey")&&xo(t,e,"ctrlKey")&&xo(t,e,"shiftKey")&&xo(t,e,"metaKey")}function xe(t,e,n){return Zm(t,n)&&t.key.toLowerCase()===e.toLowerCase()}const jt={ctrlKey:!Nt,metaKey:Nt},Rc={altKey:Nt,ctrlKey:!Nt};function Lc(t){return t.key==="Backspace"}function Ic(t){return xe(t,"a",jt)}function Qm(t){const e=fe();if(E(t)){const n=t.anchor,r=t.focus,o=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(o.getKey(),0,"element"),r.set(o.getKey(),o.getChildrenSize(),"element"),sr(t),t}{const n=e.select(0,e.getChildrenSize());return ke(sr(n)),n}}function Qn(t,e){t.__lexicalClassNameCache===void 0&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(r!==void 0)return r;const o=t[e];if(typeof o=="string"){const s=Do(o);return n[e]=s,s}return o}function da(t,e,n,r,o){if(n.size===0)return;const s=r.__type,i=r.__key,l=e.get(s);l===void 0&&D(33,s);const a=l.klass;let c=t.get(a);c===void 0&&(c=new Map,t.set(a,c));const u=c.get(i),d=u==="destroyed"&&o==="created";(u===void 0||d)&&c.set(i,d?"updated":o)}function jc(t,e,n){const r=t.getParent();let o=n,s=t;return r!==null&&(e&&n===0?(o=s.getIndexWithinParent(),s=r):e||n!==s.getChildrenSize()||(o=s.getIndexWithinParent()+1,s=r)),s.getChildAtIndex(e?o-1:o)}function Yi(t,e){const n=t.offset;if(t.type==="element")return jc(t.getNode(),e,n);{const r=t.getNode();if(e&&n===0||!e&&n===r.getTextContentSize()){const o=e?r.getPreviousSibling():r.getNextSibling();return o===null?jc(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):o}}return null}function kf(t){const e=ut(t).event,n=e&&e.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function J(t,e,n){return function(r,o,s){const i=aa(r);for(let l=4;l>=0;l--)for(let a=0;a<i.length;a++){const c=i[a],u=c._commands.get(o);if(u!==void 0){const d=u[l];if(d!==void 0){const f=Array.from(d),h=f.length;let g=!1;if(lt(c,()=>{for(let m=0;m<h;m++)if(f[m](s,r))return void(g=!0)}),g)return g}}}return!1}(t,e,n)}function js(t){return!Pe(t)&&!t.isLastChild()&&!t.isInline()}function ar(t,e){const n=t._keyToDOMMap.get(e);return n===void 0&&D(75,e),n}function io(t){const e=t.assignedSlot||t.parentElement;return Qi(e)?e.host:e}function Nf(t){return Xm(t)?t:ge(t)?t.ownerDocument:null}function e_(t){Je(),$e()._updateTags.add(t)}function t_(t){Je(),$e()._deferred.push(t)}function Xi(t,e){let n=t.getParent();for(;n!==null;){if(n.is(e))return!0;n=n.getParent()}return!1}function fa(t){const e=Nf(t);return e?e.defaultView:null}function ut(t){const e=t._window;return e===null&&D(78),e}function n_(t){return $(t)&&t.isInline()||de(t)&&t.isInline()}function r_(t){let e=t.getParentOrThrow();for(;e!==null;){if(ze(e))return e;e=e.getParentOrThrow()}return e}function ze(t){return Pe(t)||$(t)&&t.isShadowRoot()}function o_(t){const e=t.constructor.clone(t);return xf(e,null),e.afterCloneFrom(t),e}function Me(t){const e=$e(),n=t.getType(),r=sa(e,n);r===void 0&&D(200,t.constructor.name,n);const{replace:o,replaceWithKlass:s}=r;if(o!==null){const i=o(t),l=i.constructor;return s!==null?i instanceof s||D(201,s.name,s.getType(),l.name,l.getType(),t.constructor.name,n):i instanceof t.constructor&&l!==t.constructor||D(202,l.name,l.getType(),t.constructor.name,n),i.__key===t.__key&&D(203,t.constructor.name,n,l.name,l.getType()),i}return t}function gi(t,e){!Pe(t.getParent())||$(e)||de(e)||D(99)}function s_(t){const e=we(t);return e===null&&D(63,t),e}function pi(t){return(de(t)||$(t)&&!t.canBeEmpty())&&!t.isInline()}function Zi(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;r!==null&&r.removeChild(t)}function Qe(t){return vt?(t||window).getSelection():null}function i_(t){const e=fa(t);return e?e.getSelection():null}function ha(t){return ge(t)&&t.tagName==="A"}function ge(t){return ct(t)&&t.nodeType===qp}function ct(t){return typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeType=="number"}function Qi(t){return ct(t)&&t.nodeType===Zp}function el(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return t.nodeName.match(e)!==null}function es(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return t.nodeName.match(e)!==null}function Jt(t){if(de(t)&&!t.isInline())return!0;if(!$(t)||ze(t))return!1;const e=t.getFirstChild(),n=e===null||Ot(e)||R(e)||e.isInline();return!t.isInline()&&t.canBeEmpty()!==!1&&n}function mi(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function lo(){return $e()}const Dc=new WeakMap,l_=new Map;function Pc(t){if(!t._readOnly&&t.isEmpty())return l_;t._readOnly||D(192);let e=Dc.get(t);return e||(e=function(n){const r=new Map;for(const[o,s]of n._nodeMap){const i=s.__type;let l=r.get(i);l||(l=new Map,r.set(i,l)),l.set(o,s)}return r}(t),Dc.set(t,e)),e}function ga(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function pa(t,e){const n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r)}function a_(t){t.__lexicalUnmanaged=!0}function c_(t){return t.__lexicalUnmanaged===!0}function Cr(t,e){return function(n,r){return Object.prototype.hasOwnProperty.call(n,r)}(t,e)&&t[e]!==dr[e]}function ma(t){const e=Za in t.prototype?t.prototype[Za]():void 0,n=function(i){return i===ro||i===Ie||i===dr}(t),r=!n&&Cr(t,"getType")?t.getType():void 0;let o,s=r;if(e)if(r)o=e[r];else for(const[i,l]of Object.entries(e))s=i,o=l;if(!n&&s&&(Cr(t,"getType")||(t.getType=()=>s),Cr(t,"clone")||(t.clone=i=>(oa(i),new t)),Cr(t,"importJSON")||(t.importJSON=o&&o.$importJSON||(i=>new t().updateFromJSON(i))),!Cr(t,"importDOM")&&o)){const{importDOM:i}=o;i&&(t.importDOM=()=>i)}return{ownNodeConfig:o,ownNodeType:s}}const u_={next:"previous",previous:"next"};class _a{constructor(e){this.origin=e}[Symbol.iterator](){return ba({hasNext:en,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return Ae(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Ae(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,n){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,n)),this}splice(e,n,r="next"){const o=r===this.direction?n:Array.from(n).reverse();let s=this;const i=this.getParentAtCaret(),l=new Map;for(let a=s.getAdjacentCaret();a!==null&&l.size<e;a=a.getAdjacentCaret()){const c=a.origin.getWritable();l.set(c.getKey(),c)}for(const a of o){if(l.size>0){const c=s.getNodeAtCaret();if(c){if(l.delete(c.getKey()),l.delete(a.getKey()),!(c.is(a)||s.origin.is(a))){const u=a.getParent();u&&u.is(i)&&a.remove(),c.replace(a)}}else c===null&&D(263,Array.from(l).join(" "))}else s.insert(a);s=Ae(a,this.direction)}for(const a of l.values())a.remove();return this}}class Br extends _a{constructor(){super(...arguments);Be(this,"type","child")}getLatest(){const n=this.origin.getLatest();return n===this.origin?this:et(n,this.direction)}getParentCaret(n="root"){return Ae(ya(this.getParentAtCaret(),n),this.direction)}getFlipped(){const n=jn(this.direction);return Ae(this.getNodeAtCaret(),n)||et(this.origin,n)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(n){return n instanceof Br&&this.direction===n.direction&&this.origin.is(n.origin)}isSamePointCaret(n){return this.isSameNodeCaret(n)}}const d_={root:Pe,shadowRoot:ze};function jn(t){return u_[t]}function ya(t,e="root"){return d_[e](t)?null:t}class En extends _a{constructor(){super(...arguments);Be(this,"type","sibling")}getLatest(){const n=this.origin.getLatest();return n===this.origin?this:Ae(n,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return $(this.origin)?et(this.origin,this.direction):null}getParentCaret(n="root"){return Ae(ya(this.getParentAtCaret(),n),this.direction)}getFlipped(){const n=jn(this.direction);return Ae(this.getNodeAtCaret(),n)||et(this.origin.getParentOrThrow(),n)}isSamePointCaret(n){return n instanceof En&&this.direction===n.direction&&this.origin.is(n.origin)}isSameNodeCaret(n){return(n instanceof En||n instanceof $n)&&this.direction===n.direction&&this.origin.is(n.origin)}}class $n extends _a{constructor(n,r){super(n);Be(this,"type","text");this.offset=r}getLatest(){const n=this.origin.getLatest();return n===this.origin?this:An(n,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(n="root"){return Ae(ya(this.getParentAtCaret(),n),this.direction)}getFlipped(){return An(this.origin,jn(this.direction),this.offset)}isSamePointCaret(n){return n instanceof $n&&this.direction===n.direction&&this.origin.is(n.origin)&&this.offset===n.offset}isSameNodeCaret(n){return(n instanceof En||n instanceof $n)&&this.direction===n.direction&&this.origin.is(n.origin)}getSiblingCaret(){return Ae(this.origin,this.direction)}}function Ft(t){return t instanceof $n}function en(t){return t instanceof En}function rt(t){return t instanceof Br}const f_={next:class extends $n{constructor(){super(...arguments);Be(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends $n{constructor(){super(...arguments);Be(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},h_={next:class extends En{constructor(){super(...arguments);Be(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends En{constructor(){super(...arguments);Be(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},g_={next:class extends Br{constructor(){super(...arguments);Be(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Br{constructor(){super(...arguments);Be(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Ae(t,e){return t?new h_[e](t):null}function An(t,e,n){return t?new f_[e](t,cr(t,n)):null}function cr(t,e){const n=t.getTextContentSize();let r=e==="next"?n:e==="previous"?0:e;return(r<0||r>n)&&(function(o,...s){const i=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",o);for(const a of s)l.append("v",a);i.search=l.toString(),console.warn(`Minified Lexical warning #${o}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(e),String(n),t.getKey()),r=r<0?0:n),r}function zc(t,e){return new m_(t,e)}function et(t,e){return $(t)?new g_[e](t):null}function p_(t){return t&&t.getChildCaret()||t}function ao(t){return t&&p_(t.getAdjacentCaret())}class xa{constructor(e,n,r){Be(this,"type","node-caret-range");this.anchor=e,this.focus=n,this.direction=r}getLatest(){const e=this.anchor.getLatest(),n=this.focus.getLatest();return e===this.anchor&&n===this.focus?this:new xa(e,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=o=>{const s=this[o].getLatest();return Ft(s)?function(i,l){const{direction:a,origin:c}=i,u=cr(c,l==="focus"?jn(a):a);return zc(i,u-i.offset)}(s,o):null},n=e("anchor"),r=e("focus");if(n&&r){const{caret:o}=n,{caret:s}=r;if(o.isSameNodeCaret(s))return[zc(o,s.offset-o.offset),null]}return[n,r]}iterNodeCarets(e="root"){const n=Ft(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),o=Ft(r),s=i=>i.isSameNodeCaret(r)?null:ao(i)||i.getParentCaret(e);return ba({hasNext:i=>i!==null&&!(o&&r.isSameNodeCaret(i)),initial:n.isSameNodeCaret(r)?null:s(n),map:i=>i,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class m_{constructor(e,n){Be(this,"type","slice");this.caret=e,this.distance=n}getSliceIndices(){const{distance:e,caret:{offset:n}}=this,r=n+e;return r<n?[r,n]:[n,r]}getTextContent(){const[e,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:n}}=this,[r,o]=this.getSliceIndices(),s=e.getTextContent();return An(e.setTextContent(s.slice(0,r)+s.slice(o)),n,r)}}function Kr(t){return tn(t,Ae(fe(),t.direction))}function Ef(t){return tn(t,t)}function tn(t,e){return t.direction!==e.direction&&D(265),new xa(t,e,t.direction)}function ba(t){const{initial:e,hasNext:n,step:r,map:o}=t;let s=e;return{[Symbol.iterator](){return this},next(){if(!n(s))return{done:!0,value:void 0};const i={done:!1,value:o(s)};return s=r(s),i}}}function $f(t,e){const n=Ro(t.origin,e.origin);switch(n===null&&D(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const r=t.type==="text",o=e.type==="text";return r&&o?function(s,i){return Math.sign(s-i)}(t.offset,e.offset):t.type===e.type?0:r?-1:o?1:t.type==="child"?-1:1}case"ancestor":return t.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return Af(n)}}function Af(t){const{a:e,b:n}=t,r=e.__key,o=n.__key;let s=e,i=n;for(;s&&i;s=s.getNextSibling(),i=i.getNextSibling()){if(s.__key===o)return-1;if(i.__key===r)return 1}return s===null?1:-1}function bo(t,e){return e.is(t)}function Bc(t){return $(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function Ro(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[r,o]=Bc(t);r;o=r,r=r.getParent())n.set(r,o);for(let[r,o]=Bc(e);r;o=r,r=r.getParent()){const s=n.get(r);if(s!==void 0)return s===null?(bo(t,r)||D(276),{commonAncestor:r,type:"ancestor"}):o===null?(bo(e,r)||D(277),{commonAncestor:r,type:"descendant"}):(($(s)||bo(t,s))&&($(o)||bo(e,o))&&r.is(s.getParent())&&r.is(o.getParent())||D(278),{a:s,b:o,commonAncestor:r,type:"branch"})}return null}function bt(t,e){const{type:n,key:r,offset:o}=t,s=s_(t.key);return n==="text"?(R(s)||D(266,s.getType(),r),An(s,e,o)):($(s)||D(267,s.getType(),r),y_(s,t.offset,e))}function ht(t,e){const{origin:n,direction:r}=e,o=r==="next";Ft(e)?t.set(n.getKey(),e.offset,"text"):en(e)?R(n)?t.set(n.getKey(),cr(n,r),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(o?1:0),"element"):(rt(e)&&$(n)||D(268),t.set(n.getKey(),o?0:n.getChildrenSize(),"element"))}function Of(t){const e=F(),n=E(e)?e:hr();return Lo(n,t),ke(n),n}function Lo(t,e){ht(t.anchor,e.anchor),ht(t.focus,e.focus)}function tl(t){const{anchor:e,focus:n}=t,r=bt(e,"next"),o=bt(n,"next"),s=$f(r,o)<=0?"next":"previous";return tn(Wt(r,s),Wt(o,s))}function co(t){const{direction:e,origin:n}=t,r=Ae(n,jn(e)).getNodeAtCaret();return r?Ae(r,e):et(n.getParentOrThrow(),e)}function Kc(t,e="root"){const n=[t];for(let r=rt(t)?t.getParentCaret(e):t.getSiblingCaret();r!==null;r=r.getParentCaret(e))n.push(co(r));return n}function _i(t){return!!t&&t.origin.isAttached()}function __(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",r="next";let o=e;const s=Ff(t,r),i=Kc(s.anchor,n),l=Kc(s.focus.getFlipped(),n),a=new Set,c=[];for(const g of s.iterNodeCarets(n))if(rt(g))a.add(g.origin.getKey());else if(en(g)){const{origin:m}=g;$(m)&&!a.has(m.getKey())||c.push(m)}for(const g of c)g.remove();for(const g of s.getTextSlices()){if(!g)continue;const{origin:m}=g.caret,_=m.getTextContentSize(),y=co(Ae(m,r)),x=m.getMode();if(Math.abs(g.distance)===_&&o==="removeEmptySlices"||x==="token"&&g.distance!==0)y.remove();else if(g.distance!==0){o="removeEmptySlices";let C=g.removeTextSlice();const k=g.caret.origin;if(x==="segmented"){const w=C.origin,v=ue(w.getTextContent()).setStyle(w.getStyle()).setFormat(w.getFormat());y.replaceOrInsert(v),C=An(v,r,C.offset)}k.is(i[0].origin)&&(i[0]=C),k.is(l[0].origin)&&(l[0]=C.getFlipped())}}let u,d;for(const g of i)if(_i(g)){u=Ye(g);break}for(const g of l)if(_i(g)){d=Ye(g);break}const f=function(g,m,_){if(!g||!m)return null;const y=g.getParentAtCaret(),x=m.getParentAtCaret();if(!y||!x)return null;const C=y.getParents().reverse();C.push(y);const k=x.getParents().reverse();k.push(x);const w=Math.min(C.length,k.length);let v;for(v=0;v<w&&C[v]===k[v];v++);const N=(A,M)=>{let L;for(let I=v;I<A.length;I++){const j=A[I];if(ze(j))return;!L&&M(j)&&(L=j)}return L},S=N(C,Jt),T=S&&N(k,A=>_.has(A.getKey())&&Jt(A));return S&&T?[S,T]:null}(u,d,a);if(f){const[g,m]=f;et(g,"previous").splice(0,m.getChildren()),m.remove()}const h=[u,d,...i,...l].find(_i);if(h)return Ef(Wt(Ye(h),t.direction));D(269,JSON.stringify(i.map(g=>g.origin.__key)))}function Ye(t){const e=function(o){let s=o;for(;rt(s);){const i=ao(s);if(!rt(i))break;s=i}return s}(t.getLatest()),{direction:n}=e;if(R(e.origin))return Ft(e)?e:An(e.origin,n,n);const r=e.getAdjacentCaret();return en(r)&&R(r.origin)?An(r.origin,n,jn(n)):e}function Ca(t){return Ft(t)&&t.offset!==cr(t.origin,t.direction)}function Wt(t,e){return t.direction===e?t:t.getFlipped()}function Ff(t,e){return t.direction===e?t:tn(Wt(t.focus,e),Wt(t.anchor,e))}function y_(t,e,n){let r=et(t,"next");for(let o=0;o<e;o++){const s=r.getAdjacentCaret();if(s===null)break;r=s}return Wt(r,n)}function x_(t){const{origin:e,offset:n,direction:r}=t;if(n===cr(e,r))return t.getSiblingCaret();if(n===cr(e,jn(r)))return co(t.getSiblingCaret());const[o]=e.splitText(n);return R(o)||D(281),Wt(Ae(o,"next"),r)}function b_(t,e){return!0}function C_(t,{$copyElementNode:e=o_,$splitTextPointCaretNext:n=x_,rootMode:r="shadowRoot",$shouldSplit:o=b_}={}){if(Ft(t))return n(t);const s=t.getParentCaret(r);if(s){const{origin:i}=s;if(rt(t)&&(!i.canBeEmpty()||!o(i,"first")))return co(s);const l=function(a){const c=[];for(let u=a.getAdjacentCaret();u;u=u.getAdjacentCaret())c.push(u.origin);return c}(t);(l.length>0||i.canBeEmpty()&&o(i,"last"))&&s.insert(e(i).splice(0,0,l))}return s}const Mf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,v_=Mf?b.useLayoutEffect:b.useEffect,Co={tag:Xn};function S_({initialConfig:t,children:e}){const n=b.useMemo(()=>{const{theme:r,namespace:o,nodes:s,onError:i,editorState:l,html:a}=t,c=Jp(null,r),u=Gm({editable:t.editable,html:a,namespace:o,nodes:s,onError:d=>i(d,u),theme:r});return function(d,f){if(f!==null){if(f===void 0)d.update(()=>{const h=fe();if(h.isEmpty()){const g=ee();h.append(g);const m=Mf?document.activeElement:null;(F()!==null||m!==null&&m===d.getRootElement())&&g.select()}},Co);else if(f!==null)switch(typeof f){case"string":{const h=d.parseEditorState(f);d.setEditorState(h,Co);break}case"object":d.setEditorState(f,Co);break;case"function":d.update(()=>{fe().isEmpty()&&f(d)},Co)}}}(u,l),[u,c]},[]);return v_(()=>{const r=t.editable,[o]=n;o.setEditable(r===void 0||r)},[]),p.jsx(Ad.Provider,{value:n,children:e})}const w_=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?b.useLayoutEffect:b.useEffect;function T_({ignoreHistoryMergeTagChange:t=!0,ignoreSelectionChange:e=!1,onChange:n}){const[r]=ie();return w_(()=>{if(n)return r.registerUpdateListener(({editorState:o,dirtyElements:s,dirtyLeaves:i,prevEditorState:l,tags:a})=>{e&&s.size===0&&i.size===0||t&&a.has(Xn)||l.isEmpty()||n(o,r,a)})},[r,t,e,n]),null}const k_={ltr:"text-left",rtl:"text-right",heading:{h1:"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl",h2:"scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight first:mt-0",h3:"scroll-m-20 text-2xl font-semibold tracking-tight",h4:"scroll-m-20 text-xl font-semibold tracking-tight",h5:"scroll-m-20 text-lg font-semibold tracking-tight",h6:"scroll-m-20 text-base font-semibold tracking-tight"},paragraph:"leading-7 [&:not(:first-child)]:mt-6",quote:"mt-6 border-l-2 pl-6 italic",link:"text-blue-600 hover:underline hover:cursor-pointer",list:{checklist:"relative",listitem:"mx-8",listitemChecked:'relative mx-2 px-6 list-none outline-none line-through before:content-[""] before:w-4 before:h-4 before:top-0.5 before:left-0 before:cursor-pointer before:block before:bg-cover before:absolute before:border before:border-primary before:rounded before:bg-primary before:bg-no-repeat after:content-[""] after:cursor-pointer after:border-white after:border-solid after:absolute after:block after:top-[6px] after:w-[3px] after:left-[7px] after:right-[7px] after:h-[6px] after:rotate-45 after:border-r-2 after:border-b-2 after:border-l-0 after:border-t-0',listitemUnchecked:'relative mx-2 px-6 list-none outline-none before:content-[""] before:w-4 before:h-4 before:top-0.5 before:left-0 before:cursor-pointer before:block before:bg-cover before:absolute before:border before:border-primary before:rounded',nested:{listitem:"list-none before:hidden after:hidden"},ol:"my-6 ml-6 list-decimal [&>li]:mt-2",olDepth:["list-outside !list-decimal","list-outside !list-[upper-roman]","list-outside !list-[lower-roman]","list-outside !list-[upper-alpha]","list-outside !list-[lower-alpha]"],ul:"m-0 p-0 list-outside"},hashtag:"text-blue-600 bg-blue-100 rounded-md px-1",text:{bold:"font-bold",code:"bg-gray-100 p-1 rounded-md",italic:"italic",strikethrough:"line-through",subscript:"sub",superscript:"sup",underline:"underline",underlineStrikethrough:"underline line-through"},image:"relative inline-block user-select-none cursor-default editor-image",inlineImage:"relative inline-block user-select-none cursor-default inline-editor-image",keyword:"text-purple-900 font-bold",code:"EditorTheme__code",codeHighlight:{atrule:"EditorTheme__tokenAttr",attr:"EditorTheme__tokenAttr",boolean:"EditorTheme__tokenProperty",builtin:"EditorTheme__tokenSelector",cdata:"EditorTheme__tokenComment",char:"EditorTheme__tokenSelector",class:"EditorTheme__tokenFunction","class-name":"EditorTheme__tokenFunction",comment:"EditorTheme__tokenComment",constant:"EditorTheme__tokenProperty",deleted:"EditorTheme__tokenProperty",doctype:"EditorTheme__tokenComment",entity:"EditorTheme__tokenOperator",function:"EditorTheme__tokenFunction",important:"EditorTheme__tokenVariable",inserted:"EditorTheme__tokenSelector",keyword:"EditorTheme__tokenAttr",namespace:"EditorTheme__tokenVariable",number:"EditorTheme__tokenProperty",operator:"EditorTheme__tokenOperator",prolog:"EditorTheme__tokenComment",property:"EditorTheme__tokenProperty",punctuation:"EditorTheme__tokenPunctuation",regex:"EditorTheme__tokenVariable",selector:"EditorTheme__tokenSelector",string:"EditorTheme__tokenSelector",symbol:"EditorTheme__tokenProperty",tag:"EditorTheme__tokenProperty",url:"EditorTheme__tokenOperator",variable:"EditorTheme__tokenVariable"},characterLimit:"!bg-destructive/50",table:"EditorTheme__table w-fit overflow-scroll border-collapse",tableCell:'EditorTheme__tableCell w-24 relative border px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right"',tableCellActionButton:"EditorTheme__tableCellActionButton bg-background block border-0 rounded-2xl w-5 h-5 text-foreground cursor-pointer",tableCellActionButtonContainer:"EditorTheme__tableCellActionButtonContainer block right-1 top-1.5 absolute z-10 w-5 h-5",tableCellEditing:"EditorTheme__tableCellEditing rounded-sm shadow-sm",tableCellHeader:"EditorTheme__tableCellHeader bg-muted border px-4 py-2 text-left font-bold [&[align=center]]:text-center [&[align=right]]:text-right",tableCellPrimarySelected:"EditorTheme__tableCellPrimarySelected border border-primary border-solid block h-[calc(100%-2px)] w-[calc(100%-2px)] absolute -left-[1px] -top-[1px] z-10 ",tableCellResizer:"EditorTheme__tableCellResizer absolute -right-1 h-full w-2 cursor-ew-resize z-10 top-0",tableCellSelected:"EditorTheme__tableCellSelected bg-muted",tableCellSortedIndicator:"EditorTheme__tableCellSortedIndicator block opacity-50 bsolute bottom-0 left-0 w-full h-1 bg-muted",tableResizeRuler:"EditorTheme__tableCellResizeRuler block absolute w-[1px] h-full bg-primary top-0",tableRowStriping:"EditorTheme__tableRowStriping m-0 border-t p-0 even:bg-muted",tableSelected:"EditorTheme__tableSelected ring-2 ring-primary ring-offset-2",tableSelection:"EditorTheme__tableSelection bg-transparent",layoutItem:"border border-dashed px-4 py-2",layoutContainer:"grid gap-2.5 my-2.5 mx-0",autocomplete:"text-muted-foreground",blockCursor:"",embedBlock:{base:"user-select-none",focus:"ring-2 ring-primary ring-offset-2"},hr:'p-0.5 border-none my-1 mx-0 cursor-pointer after:content-[""] after:block after:h-0.5 after:bg-muted selected:ring-2 selected:ring-primary selected:ring-offset-2 selected:user-select-none',indent:"[--lexical-indent-base-value:40px]",mark:"",markOverlap:""},nl=b.createContext({isLinkEditMode:!1,setIsLinkEditMode:()=>{}});function N_({children:t}){const[e,n]=b.useState(!1);return p.jsx(nl.Provider,{value:{isLinkEditMode:e,setIsLinkEditMode:n},children:t})}function E_(){if(!nl)throw new Error("useFloatingLinkContext must be used within a FloatingLinkContext");return b.useContext(nl)}function Rf(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const ts=new Map;function Lf(t){const e={};if(!t)return e;const n=t.split(";");for(const r of n)if(r!==""){const[o,s]=r.split(/:([^]+)/);o&&s&&(e[o.trim()]=s.trim())}return e}function Wr(t){let e=ts.get(t);return e===void 0&&(e=Lf(t),ts.set(t,e)),e}function $_(t){let e="";for(const n in t)n&&(e+=`${n}: ${t[n]};`);return e}function If(t,e){const n=t.getStartEndPoints();if(e.isSelected(t)&&!kt(e)&&n!==null){const[r,o]=n,s=t.isBackward(),i=r.getNode(),l=o.getNode(),a=e.is(i),c=e.is(l);if(a||c){const[u,d]=Gi(t),f=i.is(l),h=e.is(s?l:i),g=e.is(s?i:l);let m,_=0;f?(_=u>d?d:u,m=u>d?u:d):h?(_=s?d:u,m=void 0):g&&(_=0,m=s?u:d),e.__text=e.__text.slice(_,m)}}return e}function Wc(t){if(t.type==="text")return t.offset===t.getNode().getTextContentSize();const e=t.getNode();return $(e)||Rf(177),t.offset===e.getChildrenSize()}function A_(t){const e=t.getStyle(),n=Lf(e);ts.set(e,n)}function yi(t,e){(E(t)?t.isCollapsed():R(t)||$(t))||Rf(280);const n=Wr(E(t)?t.style:R(t)?t.getStyle():t.getTextStyle()),r=Object.entries(e).reduce((s,[i,l])=>(typeof l=="function"?s[i]=l(n[i],t):l===null?delete s[i]:s[i]=l,s),{...n}),o=$_(r);E(t)||R(t)?t.setStyle(o):t.setTextStyle(o),ts.set(o,r)}function Ds(t,e){if(E(t)&&t.isCollapsed()){yi(t,e);const n=t.anchor.getNode();$(n)&&n.isEmpty()&&yi(n,e)}O_(n=>{yi(n,e)})}function O_(t){const e=F();if(!e)return;const n=new Map;if(E(e))for(const s of tl(e).getTextSlices())s&&n.set(s.caret.origin.getKey(),s.getSliceIndices());const r=e.getNodes();for(const s of r){if(!R(s)||!s.canHaveFormat())continue;const[i,l]=(o=s,n.get(o.getKey())||[0,o.getTextContentSize()]);l!==i&&(kt(s)||i===0&&l===s.getTextContentSize()?t(s):t(s.splitText(i,l)[i===0?0:1]))}var o;E(e)&&e.anchor.type==="text"&&e.focus.type==="text"&&e.anchor.key===e.focus.key&&F_(e)}function F_(t){if(t.isBackward()){const{anchor:e,focus:n}=t,{key:r,offset:o,type:s}=e;e.set(n.key,n.offset,n.type),n.set(r,o,s)}}function jf(t){const e=t.anchor.getNode(),n=Pe(e)?e:e.getParentOrThrow(),r=lo().getElementByKey(n.getKey());if(r===null)return!1;const o=r.ownerDocument.defaultView;return o===null?!1:o.getComputedStyle(r).writingMode==="vertical-rl"}function Uc(t,e){const n=jf(t)?!e:e,r=bt(t.focus,n?"previous":"next");if(Ca(r))return!1;for(const o of Kr(r)){if(rt(o))return!o.origin.isInline();if(!$(o.origin)){if(de(o.origin))return!0;break}}return!1}function M_(t,e,n,r){t.modify(e?"extend":"move",n,r)}function R_(t){const e=t.anchor.getNode();return(Pe(e)?e:e.getParentOrThrow()).getDirection()==="rtl"}function Hc(t,e,n){const r=R_(t);let o;o=jf(t)||r?!n:n,M_(t,e,o,"character")}function L_(t,e,n){const r=Wr(t.getStyle());return r!==null&&r[e]||n}function Ps(t,e,n=""){let r=null;const o=t.getNodes(),s=t.anchor,i=t.focus,l=t.isBackward(),a=l?i.offset:s.offset,c=l?i.getNode():s.getNode();if(E(t)&&t.isCollapsed()&&t.style!==""){const u=Wr(t.style);if(u!==null&&e in u)return u[e]}for(let u=0;u<o.length;u++){const d=o[u];if((u===0||a!==0||!d.is(c))&&R(d)){const f=L_(d,e,n);if(r===null)r=f;else if(r!==f){r="";break}}}return r===null?n:r}function Df(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const zs=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,I_=zs&&"documentMode"in document?document.documentMode:null,j_=zs&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!zs||!("InputEvent"in window)||I_)&&"getTargetRanges"in new window.InputEvent("input");function Pf(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}function He(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}const D_=zs,P_=j_;function Te(t,...e){const n=Pf(...e);n.length>0&&t.classList.add(...n)}function mt(t,...e){const n=Pf(...e);n.length>0&&t.classList.remove(...n)}function z_(t){return t?t.getAdjacentCaret():null}function B_(t,e){let n=t;for(;n!=null;){if(n instanceof e)return n;n=n.getParent()}return null}function ns(t){const e=oe(t,n=>$(n)&&!n.isInline());return $(e)||Df(4,t.__key),e}const oe=(t,e)=>{let n=t;for(;n!==fe()&&n!=null;){if(e(n))return n;n=n.getParent()}return null};function zf(t){const e=F()||Mt();let n;if(E(e))n=bt(e.focus,"next");else{if(e!=null){const i=e.getNodes(),l=i[i.length-1];l&&(n=Ae(l,"next"))}n=n||et(fe(),"previous").getFlipped().insert(ee())}const r=K_(t,n),o=ao(r),s=rt(o)?Ye(o):r;return Of(Ef(s)),t.getLatest()}function K_(t,e,n){let r=Wt(e,"next");for(let o=r;o;o=C_(o,n))r=o;return Ft(r)&&Df(283),r.insert(t.isInline()?ee().append(t):t),Wt(Ae(t.getLatest(),"next"),e.direction)}function Gt(t,e){return t!==null&&Object.getPrototypeOf(t).constructor.name===e.name}function W_(t,e){const n=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o!==null&&n.push(o)}return n}function U_(t,e){et(t,"next").insert(e)}let xi=!(P_||!D_)&&void 0;function Xt(t){let e=1;if(function(){if(xi===void 0){const n=document.createElement("div");n.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(n);const r=n.getBoundingClientRect();n.style.setProperty("zoom","2"),xi=n.getBoundingClientRect().width===r.width,document.body.removeChild(n)}return xi}())for(;t;)e*=Number(window.getComputedStyle(t).getPropertyValue("zoom")),t=t.parentElement;return e}function Bf(t,e){return Kf(t,e,null)}function Kf(t,e,n){let r=!1;for(const o of Uf(t))e(o)?n!==null&&n(o):(r=!0,$(o)&&Kf(o,e,n||(s=>o.insertAfter(s))),o.remove());return r}function Wf(t,e){const n=[],r=Array.from(t).reverse();for(let o=r.pop();o!==void 0;o=r.pop())if(e(o))n.push(o);else if($(o))for(const s of Uf(o))r.push(s);return n}function Uf(t){return H_(et(t,"previous"))}function H_(t){return ba({hasNext:en,initial:t.getAdjacentCaret(),map:e=>e.origin.getLatest(),step:e=>e.getAdjacentCaret()})}Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(t){t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};o["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:o},Prism.languages.insertBefore("markup","cdata",s)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(t,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(u){return u=u.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+u+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,o=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+o+s+"(?:"+o+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+o+s+")(?:"+o+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+o+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+o+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(u){["url","bold","italic","strike","code-snippet"].forEach(function(d){u!==d&&(t.languages.markdown[u].inside.content.inside[d]=t.languages.markdown[d])})}),t.hooks.add("after-tokenize",function(u){if(u.language!=="markdown"&&u.language!=="md")return;function d(f){if(!(!f||typeof f=="string"))for(var h=0,g=f.length;h<g;h++){var m=f[h];if(m.type!=="code"){d(m.content);continue}var _=m.content[1],y=m.content[3];if(_&&y&&_.type==="code-language"&&y.type==="code-block"&&typeof _.content=="string"){var x=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");x=(/[a-z][\w-]*/i.exec(x)||[""])[0].toLowerCase();var C="language-"+x;y.alias?typeof y.alias=="string"?y.alias=[y.alias,C]:y.alias.push(C):y.alias=[C]}}}d(u.tokens)}),t.hooks.add("wrap",function(u){if(u.type==="code-block"){for(var d="",f=0,h=u.classes.length;f<h;f++){var g=u.classes[f],m=/language-(.+)/.exec(g);if(m){d=m[1];break}}var _=t.languages[d];if(_)u.content=t.highlight(c(u.content),_,d);else if(d&&d!=="none"&&t.plugins.autoloader){var y="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);u.attributes.id=y,t.plugins.autoloader.loadLanguages(d,function(){var x=document.getElementById(y);x&&(x.innerHTML=t.highlight(x.textContent,t.languages[d],d))})}}});var i=RegExp(t.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},a=String.fromCodePoint||String.fromCharCode;function c(u){var d=u.replace(i,"");return d=d.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(f,h){if(h=h.toLowerCase(),h[0]==="#"){var g;return h[1]==="x"?g=parseInt(h.slice(2),16):g=Number(h.slice(1)),a(g)}else{var m=l[h];return m||f}}),d}t.languages.md=t.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(t){var e=t.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};e.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:e},boolean:e.boolean,variable:e.variable}})(Prism);var Jc={},Vc;function J_(){return Vc||(Vc=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Jc}J_();var Gc={},qc;function V_(){return qc||(qc=1,function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string}(Prism)),Gc}V_();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(t){t.inside.interpolation.inside=Prism.languages.swift});var Yc={},Xc;function G_(){return Xc||(Xc=1,function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(Prism)),Yc}G_();var Zc={},Qc;function q_(){return Qc||(Qc=1,function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),Zc}q_();var eu={},tu;function Y_(){return tu||(tu=1,function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(Prism)),eu}Y_();(function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach(function(n){var r=e[n],o=[];/^\w+$/.test(n)||o.push(/\w+/.exec(n)[0]),n==="diff"&&o.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:o,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})})(Prism);const bi=globalThis.Prism||window.Prism,nu=t=>{const e=/^diff-([\w-]+)/i;try{if(!t)return!1;const n=e.exec(t);return n?bi.languages.hasOwnProperty("diff")&&bi.languages.hasOwnProperty(n[1]):bi.languages.hasOwnProperty(t)}catch{return!1}};function Hf(t,e){for(const n of t.childNodes){if(ge(n)&&n.tagName===e)return!0;Hf(n,e)}return!1}const Er="data-language",vo="data-highlight-language";let Bs=class Jf extends Ie{static getType(){return"code"}static clone(e){return new Jf(e.__language,e.__key)}constructor(e,n){super(n),this.__language=e||void 0,this.__isSyntaxHighlightSupported=nu(e)}createDOM(e){const n=document.createElement("code");Te(n,e.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(Er,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(vo,r)),n}updateDOM(e,n,r){const o=this.__language,s=e.__language;return o?o!==s&&(n.setAttribute(Er,o),this.__isSyntaxHighlightSupported&&n.setAttribute(vo,o)):s&&(n.removeAttribute(Er),e.__isSyntaxHighlightSupported&&n.removeAttribute(vo)),!1}exportDOM(e){const n=document.createElement("pre");Te(n,e._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(Er,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(vo,r)),{element:n}}static importDOM(){return{code:e=>e.textContent!=null&&(/\r?\n/.test(e.textContent)||Hf(e,"BR"))?{conversion:ru,priority:1}:null,div:()=>({conversion:X_,priority:1}),pre:()=>({conversion:ru,priority:0}),table:e=>Ci(e)?{conversion:Z_,priority:3}:null,td:e=>{const n=e,r=n.closest("table");return n.classList.contains("js-file-line")||r&&Ci(r)?{conversion:ou,priority:3}:null},tr:e=>{const n=e.closest("table");return n&&Ci(n)?{conversion:ou,priority:3}:null}}}static importJSON(e){return gt().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setLanguage(e.language)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage()}}insertNewAfter(e,n=!0){const r=this.getChildren(),o=r.length;if(o>=2&&r[o-1].getTextContent()===`
`&&r[o-2].getTextContent()===`
`&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===o){r[o-1].remove(),r[o-2].remove();const a=ee();return this.insertAfter(a,n),a}const{anchor:s,focus:i}=e,l=(s.isBefore(i)?s:i).getNode();if(R(l)){let a=ey(l);const c=[];for(;;)if($s(a))c.push(fr()),a=a.getNextSibling();else{if(!Sa(a))break;{let _=0;const y=a.getTextContent(),x=a.getTextContentSize();for(;_<x&&y[_]===" ";)_++;if(_!==0&&c.push(Gf(" ".repeat(_))),_!==x)break;a=a.getNextSibling()}}const u=l.splitText(s.offset)[0],d=s.offset===0?0:1,f=u.getIndexWithinParent()+d,h=l.getParentOrThrow(),g=[xt(),...c];h.splice(f,0,g);const m=c[c.length-1];m?m.select():s.offset===0?u.selectPrevious():u.getNextSibling().selectNext(0,0)}if(Ks(l)){const{offset:a}=e.anchor;l.splice(a,0,[xt()]),l.select(a+1,a+1)}return null}canIndent(){return!1}collapseAtStart(){const e=ee();return this.getChildren().forEach(n=>e.append(n)),this.replace(e),!0}setLanguage(e){const n=this.getWritable();return n.__language=e||void 0,n.__isSyntaxHighlightSupported=nu(e),n}getLanguage(){return this.getLatest().__language}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}};function gt(t){return Me(new Bs(t))}function Ks(t){return t instanceof Bs}function ru(t){return{node:gt(t.getAttribute(Er))}}function X_(t){const e=t,n=su(e);return n||function(r){let o=r.parentElement;for(;o!==null;){if(su(o))return!0;o=o.parentElement}return!1}(e)?{node:n?gt():null}:{node:null}}function Z_(){return{node:gt()}}function ou(){return{node:null}}function su(t){return t.style.fontFamily.match("monospace")!==null}function Ci(t){return t.classList.contains("js-file-line-container")}let va=class Vf extends at{constructor(e="",n,r){super(e,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(e){return new Vf(e.__text,e.__highlightType||void 0,e.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(e){const n=this.getWritable();return n.__highlightType=e||void 0,n}canHaveFormat(){return!1}createDOM(e){const n=super.createDOM(e),r=vi(e.theme,this.__highlightType);return Te(n,r),n}updateDOM(e,n,r){const o=super.updateDOM(e,n,r),s=vi(r.theme,e.__highlightType),i=vi(r.theme,this.__highlightType);return s!==i&&(s&&mt(n,s),i&&Te(n,i)),o}static importJSON(e){return Gf().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHighlightType(e.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(e){return this}isParentRequired(){return!0}createParentElementNode(){return gt()}};function vi(t,e){return e&&t&&t.codeHighlight&&t.codeHighlight[e]}function Gf(t="",e){return Me(new va(t,e))}function Sa(t){return t instanceof va}function Q_(t,e){let n=t;for(let r=Ae(t,e);r&&(Sa(r.origin)||$s(r.origin));r=z_(r))n=r.origin;return n}function ey(t){return Q_(t,"previous")}let rs=class qf extends at{static getType(){return"hashtag"}static clone(e){return new qf(e.__text,e.__key)}createDOM(e){const n=super.createDOM(e);return Te(n,e.theme.hashtag),n}static importJSON(e){return Yf().updateFromJSON(e)}canInsertTextBefore(){return!1}isTextEntity(){return!0}};function Yf(t=""){return Me(new rs(t))}const ty=new Set(["http:","https:","mailto:","sms:","tel:"]);let uo=class Xf extends Ie{static getType(){return"link"}static clone(e){return new Xf(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",n={},r){super(r);const{target:o=null,rel:s=null,title:i=null}=n;this.__url=e,this.__target=o,this.__rel=s,this.__title=i}createDOM(e){const n=document.createElement("a");return this.updateLinkDOM(null,n,e),Te(n,e.theme.link),n}updateLinkDOM(e,n,r){if(ha(n)){e&&e.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const o of["target","rel","title"]){const s=`__${o}`,i=this[s];e&&e[s]===i||(i?n[o]=i:n.removeAttribute(o))}}}updateDOM(e,n,r){return this.updateLinkDOM(e,n,r),!1}static importDOM(){return{a:e=>({conversion:ny,priority:1})}}static importJSON(e){return ur().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=lu(e);try{const n=new URL(lu(e));if(!ty.has(n.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const n=this.getWritable();return n.__url=e,n}getTarget(){return this.getLatest().__target}setTarget(e){const n=this.getWritable();return n.__target=e,n}getRel(){return this.getLatest().__rel}setRel(e){const n=this.getWritable();return n.__rel=e,n}getTitle(){return this.getLatest().__title}setTitle(e){const n=this.getWritable();return n.__title=e,n}insertNewAfter(e,n=!0){const r=ur(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,n,r){if(!E(n))return!1;const o=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(o)&&this.isParentOf(s)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function ny(t){let e=null;if(ha(t)){const n=t.textContent;(n!==null&&n!==""||t.children.length>0)&&(e=ur(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function ur(t="",e){return Me(new uo(t,e))}function On(t){return t instanceof uo}let wa=class Zf extends uo{constructor(e="",n={},r){super(e,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(e){return new Zf(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const n=this.getWritable();return n.__isUnlinked=e,n}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,n,r){return super.updateDOM(e,n,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return iu().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,n=!0){const r=this.getParentOrThrow().insertNewAfter(e,n);if($(r)){const o=iu(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(o),o}return null}};function iu(t="",e){return Me(new wa(t,e))}function ry(t){return t instanceof wa}const rl=X("TOGGLE_LINK_COMMAND"),oy=/^\+?[0-9\s()-]{5,}$/;function lu(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes("@")?`mailto:${t}`:oy.test(t)?`tel:${t}`:`https://${t}`}function qt(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ol(t){let e=1,n=t.getParent();for(;n!=null;){if(ce(n)){const r=n.getParent();if(Q(r)){e++,n=r.getParent();continue}qt(40)}return e}return e}function sl(t){let e=t.getParent();Q(e)||qt(40);let n=e;for(;n!==null;)n=n.getParent(),Q(n)&&(e=n);return e}function Qf(t){let e=[];const n=t.getChildren().filter(ce);for(let r=0;r<n.length;r++){const o=n[r],s=o.getFirstChild();Q(s)?e=e.concat(Qf(s)):e.push(o)}return e}function $t(t){return ce(t)&&Q(t.getFirstChild())}function au(t){return st().append(t)}function eh(t,e){return ce(t)&&(e.length===0||e.length===1&&t.is(e[0])&&t.getChildrenSize()===0)}function il(t){const e=F();if(e!==null){let n=e.getNodes();if(E(e)){const o=e.getStartEndPoints();o===null&&qt(143);const[s]=o,i=s.getNode(),l=i.getParent();if(ze(i)){const a=i.getFirstChild();if(a)n=a.selectStart().getNodes();else{const c=ee();i.append(c),n=c.select().getNodes()}}else if(eh(i,n)){const a=Ze(t);if(ze(l)){i.replace(a);const c=st();$(i)&&(c.setFormat(i.getFormatType()),c.setIndent(i.getIndent())),a.append(c)}else if(ce(i)){const c=i.getParentOrThrow();Fn(a,c.getChildren()),c.replace(a)}return}}const r=new Set;for(let o=0;o<n.length;o++){const s=n[o];if($(s)&&s.isEmpty()&&!ce(s)&&!r.has(s.getKey())){cu(s,t);continue}let i=yf(s)?s.getParent():ce(s)&&s.isEmpty()?s:null;for(;i!=null;){const l=i.getKey();if(Q(i)){if(!r.has(l)){const a=Ze(t);Fn(a,i.getChildren()),i.replace(a),r.add(l)}break}{const a=i.getParent();if(ze(a)&&!r.has(l)){r.add(l),cu(i,t);break}i=a}}}}}function Fn(t,e){t.splice(t.getChildrenSize(),0,e)}function cu(t,e){if(Q(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),o=st();let s;if(Fn(o,t.getChildren()),Q(n)&&e===n.getListType())n.append(o),Q(r)&&e===r.getListType()&&(Fn(n,r.getChildren()),r.remove()),s=n;else if(Q(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(o),s=r;else{const i=Ze(e);i.append(o),t.replace(i),s=i}return o.setFormat(t.getFormatType()),o.setIndent(t.getIndent()),t.remove(),s}function Ta(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&$t(n)&&$t(r)&&(Ta(n.getFirstChild(),r.getFirstChild()),r.remove());const o=e.getChildren();o.length>0&&t.append(...o),e.remove()}function sy(){const t=F();if(E(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if(eh(r,n))e.add(sl(r));else for(let o=0;o<n.length;o++){const s=n[o];if(yf(s)){const i=B_(s,Ht);i!=null&&e.add(sl(i))}}for(const o of e){let s=o;const i=Qf(o);for(const l of i){const a=ee().setTextStyle(t.style).setTextFormat(t.format);Fn(a,l.getChildren()),s.insertAfter(a),s=a,l.__key===t.anchor.key&&ht(t.anchor,Ye(et(a,"next"))),l.__key===t.focus.key&&ht(t.focus,Ye(et(a,"next"))),l.remove()}o.remove()}}}function th(t){const e=t.getListType()!=="check";let n=t.getStart();for(const r of t.getChildren())ce(r)&&(r.getValue()!==n&&r.setValue(n),e&&r.getLatest().__checked!=null&&r.setChecked(void 0),Q(r.getFirstChild())||n++)}function iy(t){const e=new Set;if($t(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),o=t.getPreviousSibling();if($t(r)&&$t(o)){const s=o.getFirstChild();if(Q(s)){s.append(t);const i=r.getFirstChild();Q(i)&&(Fn(s,i.getChildren()),r.remove(),e.add(r.getKey()))}}else if($t(r)){const s=r.getFirstChild();if(Q(s)){const i=s.getFirstChild();i!==null&&i.insertBefore(t)}}else if($t(o)){const s=o.getFirstChild();Q(s)&&s.append(t)}else if(Q(n)){const s=st().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),i=Ze(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());s.append(i),i.append(t),o?o.insertAfter(s):r?r.insertBefore(s):n.append(s)}}function ly(t){if($t(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(Q(n?n.getParent():void 0)&&ce(n)&&Q(e)){const r=e?e.getFirstChild():void 0,o=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(o))n.insertAfter(t),e.isEmpty()&&n.remove();else{const s=e.getListType(),i=st(),l=Ze(s);i.append(l),t.getPreviousSiblings().forEach(u=>l.append(u));const a=st(),c=Ze(s);a.append(c),Fn(c,t.getNextSiblings()),n.insertBefore(i),n.insertAfter(a),n.replace(t)}}}function ay(){const t=F();if(!E(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!ce(e)||e.getChildrenSize()!==0)return!1;const n=sl(e),r=e.getParent();Q(r)||qt(40);const o=r.getParent();let s;if(ze(o))s=ee(),n.insertAfter(s);else{if(!ce(o))return!1;s=st(),o.insertAfter(s)}s.setTextStyle(t.style).setTextFormat(t.format).select();const i=e.getNextSiblings();if(i.length>0){const l=Ze(r.getListType());if(ce(s)){const a=st();a.append(l),s.insertAfter(a)}else s.insertAfter(l);l.append(...i)}return function(l){let a=l;for(;a.getNextSibling()==null&&a.getPreviousSibling()==null;){const c=a.getParent();if(c==null||!ce(c)&&!Q(c))break;a=c}a.remove()}(e),!0}function os(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}let Ht=class extends Ie{$config(){return this.config("listitem",{$transform:e=>{if(e.__checked==null)return;const n=e.getParent();Q(n)&&n.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:Ie,importDOM:{li:()=>({conversion:cy,priority:0})}})}constructor(e=1,n=void 0,r){super(r),this.__value=e===void 0?1:e,this.__checked=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){const n=document.createElement("li");return this.updateListItemDOM(null,n,e),n}updateListItemDOM(e,n,r){const o=this.getParent();Q(o)&&o.getListType()==="check"&&function(l,a,c,u){Q(a.getFirstChild())?(l.removeAttribute("role"),l.removeAttribute("tabIndex"),l.removeAttribute("aria-checked")):(l.setAttribute("role","checkbox"),l.setAttribute("tabIndex","-1"),c&&a.__checked===c.__checked||l.setAttribute("aria-checked",a.getChecked()?"true":"false"))}(n,this,e),n.value=this.__value,function(l,a,c){const u=[],d=[],f=a.list,h=f?f.listitem:void 0;let g;if(f&&f.nested&&(g=f.nested.listitem),h!==void 0&&u.push(...os(h)),f){const m=c.getParent(),_=Q(m)&&m.getListType()==="check",y=c.getChecked();_&&!y||d.push(f.listitemUnchecked),_&&y||d.push(f.listitemChecked),_&&u.push(y?f.listitemChecked:f.listitemUnchecked)}if(g!==void 0){const m=os(g);c.getChildren().some(_=>Q(_))?u.push(...m):d.push(...m)}d.length>0&&mt(l,...d),u.length>0&&Te(l,...u)}(n,r.theme,this);const s=e?e.__style:"",i=this.__style;s!==i&&(i===""?n.removeAttribute("style"):n.style.cssText=i),function(l,a,c){const u=Wr(a.__textStyle);for(const d in u)l.style.setProperty(`--listitem-marker-${d}`,u[d]);if(c)for(const d in Wr(c.__textStyle))d in u||l.style.removeProperty(`--listitem-marker-${d}`)}(n,this,e)}updateDOM(e,n,r){const o=n;return this.updateListItemDOM(e,o,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){const n=this.createDOM(e._config),r=this.getFormatType();r&&(n.style.textAlign=r);const o=this.getDirection();return o&&(n.dir=o),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let n=0;n<e.length;n++){const r=e[n];if($(r)&&this.canMergeWith(r)){const o=r.getChildren();this.append(...o),r.remove()}else super.append(r)}return this}replace(e,n){if(ce(e))return super.replace(e);this.setIndent(0);const r=this.getParentOrThrow();if(!Q(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{const o=Ze(r.getListType());let s=this.getNextSibling();for(;s;){const i=s;s=s.getNextSibling(),o.append(i)}r.insertAfter(e),e.insertAfter(o)}return n&&($(e)||qt(139),this.getChildren().forEach(o=>{e.append(o)})),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,n=!0){const r=this.getParentOrThrow();if(Q(r)||qt(39),ce(e))return super.insertAfter(e,n);const o=this.getNextSiblings();if(r.insertAfter(e,n),o.length!==0){const s=Ze(r.getListType());o.forEach(i=>s.append(i)),e.insertAfter(s,n)}return e}remove(e){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),n&&r&&$t(n)&&$t(r)&&(Ta(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,n=!0){const r=st().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(e){const n=ee();this.getChildren().forEach(i=>n.append(i));const r=this.getParentOrThrow(),o=r.getParentOrThrow(),s=ce(o);if(r.getChildrenSize()===1)if(s)r.remove(),o.select();else{r.insertBefore(n),r.remove();const i=e.anchor,l=e.focus,a=n.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(a,i.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(a,l.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){const n=this.getWritable();return n.__value=e,n}getChecked(){const e=this.getLatest();let n;const r=this.getParent();return Q(r)&&(n=r.getListType()),n==="check"?!!e.__checked:void 0}setChecked(e){const n=this.getWritable();return n.__checked=e,n}toggleChecked(){const e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){const e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let n=e.getParentOrThrow(),r=0;for(;ce(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!="number"&&qt(117),(e=Math.floor(e))>=0||qt(199);let n=this.getIndent();for(;n!==e;)n<e?(iy(this),n++):(ly(this),n--);return this}canInsertAfter(e){return ce(e)}canReplaceWith(e){return ce(e)}canMergeWith(e){return ce(e)||dt(e)}extractWithChild(e,n){if(!E(n))return!1;const r=n.anchor.getNode(),o=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Ze("bullet")}canMergeWhenEmpty(){return!0}};function cy(t){if(t.classList.contains("task-list-item")){for(const n of t.children)if(n.tagName==="INPUT")return uy(n)}const e=t.getAttribute("aria-checked");return{node:st(e==="true"||e!=="false"&&void 0)}}function uy(t){return t.getAttribute("type")!=="checkbox"?{node:null}:{node:st(t.hasAttribute("checked"))}}function st(t){return Me(new Ht(void 0,t))}function ce(t){return t instanceof Ht}let on=class extends Ie{$config(){return this.config("list",{$transform:e=>{(function(n){const r=n.getNextSibling();Q(r)&&n.getListType()===r.getListType()&&Ta(n,r)})(e),th(e)},extends:Ie,importDOM:{ol:()=>({conversion:du,priority:0}),ul:()=>({conversion:du,priority:0})}})}constructor(e="number",n=1,r){super(r);const o=fy[e]||e;this.__listType=o,this.__tag=o==="number"?"ol":"ul",this.__start=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){const n=this.getWritable();return n.__listType=e,n.__tag=e==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){const n=this.getWritable();return n.__start=e,n}createDOM(e,n){const r=this.__tag,o=document.createElement(r);return this.__start!==1&&o.setAttribute("start",String(this.__start)),o.__lexicalListType=this.__listType,uu(o,e.theme,this),o}updateDOM(e,n,r){return e.__tag!==this.__tag||(uu(n,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){const n=this.createDOM(e._config,e);return ge(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,n,r){let o=r;for(let s=0;s<r.length;s++){const i=r[s];ce(i)||(o===r&&(o=[...r]),o[s]=st().append(!$(i)||Q(i)||i.isInline()?i:ue(i.getTextContent())))}return super.splice(e,n,o)}extractWithChild(e){return ce(e)}};function uu(t,e,n){const r=[],o=[],s=e.list;if(s!==void 0){const i=s[`${n.__tag}Depth`]||[],l=ol(n)-1,a=l%i.length,c=i[a],u=s[n.__tag];let d;const f=s.nested,h=s.checklist;if(f!==void 0&&f.list&&(d=f.list),u!==void 0&&r.push(u),h!==void 0&&n.__listType==="check"&&r.push(h),c!==void 0){r.push(...os(c));for(let g=0;g<i.length;g++)g!==a&&o.push(n.__tag+g)}if(d!==void 0){const g=os(d);l>1?r.push(...g):o.push(...g)}}o.length>0&&mt(t,...o),r.length>0&&Te(t,...r)}function dy(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(ce(r)){e.push(r);const o=r.getChildren();o.length>1&&o.forEach(s=>{Q(s)&&e.push(au(s))})}else e.push(au(r))}return e}function du(t){const e=t.nodeName.toLowerCase();let n=null;return e==="ol"?n=Ze("number",t.start):e==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const o of r.childNodes)if(ge(o)&&o.hasAttribute("aria-checked"))return!0;return!1}(t)?Ze("check"):Ze("bullet")),{after:dy,node:n}}const fy={ol:"number",ul:"bullet"};function Ze(t="number",e=1){return Me(new on(t,e))}function Q(t){return t instanceof on}const hy=X("INSERT_CHECK_LIST_COMMAND");function gy(t){return He(t.registerCommand(hy,()=>(il("check"),!0),Ge),t.registerCommand(vs,e=>gu(e,t,!1),Ge),t.registerCommand(Cs,e=>gu(e,t,!0),Ge),t.registerCommand(Ss,()=>{if(ll()!=null){const e=t.getRootElement();return e!=null&&e.focus(),!0}return!1},Ge),t.registerCommand(Vl,e=>{const n=ll();return!(n==null||!t.isEditable())&&(t.update(()=>{const r=Ne(n);ce(r)&&(e.preventDefault(),r.toggleChecked())}),!0)},Ge),t.registerCommand(bs,e=>t.getEditorState().read(()=>{const n=F();if(E(n)&&n.isCollapsed()){const{anchor:r}=n,o=r.type==="element";if(o||r.offset===0){const s=r.getNode(),i=oe(s,l=>$(l)&&!l.isInline());if(ce(i)){const l=i.getParent();if(Q(l)&&l.getListType()==="check"&&(o||i.getFirstDescendant()===s)){const a=t.getElementByKey(i.__key);if(a!=null&&document.activeElement!==a)return a.focus(),e.preventDefault(),!0}}}}return!1}),Ge),t.registerRootListener((e,n)=>{e!==null&&(e.addEventListener("click",fu),e.addEventListener("pointerdown",hu)),n!==null&&(n.removeEventListener("click",fu),n.removeEventListener("pointerdown",hu))}))}function nh(t,e){const n=t.target;if(!ge(n))return;const r=n.firstChild;if(ge(r)&&(r.tagName==="UL"||r.tagName==="OL"))return;const o=n.parentNode;if(!o||o.__lexicalListType!=="check")return;const s=n.getBoundingClientRect(),i=Xt(n),l=t.clientX/i,a=window.getComputedStyle?window.getComputedStyle(n,"::before"):{width:"0px"},c=parseFloat(a.width),u=t.pointerType==="touch"?32:0;(n.dir==="rtl"?l<s.right+u&&l>s.right-c-u:l>s.left-u&&l<s.left+c+u)&&e()}function fu(t){nh(t,()=>{if(ge(t.target)){const e=t.target,n=Rs(e);n!=null&&n.isEditable()&&n.update(()=>{const r=Ne(e);ce(r)&&(e.focus(),r.toggleChecked())})}})}function hu(t){nh(t,()=>{t.preventDefault()})}function ll(){const t=document.activeElement;return ge(t)&&t.tagName==="LI"&&t.parentNode!=null&&t.parentNode.__lexicalListType==="check"?t:null}function gu(t,e,n){const r=ll();return r!=null&&e.update(()=>{const o=Ne(r);if(!ce(o))return;const s=function(i,l){let a=l?i.getPreviousSibling():i.getNextSibling(),c=i;for(;a==null&&ce(c);)c=c.getParentOrThrow().getParent(),c!=null&&(a=l?c.getPreviousSibling():c.getNextSibling());for(;ce(a);){const u=l?a.getLastChild():a.getFirstChild();if(!Q(u))return a;a=l?u.getLastChild():u.getFirstChild()}return null}(o,n);if(s!=null){s.selectStart();const i=e.getElementByKey(s.__key);i!=null&&(t.preventDefault(),setTimeout(()=>{i.focus()},0))}}),!1}const py=X("UPDATE_LIST_START_COMMAND"),my=X("INSERT_UNORDERED_LIST_COMMAND"),_y=X("INSERT_ORDERED_LIST_COMMAND"),yy=X("REMOVE_LIST_COMMAND");function xy(t){return He(t.registerCommand(_y,()=>(il("number"),!0),Ge),t.registerCommand(py,e=>{const{listNodeKey:n,newStart:r}=e,o=we(n);return!!Q(o)&&(o.getListType()==="number"&&(o.setStart(r),th(o)),!0)},Ge),t.registerCommand(my,()=>(il("bullet"),!0),Ge),t.registerCommand(yy,()=>(sy(),!0),Ge),t.registerCommand(kn,()=>ay(),Ge),t.registerNodeTransform(Ht,e=>{const n=e.getFirstChild();if(n){if(R(n)){const r=n.getStyle(),o=n.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==o&&e.setTextFormat(o)}}else{const r=F();E(r)&&(r.style!==e.getTextStyle()||r.format!==e.getTextFormat())&&r.isCollapsed()&&e.is(r.anchor.getNode())&&e.setTextStyle(r.style).setTextFormat(r.format)}}),t.registerNodeTransform(at,e=>{const n=e.getParent();if(ce(n)&&e.is(n.getFirstChild())){const r=e.getStyle(),o=e.getFormat();r===n.getTextStyle()&&o===n.getTextFormat()||n.setTextStyle(r).setTextFormat(o)}}))}function by(t){const e=n=>{const r=n.getParent();if(Q(n.getFirstChild())||!Q(r))return;const o=oe(n,s=>ce(s)&&Q(s.getParent())&&ce(s.getPreviousSibling()));if(o===null&&n.getIndent()>0)n.setIndent(0);else if(ce(o)){const s=o.getPreviousSibling();if(ce(s)){const i=function(a){let c=a,u=c.getFirstChild();for(;Q(u);){const d=u.getLastChild();if(!ce(d))break;c=d,u=c.getFirstChild()}return c}(s),l=i.getParent();if(Q(l)){const a=ol(l);a+1<ol(r)&&n.setIndent(a)}}}};return t.registerNodeTransform(on,n=>{const r=[n];for(;r.length>0;){const o=r.shift();if(Q(o)){for(const s of o.getChildren())if(ce(s)){e(s);const i=s.getFirstChild();Q(i)&&r.push(i)}}}})}let Cy=class extends Ie{$config(){return this.config("overflow",{$transform(e){e.isEmpty()&&e.remove()},extends:Ie})}createDOM(e){const n=document.createElement("span"),r=e.theme.characterLimit;return typeof r=="string"&&(n.className=r),n}updateDOM(e,n){return!1}insertNewAfter(e,n=!0){return this.getParentOrThrow().insertNewAfter(e,n)}excludeFromCopy(){return!0}};function pu(t,e){return t.getEditorState().read(()=>{const n=we(e);return n!==null&&n.isSelected()})}function vy(t){const[e]=ie(),[n,r]=b.useState(()=>pu(e,t));return b.useEffect(()=>{let o=!0;const s=e.registerUpdateListener(()=>{o&&r(pu(e,t))});return()=>{o=!1,s()}},[e,t]),[n,b.useCallback(o=>{e.update(()=>{let s=F();Re(s)||(s=Ql(),ke(s)),Re(s)&&(o?s.add(t):s.delete(t))})},[e,t]),b.useCallback(()=>{e.update(()=>{const o=F();Re(o)&&o.clear()})},[e])]}const Sy=X("INSERT_HORIZONTAL_RULE_COMMAND");function wy({nodeKey:t}){const[e]=ie(),[n,r,o]=vy(t);return b.useEffect(()=>He(e.registerCommand(_s,s=>{const i=e.getElementByKey(t);return s.target===i&&(s.shiftKey||o(),r(!n),!0)},Ge)),[o,e,n,t,r]),b.useEffect(()=>{const s=e.getElementByKey(t),i=e._config.theme.hrSelected??"selected";s!==null&&(n?Te(s,i):mt(s,i))},[e,n,t]),null}let Ws=class rh extends ro{static getType(){return"horizontalrule"}static clone(e){return new rh(e.__key)}static importJSON(e){return fo().updateFromJSON(e)}static importDOM(){return{hr:()=>({conversion:Ty,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(e){const n=document.createElement("hr");return Te(n,e.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return p.jsx(wy,{nodeKey:this.__key})}};function Ty(){return{node:fo()}}function fo(){return Me(new Ws)}function ky(t){return t instanceof Ws}function ka(t,e){const n=e.body?e.body.childNodes:[];let r=[];const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(!sh.has(i.nodeName)){const l=ih(i,t,o,!1);l!==null&&(r=r.concat(l))}}return function(s){for(const i of s)i.getNextSibling()instanceof ra&&i.insertAfter(xt());for(const i of s){const l=i.getChildren();for(const a of l)i.insertBefore(a);i.remove()}}(o),r}function Us(t,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=fe().getChildren();for(let o=0;o<r.length;o++)oh(t,r[o],n,e);return n.innerHTML}function oh(t,e,n,r=null){let o=r===null||e.isSelected(r);const s=$(e)&&e.excludeFromCopy("html");let i=e;if(r!==null){let h=ga(e);h=R(h)&&r!==null?If(r,h):h,i=h}const l=$(i)?i.getChildren():[],a=sa(t,i.getType());let c;c=a&&a.exportDOM!==void 0?a.exportDOM(t,i):i.exportDOM(t);const{element:u,after:d}=c;if(!u)return!1;const f=document.createDocumentFragment();for(let h=0;h<l.length;h++){const g=l[h],m=oh(t,g,f,r);!o&&$(e)&&m&&e.extractWithChild(g,r,"html")&&(o=!0)}if(o&&!s){if((ge(u)||Qi(u))&&u.append(f),n.append(u),d){const h=d.call(i,u);h&&(Qi(u)?u.replaceChildren(h):u.replaceWith(h))}}else n.append(f);return o}const sh=new Set(["STYLE","SCRIPT"]);function ih(t,e,n,r,o=new Map,s){let i=[];if(sh.has(t.nodeName))return i;let l=null;const a=function(g,m){const{nodeName:_}=g,y=m._htmlConversions.get(_.toLowerCase());let x=null;if(y!==void 0)for(const C of y){const k=C(g);k!==null&&(x===null||(x.priority||0)<=(k.priority||0))&&(x=k)}return x!==null?x.conversion:null}(t,e),c=a?a(t):null;let u=null;if(c!==null){u=c.after;const g=c.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,m]of o)if(l=m(l,s),!l)break;l&&i.push(...Array.isArray(g)?g:[l])}c.forChild!=null&&o.set(t.nodeName,c.forChild)}const d=t.childNodes;let f=[];const h=(l==null||!ze(l))&&(l!=null&&Go(l)||r);for(let g=0;g<d.length;g++)f.push(...ih(d[g],e,n,h,new Map(o),l));return u!=null&&(f=u(f)),es(t)&&(f=Ny(t,f,h?()=>{const g=new ra;return n.push(g),g}:ee)),l==null?f.length>0?i=i.concat(f):es(t)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:el(g.nextSibling)&&el(g.previousSibling)}(t)&&(i=i.concat(xt())):$(l)&&l.append(...f),i}function Ny(t,e,n){const r=t.style.textAlign,o=[];let s=[];for(let i=0;i<e.length;i++){const l=e[i];if(Go(l))r&&!l.getFormat()&&l.setFormat(r),o.push(l);else if(s.push(l),i===e.length-1||i<e.length-1&&Go(e[i+1])){const a=n();a.setFormat(r),a.append(...s),o.push(a),s=[]}}return o}function ss(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ey(t,e=F()){return e==null&&ss(166),E(e)&&e.isCollapsed()||e.getNodes().length===0?"":Us(t,e)}function $y(t,e=F()){return e==null&&ss(166),E(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(Ay(t,e))}function mu(t,e,n){const r=t.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes))return _u(n,Oy(l.nodes),e)}catch{}const o=t.getData("text/html"),s=t.getData("text/plain");if(o&&s!==o)try{const l=new DOMParser().parseFromString(function(a){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(a):a}(o),"text/html");return _u(n,ka(n,l),e)}catch{}const i=s||t.getData("text/uri-list");if(i!=null)if(E(e)){const l=i.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let a=0;a<l.length;a++){const c=F();if(E(c)){const u=l[a];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([fr()]):c.insertText(u)}}}else e.insertRawText(i)}function _u(t,e,n){t.dispatchCommand(Ul,{nodes:e,selection:n})||(n.insertNodes(e),function(r){if(E(r)&&r.isCollapsed()){const o=r.anchor;let s=null;const i=bt(o,"previous");if(i)if(Ft(i))s=i.origin;else{const l=tn(i,et(fe(),"next").getFlipped());for(const a of l){if(R(a.origin)){s=a.origin;break}if($(a.origin)&&!a.origin.isInline())break}}if(s&&R(s)){const l=s.getFormat(),a=s.getStyle();r.format===l&&r.style===a||(r.format=l,r.style=a,r.dirty=!0)}}}(n))}function lh(t,e,n,r=[]){let o=e===null||n.isSelected(e);const s=$(n)&&n.excludeFromCopy("html");let i=n;if(e!==null){let c=ga(n);c=R(c)&&e!==null?If(e,c):c,i=c}const l=$(i)?i.getChildren():[],a=function(c){const u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&ss(58,d.name),$(c)){const f=u.children;Array.isArray(f)||ss(59,d.name)}return u}(i);if(R(i)){const c=i.__text;c.length>0?a.text=c:o=!1}for(let c=0;c<l.length;c++){const u=l[c],d=lh(t,e,u,a.children);!o&&$(n)&&d&&n.extractWithChild(u,e,"clone")&&(o=!0)}if(o&&!s)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const u=a.children[c];r.push(u)}return o}function Ay(t,e){const n=[],r=fe().getChildren();for(let o=0;o<r.length;o++)lh(t,e,r[o],n);return{namespace:t._config.namespace,nodes:n}}function Oy(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],o=Km(r);R(o)&&A_(o),e.push(o)}return e}let Dn=null;async function al(t,e,n){if(Dn!==null)return!1;if(e!==null)return new Promise((c,u)=>{t.update(()=>{c(yu(t,e,n))})});const r=t.getRootElement(),o=t._window||window,s=window.document,i=Qe(o);if(r===null||i===null)return!1;const l=s.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(s.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),i.removeAllRanges(),i.addRange(a),new Promise((c,u)=>{const d=t.registerCommand(Ns,f=>(Gt(f,ClipboardEvent)&&(d(),Dn!==null&&(window.clearTimeout(Dn),Dn=null),c(yu(t,f,n))),!0),Fe);Dn=window.setTimeout(()=>{d(),Dn=null,c(!1)},50),s.execCommand("copy"),l.remove()})}function yu(t,e,n){if(n===void 0){const o=Qe(t._window);if(!o)return!1;const s=o.anchorNode,i=o.focusNode;if(s!==null&&i!==null&&!so(t,s,i))return!1;const l=F();if(l===null)return!1;n=ah(l)}e.preventDefault();const r=e.clipboardData;return r!==null&&(My(r,n),!0)}const Fy=[["text/html",Ey],["application/x-lexical-editor",$y]];function ah(t=F()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=lo();for(const[r,o]of Fy){const s=o(n,t);s!==null&&(e[r]=s)}}return e}function My(t,e){for(const n in e){const r=e[n];r!==void 0&&t.setData(n,r)}}function xu(t,e){if(document.caretRangeFromPoint!==void 0){const n=document.caretRangeFromPoint(t,e);return n===null?null:{node:n.startContainer,offset:n.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const n=document.caretPositionFromPoint(t,e);return n===null?null:{node:n.offsetNode,offset:n.offset}}return null}const mr=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ry=mr&&"documentMode"in document?document.documentMode:null,Ly=!(!mr||!("InputEvent"in window)||Ry)&&"getTargetRanges"in new window.InputEvent("input"),Iy=mr&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),bu=mr&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,jy=mr&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Dy=mr&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!jy,Cu=X("DRAG_DROP_PASTE_FILE");let Hs=class ch extends Ie{static getType(){return"quote"}static clone(e){return new ch(e.__key)}createDOM(e){const n=document.createElement("blockquote");return Te(n,e.theme.quote),n}updateDOM(e,n){return!1}static importDOM(){return{blockquote:e=>({conversion:Py,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(ge(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const o=this.getDirection();o&&(n.dir=o)}return{element:n}}static importJSON(e){return Js().updateFromJSON(e)}insertNewAfter(e,n){const r=ee(),o=this.getDirection();return r.setDirection(o),this.insertAfter(r,n),r}collapseAtStart(){const e=ee();return this.getChildren().forEach(n=>e.append(n)),this.replace(e),!0}canMergeWhenEmpty(){return!0}};function Js(){return Me(new Hs)}function is(t){return t instanceof Hs}let Vs=class uh extends Ie{static getType(){return"heading"}static clone(e){return new uh(e.__tag,e.__key)}constructor(e,n){super(n),this.__tag=e}getTag(){return this.__tag}setTag(e){const n=this.getWritable();return this.__tag=e,n}createDOM(e){const n=this.__tag,r=document.createElement(n),o=e.theme.heading;if(o!==void 0){const s=o[n];Te(r,s)}return r}updateDOM(e,n,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:Pn,priority:0}),h2:e=>({conversion:Pn,priority:0}),h3:e=>({conversion:Pn,priority:0}),h4:e=>({conversion:Pn,priority:0}),h5:e=>({conversion:Pn,priority:0}),h6:e=>({conversion:Pn,priority:0}),p:e=>{const n=e.firstChild;return n!==null&&vu(n)?{conversion:()=>({node:null}),priority:3}:null},span:e=>vu(e)?{conversion:n=>({node:mn("h1")}),priority:3}:null}}exportDOM(e){const{element:n}=super.exportDOM(e);if(ge(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const o=this.getDirection();o&&(n.dir=o)}return{element:n}}static importJSON(e){return mn(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,n=!0){const r=e?e.anchor.offset:0,o=this.getLastDescendant(),s=!o||e&&e.anchor.key===o.getKey()&&r===o.getTextContentSize()||!e?ee():mn(this.getTag()),i=this.getDirection();if(s.setDirection(i),this.insertAfter(s,n),r===0&&!this.isEmpty()&&e){const l=ee();l.select(),this.replace(l,!0)}return s}collapseAtStart(){const e=this.isEmpty()?ee():mn(this.getTag());return this.getChildren().forEach(n=>e.append(n)),this.replace(e),!0}extractWithChild(){return!0}};function vu(t){return t.nodeName.toLowerCase()==="span"&&t.style.fontSize==="26pt"}function Pn(t){const e=t.nodeName.toLowerCase();let n=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(n=mn(e),t.style!==null&&(pa(t,n),n.setFormat(t.style.textAlign))),{node:n}}function Py(t){const e=Js();return t.style!==null&&(e.setFormat(t.style.textAlign),pa(t,e)),{node:e}}function mn(t="h1"){return Me(new Vs(t))}function Na(t){return t instanceof Vs}function Vn(t){let e=null;if(Gt(t,DragEvent)?e=t.dataTransfer:Gt(t,ClipboardEvent)&&(e=t.clipboardData),e===null)return[!1,[],!1];const n=e.types,r=n.includes("Files"),o=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),o]}function Su(t){const e=F();if(!E(e))return!1;const n=new Set,r=e.getNodes();for(let o=0;o<r.length;o++){const s=r[o],i=s.getKey();if(n.has(i))continue;const l=oe(s,c=>$(c)&&!c.isInline());if(l===null)continue;const a=l.getKey();l.canIndent()&&!n.has(a)&&(n.add(a),t(l))}return n.size>0}function wu(t){const e=Ne(t);return de(e)}function Si(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}function zy(t){return He(t.registerCommand(_s,e=>{const n=F();return!!Re(n)&&(n.clear(),!0)},se),t.registerCommand(Yt,e=>{const n=F();return E(n)?(n.deleteCharacter(e),!0):!!Re(n)&&(n.deleteNodes(),!0)},se),t.registerCommand(ir,e=>{const n=F();return!!E(n)&&(n.deleteWord(e),!0)},se),t.registerCommand(Nn,e=>{const n=F();return!!E(n)&&(n.deleteLine(e),!0)},se),t.registerCommand(yn,e=>{const n=F();if(typeof e=="string")n!==null&&n.insertText(e);else{if(n===null)return!1;const r=e.dataTransfer;if(r!=null)mu(r,n,t);else if(E(n)){const o=e.data;return o&&n.insertText(o),!0}}return!0},se),t.registerCommand(Bi,()=>{const e=F();return!!E(e)&&(e.removeText(),!0)},se),t.registerCommand(Ke,e=>{const n=F();return!!E(n)&&(n.formatText(e),!0)},se),t.registerCommand(Yl,e=>{const n=F();if(!E(n)&&!Re(n))return!1;const r=n.getNodes();for(const o of r){const s=oe(o,i=>$(i)&&!i.isInline());s!==null&&s.setFormat(e)}return!0},se),t.registerCommand(qn,e=>{const n=F();return!!E(n)&&(n.insertLineBreak(e),!0)},se),t.registerCommand(kn,()=>{const e=F();return!!E(e)&&(e.insertParagraph(),!0)},se),t.registerCommand(Vd,()=>(no([fr()]),!0),se),t.registerCommand(Ho,()=>Su(e=>{const n=e.getIndent();e.setIndent(n+1)}),se),t.registerCommand(Jo,()=>Su(e=>{const n=e.getIndent();n>0&&e.setIndent(Math.max(0,n-1))}),se),t.registerCommand(Cs,e=>{const n=F();if(Re(n)){const r=n.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(E(n)){const r=Yi(n.focus,!0);if(!e.shiftKey&&de(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1},se),t.registerCommand(vs,e=>{const n=F();if(Re(n)){const r=n.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(E(n)){if(function(o){const s=o.focus;return s.key==="root"&&s.offset===fe().getChildrenSize()}(n))return e.preventDefault(),!0;const r=Yi(n.focus,!1);if(!e.shiftKey&&de(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1},se),t.registerCommand(bs,e=>{const n=F();if(Re(n)){const r=n.getNodes();if(r.length>0)return e.preventDefault(),r[0].selectPrevious(),!0}if(!E(n))return!1;if(Uc(n,!0)){const r=e.shiftKey;return e.preventDefault(),Hc(n,r,!0),!0}return!1},se),t.registerCommand(Jl,e=>{const n=F();if(Re(n)){const o=n.getNodes();if(o.length>0)return e.preventDefault(),o[0].selectNext(0,0),!0}if(!E(n))return!1;const r=e.shiftKey;return!!Uc(n,!1)&&(e.preventDefault(),Hc(n,r,!1),!0)},se),t.registerCommand(Gl,e=>{if(wu(e.target))return!1;const n=F();if(E(n)){if(function(r){if(!r.isCollapsed())return!1;const{anchor:o}=r;if(o.offset!==0)return!1;const s=o.getNode();if(Pe(s))return!1;const i=ns(s);return i.getIndent()>0&&(i.is(s)||s.is(i.getFirstDescendant()))}(n))return e.preventDefault(),t.dispatchCommand(Jo,void 0);if(bu&&navigator.language==="ko-KR")return!1}else if(!Re(n))return!1;return e.preventDefault(),t.dispatchCommand(Yt,!0)},se),t.registerCommand(ql,e=>{if(wu(e.target))return!1;const n=F();return!(!E(n)&&!Re(n))&&(e.preventDefault(),t.dispatchCommand(Yt,!1))},se),t.registerCommand(Uo,e=>{const n=F();if(!E(n))return!1;if(Si(n),e!==null){if((bu||Iy||Dy)&&Ly)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(qn,!1)}return t.dispatchCommand(kn,void 0)},se),t.registerCommand(Ss,()=>{const e=F();return!!E(e)&&(t.blur(),!0)},se),t.registerCommand(Ts,e=>{const[,n]=Vn(e);if(n.length>0){const o=xu(e.clientX,e.clientY);if(o!==null){const{offset:s,node:i}=o,l=Ne(i);if(l!==null){const a=hr();if(R(l))a.anchor.set(l.getKey(),s,"text"),a.focus.set(l.getKey(),s,"text");else{const u=l.getParentOrThrow().getKey(),d=l.getIndexWithinParent()+1;a.anchor.set(u,d,"element"),a.focus.set(u,d,"element")}const c=sr(a);ke(c)}t.dispatchCommand(Cu,n)}return e.preventDefault(),!0}const r=F();return!!E(r)},se),t.registerCommand(Xl,e=>{const[n]=Vn(e),r=F();return!(n&&!E(r))},se),t.registerCommand(ks,e=>{const[n]=Vn(e),r=F();if(n&&!E(r))return!1;const o=xu(e.clientX,e.clientY);if(o!==null){const s=Ne(o.node);de(s)&&e.preventDefault()}return!0},se),t.registerCommand(Ki,()=>(Qm(),!0),se),t.registerCommand(Ns,e=>(al(t,Gt(e,ClipboardEvent)?e:null),!0),se),t.registerCommand(Es,e=>(async function(n,r){await al(r,Gt(n,ClipboardEvent)?n:null),r.update(()=>{const o=F();E(o)?o.removeText():Re(o)&&o.getNodes().forEach(s=>s.remove())})}(e,t),!0),se),t.registerCommand(Hl,e=>{const[,n,r]=Vn(e);return n.length>0&&!r?(t.dispatchCommand(Cu,n),!0):ct(e.target)&&ia(e.target)?!1:F()!==null&&(function(o,s){o.preventDefault(),s.update(()=>{const i=F(),l=Gt(o,InputEvent)||Gt(o,KeyboardEvent)?null:o.clipboardData;l!=null&&i!==null&&mu(l,i,s)},{tag:Um})}(e,t),!0)},se),t.registerCommand(Vl,e=>{const n=F();return E(n)&&Si(n),!1},se),t.registerCommand(ws,e=>{const n=F();return E(n)&&Si(n),!1},se))}const Ea=/^(\d+(?:\.\d+)?)px$/,ve={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};let sn=class dh extends Ie{static getType(){return"tablecell"}static clone(e){return new dh(e.__headerState,e.__colSpan,e.__width,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__rowSpan=e.__rowSpan,this.__backgroundColor=e.__backgroundColor,this.__verticalAlign=e.__verticalAlign}static importDOM(){return{td:e=>({conversion:Tu,priority:0}),th:e=>({conversion:Tu,priority:0})}}static importJSON(e){return _t().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeaderStyles(e.headerState).setColSpan(e.colSpan||1).setRowSpan(e.rowSpan||1).setWidth(e.width||void 0).setBackgroundColor(e.backgroundColor||null).setVerticalAlign(e.verticalAlign||void 0)}constructor(e=ve.NO_STATUS,n=1,r,o){super(o),this.__colSpan=n,this.__rowSpan=1,this.__headerState=e,this.__width=r,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(e){const n=document.createElement(this.getTag());return this.__width&&(n.style.width=`${this.__width}px`),this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(n.style.backgroundColor=this.__backgroundColor),cl(this.__verticalAlign)&&(n.style.verticalAlign=this.__verticalAlign),Te(n,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),n}exportDOM(e){const n=super.exportDOM(e);if(ge(n.element)){const r=n.element;r.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),r.style.border="1px solid black",this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),r.style.width=`${this.getWidth()||75}px`,r.style.verticalAlign=this.getVerticalAlign()||"top",r.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(r.style.backgroundColor="#f2f3f5")}return n}exportJSON(){return{...super.exportJSON(),...cl(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(e){const n=this.getWritable();return n.__colSpan=e,n}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(e){const n=this.getWritable();return n.__rowSpan=e,n}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e,n=ve.BOTH){const r=this.getWritable();return r.__headerState=e&n|r.__headerState&~n,r}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){const n=this.getWritable();return n.__width=e,n}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){const n=this.getWritable();return n.__backgroundColor=e,n}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(e){const n=this.getWritable();return n.__verticalAlign=e||void 0,n}toggleHeaderStyle(e){const n=this.getWritable();return(n.__headerState&e)===e?n.__headerState-=e:n.__headerState+=e,n}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==ve.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor||e.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}};function cl(t){return t==="middle"||t==="bottom"}function Tu(t){const e=t,n=t.nodeName.toLowerCase();let r;Ea.test(e.style.width)&&(r=parseFloat(e.style.width));const o=_t(n==="th"?ve.ROW:ve.NO_STATUS,e.colSpan,r);o.__rowSpan=e.rowSpan;const s=e.style.backgroundColor;s!==""&&(o.__backgroundColor=s);const i=e.style.verticalAlign;cl(i)&&(o.__verticalAlign=i);const l=e.style,a=(l&&l.textDecoration||"").split(" "),c=l.fontWeight==="700"||l.fontWeight==="bold",u=a.includes("line-through"),d=l.fontStyle==="italic",f=a.includes("underline");return{after:h=>{const g=[];let m=null;const _=()=>{if(m){const y=m.getFirstChild();Ot(y)&&m.getChildrenSize()===1&&y.remove()}};for(const y of h)n_(y)||R(y)||Ot(y)?(R(y)&&(c&&y.toggleFormat("bold"),u&&y.toggleFormat("strikethrough"),d&&y.toggleFormat("italic"),f&&y.toggleFormat("underline")),m?m.append(y):(m=ee().append(y),g.push(m))):(g.push(y),_(),m=null);return _(),g.length===0&&g.push(ee()),g},node:o}}function _t(t=ve.NO_STATUS,e=1,n){return Me(new sn(t,e,n))}function V(t){return t instanceof sn}const fh=X("INSERT_TABLE_COMMAND");function q(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class _r extends Ie{static getType(){return"tablerow"}static clone(e){return new _r(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:By,priority:0})}}static importJSON(e){return Ur().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHeight(e.height)}constructor(e,n){super(n),this.__height=e}exportJSON(){const e=this.getHeight();return{...super.exportJSON(),...e===void 0?void 0:{height:e}}}createDOM(e){const n=document.createElement("tr");return this.__height&&(n.style.height=`${this.__height}px`),Te(n,e.theme.tableRow),n}extractWithChild(e,n,r){return r==="html"}isShadowRoot(){return!0}setHeight(e){const n=this.getWritable();return n.__height=e,n}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function By(t){const e=t;let n;return Ea.test(e.style.height)&&(n=parseFloat(e.style.height)),{after:r=>Wf(r,V),node:Ur(n)}}function Ur(t){return Me(new _r(t))}function Ce(t){return t instanceof _r}const $a=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ky=$a&&"documentMode"in document?document.documentMode:null,ku=$a&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);function Wy(t,e,n=!0){const r=Ra();for(let o=0;o<t;o++){const s=Ur();for(let i=0;i<e;i++){let l=ve.NO_STATUS;typeof n=="object"?(o===0&&n.rows&&(l|=ve.ROW),i===0&&n.columns&&(l|=ve.COLUMN)):n&&(o===0&&(l|=ve.ROW),i===0&&(l|=ve.COLUMN));const a=_t(l),c=ee();c.append(ue()),a.append(c),s.append(a)}r.append(s)}return r}function Uy(t){const e=oe(t,n=>V(n));return V(e)?e:null}function hh(t){const e=oe(t,n=>Ce(n));if(Ce(e))return e;throw new Error("Expected table cell to be inside of table row.")}function At(t){const e=oe(t,n=>Se(n));if(Se(e))return e;throw new Error("Expected table cell to be inside of table.")}function Aa(t){const e=hh(t);return At(e).getChildren().findIndex(n=>n.is(e))}function gh(t){return hh(t).getChildren().findIndex(e=>e.is(t))}$a&&"InputEvent"in window&&!Ky&&new window.InputEvent("input");const ul=(t,e)=>t===ve.BOTH||t===e?e:ve.NO_STATUS;function Hy(t=!0){const e=F();E(e)||ae(e)||q(188);const n=e.anchor.getNode(),r=e.focus.getNode(),[o]=Oe(n),[s,,i]=Oe(r),[,l,a]=Ve(i,s,o),{startRow:c}=a,{startRow:u}=l;return t?dl(c+o.__rowSpan>u+s.__rowSpan?o:s,!0):dl(u<c?s:o,!1)}const ph=Hy;function dl(t,e=!0){const[,,n]=Oe(t),[r,o]=Ve(n,t,t),s=r[0].length,{startRow:i}=o;let l=null;if(e){const a=i+t.__rowSpan-1,c=r[a],u=Ur();for(let f=0;f<s;f++){const{cell:h,startRow:g}=c[f];if(g+h.__rowSpan-1<=a){const m=c[f].cell.__headerState,_=ul(m,ve.COLUMN);u.append(_t(_).append(ee()))}else h.setRowSpan(h.__rowSpan+1)}const d=n.getChildAtIndex(a);Ce(d)||q(256),d.insertAfter(u),l=u}else{const a=i,c=r[a],u=Ur();for(let f=0;f<s;f++){const{cell:h,startRow:g}=c[f];if(g===a){const m=c[f].cell.__headerState,_=ul(m,ve.COLUMN);u.append(_t(_).append(ee()))}else h.setRowSpan(h.__rowSpan+1)}const d=n.getChildAtIndex(a);Ce(d)||q(257),d.insertBefore(u),l=u}return l}function Jy(t=!0){const e=F();E(e)||ae(e)||q(188);const n=e.anchor.getNode(),r=e.focus.getNode(),[o]=Oe(n),[s,,i]=Oe(r),[,l,a]=Ve(i,s,o),{startColumn:c}=a,{startColumn:u}=l;return t?fl(c+o.__colSpan>u+s.__colSpan?o:s,!0):fl(u<c?s:o,!1)}const mh=Jy;function fl(t,e=!0,n=!0){const[,,r]=Oe(t),[o,s]=Ve(r,t,t),i=o.length,{startColumn:l}=s,a=e?l+t.__colSpan-1:l-1,c=r.getFirstChild();Ce(c)||q(120);let u=null;function d(g=ve.NO_STATUS){const m=_t(g).append(ee());return u===null&&(u=m),m}let f=c;e:for(let g=0;g<i;g++){if(g!==0){const w=f.getNextSibling();Ce(w)||q(121),f=w}const m=o[g],_=m[a<0?0:a].cell.__headerState,y=ul(_,ve.ROW);if(a<0){Oa(f,d(y));continue}const{cell:x,startColumn:C,startRow:k}=m[a];if(C+x.__colSpan-1<=a){let w=x,v=k,N=a;for(;v!==g&&w.__rowSpan>1;){if(N-=x.__colSpan,!(N>=0)){f.append(d(y));continue e}{const{cell:S,startRow:T}=m[N];w=S,v=T}}w.insertAfter(d(y))}else x.setColSpan(x.__colSpan+1)}u!==null&&n&&Hr(u);const h=r.getColWidths();if(h){const g=[...h],m=a<0?0:a,_=g[m];g.splice(m,0,_),r.setColWidths(g)}return u}function Vy(){const t=F();E(t)||ae(t)||q(188);const[e,n]=t.isBackward()?[t.focus.getNode(),t.anchor.getNode()]:[t.anchor.getNode(),t.focus.getNode()],[r,,o]=Oe(e),[s]=Oe(n),[i,l,a]=Ve(o,r,s),{startRow:c}=l,{startRow:u}=a,d=u+s.__rowSpan-1;if(i.length===d-c+1)return void o.remove();const f=i[0].length,h=i[d+1],g=o.getChildAtIndex(d+1);for(let m=d;m>=c;m--){for(let y=f-1;y>=0;y--){const{cell:x,startRow:C,startColumn:k}=i[m][y];if(k===y){if(C<c||C+x.__rowSpan-1>d){const w=Math.max(C,c),v=Math.min(x.__rowSpan+C-1,d),N=w<=v?v-w+1:0;x.setRowSpan(x.__rowSpan-N)}if(C>=c&&C+x.__rowSpan-1>d&&m===d){g===null&&q(122);let w=null;for(let v=0;v<y;v++){const N=h[v],S=N.cell;N.startRow===m+1&&(w=S),S.__colSpan>1&&(v+=S.__colSpan-1)}w===null?Oa(g,x):w.insertAfter(x)}}}const _=o.getChildAtIndex(m);Ce(_)||q(206,String(m)),_.remove()}if(h!==void 0){const{cell:m}=h[0];Hr(m)}else{const m=i[c-1],{cell:_}=m[0];Hr(_)}}const Gy=Vy;function qy(){const t=F();E(t)||ae(t)||q(188);const e=t.anchor.getNode(),n=t.focus.getNode(),[r,,o]=Oe(e),[s]=Oe(n),[i,l,a]=Ve(o,r,s),{startColumn:c}=l,{startRow:u,startColumn:d}=a,f=Math.min(c,d),h=Math.max(c+r.__colSpan-1,d+s.__colSpan-1),g=h-f+1;if(i[0].length===h-f+1)return o.selectPrevious(),void o.remove();const m=i.length;for(let C=0;C<m;C++)for(let k=f;k<=h;k++){const{cell:w,startColumn:v}=i[C][k];if(v<f){if(k===f){const N=f-v;w.setColSpan(w.__colSpan-Math.min(g,w.__colSpan-N))}}else if(v+w.__colSpan-1>h){if(k===h){const N=h-v+1;w.setColSpan(w.__colSpan-N)}}else w.remove()}const _=i[u],y=c>d?_[c+r.__colSpan]:_[d+s.__colSpan];if(y!==void 0){const{cell:C}=y;Hr(C)}else{const C=d<c?_[d-1]:_[c-1],{cell:k}=C;Hr(k)}const x=o.getColWidths();if(x){const C=[...x];C.splice(f,g),o.setColWidths(C)}}const Yy=qy;function Hr(t){const e=t.getFirstDescendant();e==null?t.selectStart():e.getParentOrThrow().selectStart()}function Oa(t,e){const n=t.getFirstChild();n!==null?n.insertBefore(e):t.append(e)}function Xy(t){if(t.length===0)return null;const e=At(t[0]),[n]=Bt(e,null,null);let r=1/0,o=-1/0,s=1/0,i=-1/0;const l=new Set;for(const h of n)for(const g of h){if(!g||!g.cell)continue;const m=g.cell.getKey();if(!l.has(m)&&t.some(_=>_.is(g.cell))){l.add(m);const _=g.startRow,y=g.startColumn,x=g.cell.__rowSpan||1,C=g.cell.__colSpan||1;r=Math.min(r,_),o=Math.max(o,_+x-1),s=Math.min(s,y),i=Math.max(i,y+C-1)}}if(r===1/0||s===1/0)return null;const a=o-r+1,c=i-s+1,u=n[r][s];if(!u.cell)return null;const d=u.cell;d.setColSpan(c),d.setRowSpan(a);const f=new Set([d.getKey()]);for(let h=r;h<=o;h++)for(let g=s;g<=i;g++){const m=n[h][g];if(!m.cell)continue;const _=m.cell,y=_.getKey();f.has(y)||(f.add(y),Zy(_)||d.append(..._.getChildren()),_.remove())}return d.getChildrenSize()===0&&d.append(ee()),d}function Zy(t){if(t.getChildrenSize()!==1)return!1;const e=t.getFirstChildOrThrow();return!(!dt(e)||!e.isEmpty())}function Qy(){const t=F();E(t)||ae(t)||q(188);const e=t.anchor.getNode(),n=oe(e,V);return V(n)||q(148),_h(n)}function _h(t){const[e,n,r]=Oe(t),o=e.__colSpan,s=e.__rowSpan;if(o===1&&s===1)return;const[i,l]=Ve(r,e,e),{startColumn:a,startRow:c}=l,u=e.__headerState&ve.COLUMN,d=Array.from({length:o},(g,m)=>{let _=u;for(let y=0;_!==0&&y<i.length;y++)_&=i[y][m+a].cell.__headerState;return _}),f=e.__headerState&ve.ROW,h=Array.from({length:s},(g,m)=>{let _=f;for(let y=0;_!==0&&y<i[0].length;y++)_&=i[m+c][y].cell.__headerState;return _});if(o>1){for(let g=1;g<o;g++)e.insertAfter(_t(d[g]|h[0]).append(ee()));e.setColSpan(1)}if(s>1){let g;for(let m=1;m<s;m++){const _=c+m,y=i[_];g=(g||n).getNextSibling(),Ce(g)||q(125);let x=null;for(let C=0;C<a;C++){const k=y[C],w=k.cell;k.startRow===_&&(x=w),w.__colSpan>1&&(C+=w.__colSpan-1)}if(x===null)for(let C=o-1;C>=0;C--)Oa(g,_t(d[C]|h[m]).append(ee()));else for(let C=o-1;C>=0;C--)x.insertAfter(_t(d[C]|h[m]).append(ee()))}e.setRowSpan(1)}}function Ve(t,e,n){const[r,o,s]=Bt(t,e,n);return o===null&&q(207),s===null&&q(208),[r,o,s]}function Bt(t,e,n){const r=[];let o=null,s=null;function i(a){let c=r[a];return c===void 0&&(r[a]=c=[]),c}const l=t.getChildren();for(let a=0;a<l.length;a++){const c=l[a];Ce(c)||q(209);const u=i(a);for(let d=c.getFirstChild(),f=0;d!=null;d=d.getNextSibling()){for(V(d)||q(147);u[f]!==void 0;)f++;const h={cell:d,startColumn:f,startRow:a},{__rowSpan:g,__colSpan:m}=d;for(let _=0;_<g&&!(a+_>=l.length);_++){const y=i(a+_);for(let x=0;x<m;x++)y[f+x]=h}e!==null&&o===null&&e.is(d)&&(o=h),n!==null&&s===null&&n.is(d)&&(s=h)}}return[r,o,s]}function Oe(t){let e;if(t instanceof sn)e=t;else if("__type"in t){const o=oe(t,V);V(o)||q(148),e=o}else{const o=oe(t.getNode(),V);V(o)||q(148),e=o}const n=e.getParent();Ce(n)||q(149);const r=n.getParent();return Se(r)||q(210),[e,n,r]}function ls(t,e,n){let r,o=Math.min(e.startColumn,n.startColumn),s=Math.min(e.startRow,n.startRow),i=Math.max(e.startColumn+e.cell.__colSpan-1,n.startColumn+n.cell.__colSpan-1),l=Math.max(e.startRow+e.cell.__rowSpan-1,n.startRow+n.cell.__rowSpan-1);do{r=!1;for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){const u=t[a][c];if(!u)continue;const d=u.startColumn+u.cell.__colSpan-1,f=u.startRow+u.cell.__rowSpan-1,h=u.startColumn<=i&&d>=o,g=u.startRow<=l&&f>=s;if(h&&g){const m=Math.min(o,u.startColumn),_=Math.max(i,d),y=Math.min(s,u.startRow),x=Math.max(l,f);m===o&&_===i&&y===s&&x===l||(o=m,i=_,s=y,l=x,r=!0)}}}while(r);return{maxColumn:i,maxRow:l,minColumn:o,minRow:s}}function Nu(t){const[e,,n]=Oe(t),r=n.getChildren(),o=r.length,s=r[0].getChildren().length,i=new Array(o);for(let l=0;l<o;l++)i[l]=new Array(s);for(let l=0;l<o;l++){const a=r[l].getChildren();let c=0;for(let u=0;u<a.length;u++){for(;i[l][c];)c++;const d=a[u],f=d.__rowSpan||1,h=d.__colSpan||1;for(let g=0;g<f;g++)for(let m=0;m<h;m++)i[l+g][c+m]=d;if(e===d)return{colSpan:h,columnIndex:c,rowIndex:l,rowSpan:f};c+=h}}return null}function Eu(t){const[[e,n,r,o],[s,i,l,a]]=["anchor","focus"].map(c=>{const u=t[c].getNode(),d=oe(u,V);V(d)||q(238,c,u.getKey(),u.getType());const f=d.getParent();Ce(f)||q(239,c);const h=f.getParent();return Se(h)||q(240,c),[u,d,f,h]});return o.is(a)||q(241),{anchorCell:n,anchorNode:e,anchorRow:r,anchorTable:o,focusCell:i,focusNode:s,focusRow:l,focusTable:a}}let yh=class xh{constructor(e,n,r){this.anchor=n,this.focus=r,n._selection=this,r._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){return this.tableKey!=="root"&&this.anchor.key!=="root"&&this.anchor.type==="element"&&this.focus.key!=="root"&&this.focus.type==="element"}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return ae(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,n,r){this.dirty=this.dirty||e!==this.tableKey||n!==this.anchor.key||r!==this.focus.key,this.tableKey=e,this.anchor.key=n,this.focus.key=r,this._cachedNodes=null}clone(){return new xh(this.tableKey,ot(this.anchor.key,this.anchor.offset,this.anchor.type),ot(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}hasFormat(e){let n=0;this.getNodes().filter(V).forEach(o=>{const s=o.getFirstChild();dt(s)&&(n|=s.getTextFormat())});const r=Zt[e];return!!(n&r)}insertNodes(e){const n=this.focus.getNode();$(n)||q(151),sr(n.select(0,n.getChildrenSize())).insertNodes(e)}getShape(){const{anchorCell:e,focusCell:n}=Eu(this),r=Nu(e);r===null&&q(153);const o=Nu(n);o===null&&q(155);const s=Math.min(r.columnIndex,o.columnIndex),i=Math.max(r.columnIndex+r.colSpan-1,o.columnIndex+o.colSpan-1),l=Math.min(r.rowIndex,o.rowIndex),a=Math.max(r.rowIndex+r.rowSpan-1,o.rowIndex+o.rowSpan-1);return{fromX:Math.min(s,i),fromY:Math.min(l,a),toX:Math.max(s,i),toY:Math.max(l,a)}}getNodes(){if(!this.isValid())return[];const e=this._cachedNodes;if(e!==null)return e;const{anchorTable:n,anchorCell:r,focusCell:o}=Eu(this),s=o.getParents()[1];if(s!==n){if(n.isParentOf(o)){const _=s.getParent();_==null&&q(159),this.set(this.tableKey,o.getKey(),_.getKey())}else{const _=n.getParent();_==null&&q(158),this.set(this.tableKey,_.getKey(),o.getKey())}return this.getNodes()}const[i,l,a]=Ve(n,r,o),{minColumn:c,maxColumn:u,minRow:d,maxRow:f}=ls(i,l,a),h=new Map([[n.getKey(),n]]);let g=null;for(let _=d;_<=f;_++)for(let y=c;y<=u;y++){const{cell:x}=i[_][y],C=x.getParent();Ce(C)||q(160),C!==g&&(h.set(C.getKey(),C),g=C),h.has(x.getKey())||tx(x,k=>{h.set(k.getKey(),k)})}const m=Array.from(h.values());return gr()||(this._cachedNodes=m),m}getTextContent(){const e=this.getNodes().filter(r=>V(r));let n="";for(let r=0;r<e.length;r++){const o=e[r],s=o.__parent,i=(e[r+1]||{}).__parent;n+=o.getTextContent()+(i!==s?`
`:"	")}return n}};function ae(t){return t instanceof yh}function bh(){const t=ot("root",0,"element"),e=ot("root",0,"element");return new yh("root",t,e)}function ex(t,e,n){t.getKey(),e.getKey(),n.getKey();const r=F(),o=ae(r)?r.clone():bh();return o.set(t.getKey(),e.getKey(),n.getKey()),o}function tx(t,e){const n=[[t]];for(let r=n.at(-1);r!==void 0&&n.length>0;r=n.at(-1)){const o=r.pop();o===void 0?n.pop():e(o)!==!1&&$(o)&&n.push(o.getChildren())}}function Ch(t,e=lo()){const n=we(t);Se(n)||q(231,t);const r=Mn(n,e.getElementByKey(t));return r===null&&q(232,t),{tableElement:r,tableNode:n}}let nx=class{constructor(e,n){this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.listenersToRemove=new Set,this.tableNodeKey=n,this.editor=e,this.table={columns:0,domRows:[],rows:0},this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.isSelecting=!1,this.pointerType=null,this.shouldCheckSelection=!1,this.abortController=new AbortController,this.listenerOptions={signal:this.abortController.signal},this.nextFocus=null,this.trackTable()}getTable(){return this.table}removeListeners(){this.abortController.abort("removeListeners"),Array.from(this.listenersToRemove).forEach(e=>e()),this.listenersToRemove.clear()}$lookup(){return Ch(this.tableNodeKey,this.editor)}trackTable(){const e=new MutationObserver(n=>{this.editor.getEditorState().read(()=>{let r=!1;for(let i=0;i<n.length;i++){const l=n[i].target.nodeName;if(l==="TABLE"||l==="TBODY"||l==="THEAD"||l==="TR"){r=!0;break}}if(!r)return;const{tableNode:o,tableElement:s}=this.$lookup();this.table=er(o,s)},{editor:this.editor})});this.editor.getEditorState().read(()=>{const{tableNode:n,tableElement:r}=this.$lookup();this.table=er(n,r),e.observe(r,{attributes:!0,childList:!0,subtree:!0})},{editor:this.editor})}$clearHighlight(){const e=this.editor;this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.$enableHighlightStyle();const{tableNode:n,tableElement:r}=this.$lookup();So(e,er(n,r),null),F()!==null&&(ke(null),e.dispatchCommand(tt,void 0))}$enableHighlightStyle(){const e=this.editor,{tableElement:n}=this.$lookup();mt(n,e._config.theme.tableSelection),n.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1}$disableHighlightStyle(){const{tableElement:e}=this.$lookup();Te(e,this.editor._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0}$updateTableTableSelection(e){if(e!==null){e.tableKey!==this.tableNodeKey&&q(233,e.tableKey,this.tableNodeKey);const n=this.editor;this.tableSelection=e,this.isHighlightingCells=!0,this.$disableHighlightStyle(),this.updateDOMSelection(),So(n,this.table,this.tableSelection)}else this.$clearHighlight()}setShouldCheckSelection(){this.shouldCheckSelection=!0}getAndClearShouldCheckSelection(){return!!this.shouldCheckSelection&&(this.shouldCheckSelection=!1,!0)}setNextFocus(e){this.nextFocus=e}getAndClearNextFocus(){const{nextFocus:e}=this;return e!==null&&(this.nextFocus=null),e}updateDOMSelection(){if(this.anchorCell!==null&&this.focusCell!==null){const e=Qe(this.editor._window);e&&e.rangeCount>0&&e.removeAllRanges()}}$setFocusCellForSelection(e,n=!1){const r=this.editor,{tableNode:o}=this.$lookup(),s=e.x,i=e.y;if(this.focusCell=e,this.isHighlightingCells||this.anchorX===s&&this.anchorY===i&&!n){if(s===this.focusX&&i===this.focusY)return!1}else this.isHighlightingCells=!0,this.$disableHighlightStyle();if(this.focusX=s,this.focusY=i,this.isHighlightingCells){const l=pl(o,e.elem);if(this.tableSelection!=null&&this.anchorCellNodeKey!=null&&l!==null)return this.focusCellNodeKey=l.getKey(),this.tableSelection=ex(o,this.$getAnchorTableCellOrThrow(),l),ke(this.tableSelection),r.dispatchCommand(tt,void 0),So(r,this.table,this.tableSelection),!0}return!1}$getAnchorTableCell(){return this.anchorCellNodeKey?we(this.anchorCellNodeKey):null}$getAnchorTableCellOrThrow(){const e=this.$getAnchorTableCell();return e===null&&q(234),e}$getFocusTableCell(){return this.focusCellNodeKey?we(this.focusCellNodeKey):null}$getFocusTableCellOrThrow(){const e=this.$getFocusTableCell();return e===null&&q(235),e}$setAnchorCellForSelection(e){this.isHighlightingCells=!1,this.anchorCell=e,this.anchorX=e.x,this.anchorY=e.y;const{tableNode:n}=this.$lookup(),r=pl(n,e.elem);if(r!==null){const o=r.getKey();this.tableSelection=this.tableSelection!=null?this.tableSelection.clone():bh(),this.anchorCellNodeKey=o}}$formatCells(e){const n=F();ae(n)||q(236);const r=hr(),o=r.anchor,s=r.focus,i=n.getNodes().filter(V);i.length>0||q(237);const l=i[0].getFirstChild(),a=dt(l)?l.getFormatFlags(e,null):null;i.forEach(c=>{o.set(c.getKey(),0,"element"),s.set(c.getKey(),c.getChildrenSize(),"element"),r.formatText(e,a)}),ke(n),this.editor.dispatchCommand(tt,void 0)}$clearText(){const{editor:e}=this,n=we(this.tableNodeKey);if(!Se(n))throw new Error("Expected TableNode.");const r=F();ae(r)||q(253);const o=r.getNodes().filter(V),s=n.getFirstChild(),i=n.getLastChild();if(o.length>0&&s!==null&&i!==null&&Ce(s)&&Ce(i)&&o[0]===s.getFirstChild()&&o[o.length-1]===i.getLastChild()){n.selectPrevious();const l=n.getParent();return n.remove(),void(Pe(l)&&l.isEmpty()&&e.dispatchCommand(kn,void 0))}o.forEach(l=>{if($(l)){const a=ee(),c=ue();a.append(c),l.append(a),l.getChildren().forEach(u=>{u!==a&&u.remove()})}}),So(e,this.table,null),ke(null),e.dispatchCommand(tt,void 0)}};const hl="__lexicalTableSelection",rx=t=>!(1&~t.buttons);function Wn(t){return ge(t)&&t.nodeName==="TABLE"}function Mn(t,e){if(!e)return e;const n=Wn(e)?e:t.getDOMSlot(e).element;return n.nodeName!=="TABLE"&&q(245,e.nodeName),n}function Fa(t){return t._window}function Mr(t,e){for(let n=e,r=null;n!==null;n=n.getParent()){if(t.is(n))return r;V(n)&&(r=n)}return null}const ox=[[vs,"down"],[Cs,"up"],[bs,"backward"],[Jl,"forward"]],sx=[ir,Nn,Yt],ix=[Gl,ql];function lx(t,e,n,r){const o=n.getRootElement(),s=Fa(n);o!==null&&s!==null||q(246);const i=new nx(n,t.getKey()),l=Mn(t,e);(function(h,g){gl(h)!==null&&q(205),h[hl]=g})(l,i),i.listenersToRemove.add(()=>function(h,g){gl(h)===g&&delete h[hl]}(l,i));const a=h=>{if(i.pointerType=h.pointerType,h.button!==0||!ct(h.target)||!s)return;const g=Jr(h.target);g!==null&&n.update(()=>{const m=Mt();if(ku&&h.shiftKey&&St(m,t)&&(E(m)||ae(m))){const _=m.anchor.getNode(),y=Mr(t,m.anchor.getNode());y?(i.$setAnchorCellForSelection(gn(i,y)),i.$setFocusCellForSelection(g),zt(h)):(t.isBefore(_)?t.selectStart():t.selectEnd()).anchor.set(m.anchor.key,m.anchor.offset,m.anchor.type)}else h.pointerType!=="touch"&&i.$setAnchorCellForSelection(g)}),(()=>{if(i.isSelecting)return;const m=()=>{i.isSelecting=!1,s.removeEventListener("pointerup",m),s.removeEventListener("pointermove",_)},_=y=>{if(!rx(y)&&i.isSelecting)return i.isSelecting=!1,s.removeEventListener("pointerup",m),void s.removeEventListener("pointermove",_);if(!ct(y.target))return;let x=null;const C=!(ku||l.contains(y.target));if(C)x=$u(l,y.target);else for(const k of document.elementsFromPoint(y.clientX,y.clientY))if(x=$u(l,k),x)break;!x||i.focusCell!==null&&x.elem===i.focusCell.elem||(i.setNextFocus({focusCell:x,override:C}),n.dispatchCommand(tt,void 0))};i.isSelecting=!0,s.addEventListener("pointerup",m,i.listenerOptions),s.addEventListener("pointermove",_,i.listenerOptions)})()};l.addEventListener("pointerdown",a,i.listenerOptions),i.listenersToRemove.add(()=>{l.removeEventListener("pointerdown",a)});const c=h=>{h.detail>=3&&ct(h.target)&&Jr(h.target)!==null&&h.preventDefault()};l.addEventListener("mousedown",c,i.listenerOptions),i.listenersToRemove.add(()=>{l.removeEventListener("mousedown",c)});const u=h=>{const g=h.target;h.button===0&&ct(g)&&n.update(()=>{const m=F();ae(m)&&m.tableKey===i.tableNodeKey&&o.contains(g)&&i.$clearHighlight()})};s.addEventListener("pointerdown",u,i.listenerOptions),i.listenersToRemove.add(()=>{s.removeEventListener("pointerdown",u)});for(const[h,g]of ox)i.listenersToRemove.add(n.registerCommand(h,m=>wh(n,m,g,t,i),Zn));i.listenersToRemove.add(n.registerCommand(Ss,h=>{const g=F();if(ae(g)){const m=Mr(t,g.focus.getNode());if(m!==null)return zt(h),m.selectEnd(),!0}return!1},Zn));const d=h=>()=>{const g=F();if(!St(g,t))return!1;if(ae(g))return i.$clearText(),!0;if(E(g)){if(!V(Mr(t,g.anchor.getNode())))return!1;const m=g.anchor.getNode(),_=g.focus.getNode(),y=t.isParentOf(m),x=t.isParentOf(_);if(y&&!x||x&&!y)return i.$clearText(),!0;const C=oe(g.anchor.getNode(),w=>$(w)),k=C&&oe(C,w=>$(w)&&V(w.getParent()));if(!$(k)||!$(C))return!1;if(h===Nn&&k.getPreviousSibling()===null)return!0}return!1};for(const h of sx)i.listenersToRemove.add(n.registerCommand(h,d(h),Fe));const f=h=>{const g=F();if(!ae(g)&&!E(g))return!1;const m=t.isParentOf(g.anchor.getNode());if(m!==t.isParentOf(g.focus.getNode())){const _=m?"anchor":"focus",y=m?"focus":"anchor",{key:x,offset:C,type:k}=g[y];return t[g[_].isBefore(g[y])?"selectPrevious":"selectNext"]()[y].set(x,C,k),!1}return!!St(g,t)&&!!ae(g)&&(h&&(h.preventDefault(),h.stopPropagation()),i.$clearText(),!0)};for(const h of ix)i.listenersToRemove.add(n.registerCommand(h,f,Fe));return i.listenersToRemove.add(n.registerCommand(Es,h=>{const g=F();if(g){if(!ae(g)&&!E(g))return!1;al(n,Gt(h,ClipboardEvent)?h:null,ah(g));const m=f(h);return E(g)?(g.removeText(),!0):m}return!1},Fe)),i.listenersToRemove.add(n.registerCommand(Ke,h=>{const g=F();if(!St(g,t))return!1;if(ae(g))return i.$formatCells(h),!0;if(E(g)){const m=oe(g.anchor.getNode(),_=>V(_));if(!V(m))return!1}return!1},Fe)),i.listenersToRemove.add(n.registerCommand(Yl,h=>{const g=F();if(!ae(g)||!St(g,t))return!1;const m=g.anchor.getNode(),_=g.focus.getNode();if(!V(m)||!V(_))return!1;if(function(T,A){if(ae(T)){const M=T.anchor.getNode(),L=T.focus.getNode();if(A&&M&&L){const[I]=Ve(A,M,L);return M.getKey()===I[0][0].cell.getKey()&&L.getKey()===I[I.length-1].at(-1).cell.getKey()}}return!1}(g,t))return t.setFormat(h),!0;const[y,x,C]=Ve(t,m,_),k=Math.max(x.startRow+x.cell.__rowSpan-1,C.startRow+C.cell.__rowSpan-1),w=Math.max(x.startColumn+x.cell.__colSpan-1,C.startColumn+C.cell.__colSpan-1),v=Math.min(x.startRow,C.startRow),N=Math.min(x.startColumn,C.startColumn),S=new Set;for(let T=v;T<=k;T++)for(let A=N;A<=w;A++){const M=y[T][A].cell;if(S.has(M))continue;S.add(M),M.setFormat(h);const L=M.getChildren();for(let I=0;I<L.length;I++){const j=L[I];$(j)&&!j.isInline()&&j.setFormat(h)}}return!0},Fe)),i.listenersToRemove.add(n.registerCommand(yn,h=>{const g=F();if(!St(g,t))return!1;if(ae(g))return i.$clearHighlight(),!1;if(E(g)){const m=oe(g.anchor.getNode(),_=>V(_));if(!V(m))return!1;if(typeof h=="string"){const _=Fu(n,g,t);if(_)return Ou(_,t,[ue(h)]),!0}}return!1},Fe)),r&&i.listenersToRemove.add(n.registerCommand(ws,h=>{const g=F();if(!E(g)||!g.isCollapsed()||!St(g,t))return!1;const m=vr(g.anchor.getNode());return!(m===null||!t.is(tr(m)))&&(zt(h),function(_,y){const x=y==="next"?"getNextSibling":"getPreviousSibling",C=y==="next"?"getFirstChild":"getLastChild",k=_[x]();if($(k))return k.selectEnd();const w=oe(_,Ce);w===null&&q(247);for(let N=w[x]();Ce(N);N=N[x]()){const S=N[C]();if($(S))return S.selectEnd()}const v=oe(w,Se);v===null&&q(248),y==="next"?v.selectNext():v.selectPrevious()}(m,h.shiftKey?"previous":"next"),!0)},Fe)),i.listenersToRemove.add(n.registerCommand(Gd,h=>t.isSelected(),Zn)),i.listenersToRemove.add(n.registerCommand(Ul,(h,g)=>{if(n!==g)return!1;const{nodes:m,selection:_}=h,y=_.getStartEndPoints(),x=ae(_),C=E(_)&&oe(_.anchor.getNode(),Z=>V(Z))!==null&&oe(_.focus.getNode(),Z=>V(Z))!==null||x;if(m.length!==1||!Se(m[0])||!C||y===null)return!1;const[k,w]=y,[v,N,S]=Oe(k),T=oe(w.getNode(),Z=>V(Z));if(!(V(v)&&V(T)&&Ce(N)&&Se(S)))return!1;const A=m[0],[M,L,I]=Ve(S,v,T),[j]=Bt(A,null,null),B=M.length,W=B>0?M[0].length:0;let P=L.startRow,H=L.startColumn,Y=j.length,ne=Y>0?j[0].length:0;if(x){const Z=ls(M,L,I),le=Z.maxRow-Z.minRow+1,Ee=Z.maxColumn-Z.minColumn+1;P=Z.minRow,H=Z.minColumn,Y=Math.min(Y,le),ne=Math.min(ne,Ee)}let U=!1;const O=Math.min(B,P+Y)-1,K=Math.min(W,H+ne)-1,G=new Set;for(let Z=P;Z<=O;Z++)for(let le=H;le<=K;le++){const Ee=M[Z][le];G.has(Ee.cell.getKey())||Ee.cell.__rowSpan===1&&Ee.cell.__colSpan===1||(_h(Ee.cell),G.add(Ee.cell.getKey()),U=!0)}let[z]=Bt(S.getWritable(),null,null);const te=Y-B+P;for(let Z=0;Z<te;Z++)dl(z[B-1][0].cell);const he=ne-W+H;for(let Z=0;Z<he;Z++)fl(z[0][W-1].cell,!0,!1);[z]=Bt(S.getWritable(),null,null);for(let Z=P;Z<P+Y;Z++)for(let le=H;le<H+ne;le++){const Ee=Z-P,Va=le-H,ti=j[Ee][Va];if(ti.startRow!==Ee||ti.startColumn!==Va)continue;const xr=ti.cell;if(xr.__rowSpan!==1||xr.__colSpan!==1){const Rt=[],pg=Math.min(Z+xr.__rowSpan,P+Y)-1,mg=Math.min(le+xr.__colSpan,H+ne)-1;for(let ri=Z;ri<=pg;ri++)for(let oi=le;oi<=mg;oi++){const _g=z[ri][oi];Rt.push(_g.cell)}Xy(Rt),U=!0}const{cell:ni}=z[Z][le],gg=ni.getChildren();xr.getChildren().forEach(Rt=>{R(Rt)&&ee().append(Rt),ni.append(Rt)}),gg.forEach(Rt=>Rt.remove())}if(x&&U){const[Z]=Bt(S.getWritable(),null,null);Z[L.startRow][L.startColumn].cell.selectEnd()}return!0},Fe)),i.listenersToRemove.add(n.registerCommand(tt,()=>{const h=F(),g=Mt(),m=i.getAndClearNextFocus();if(m!==null){const{focusCell:_}=m;if(ae(h)&&h.tableKey===i.tableNodeKey)return(_.x!==i.focusX||_.y!==i.focusY)&&(i.$setFocusCellForSelection(_),!0);if(_!==i.anchorCell&&St(h,t))return i.$setFocusCellForSelection(_),!0}if(i.getAndClearShouldCheckSelection()&&E(g)&&E(h)&&h.isCollapsed()){const _=h.anchor.getNode(),y=t.getFirstChild(),x=vr(_);if(x!==null&&Ce(y)){const C=y.getFirstChild();if(V(C)&&t.is(oe(x,k=>k.is(t)||k.is(C))))return C.selectStart(),!0}}if(E(h)){const{anchor:_,focus:y}=h,x=_.getNode(),C=y.getNode(),k=vr(x),w=vr(C),v=!(!k||!t.is(tr(k))),N=!(!w||!t.is(tr(w))),S=v!==N,T=v&&N,A=h.isBackward();if(S){const M=h.clone();if(N){const[L]=Ve(t,w,w),I=L[0][0].cell,j=L[L.length-1].at(-1).cell;M.focus.set(A?I.getKey():j.getKey(),A?I.getChildrenSize():j.getChildrenSize(),"element")}else if(v){const[L]=Ve(t,k,k),I=L[0][0].cell,j=L[L.length-1].at(-1).cell;M.anchor.set(A?j.getKey():I.getKey(),A?j.getChildrenSize():0,"element")}ke(M),Au(n,i)}else if(T&&(k.is(w)||(i.$setAnchorCellForSelection(gn(i,k)),i.$setFocusCellForSelection(gn(i,w),!0)),i.pointerType==="touch"&&i.isSelecting&&h.isCollapsed()&&E(g)&&g.isCollapsed())){const M=vr(g.anchor.getNode());M&&!M.is(w)&&(i.$setAnchorCellForSelection(gn(i,M)),i.$setFocusCellForSelection(gn(i,w),!0),i.pointerType=null)}}else if(h&&ae(h)&&h.is(g)&&h.tableKey===t.getKey()){const _=Qe(s);if(_&&_.anchorNode&&_.focusNode){const y=Ne(_.focusNode),x=y&&!t.isParentOf(y),C=Ne(_.anchorNode),k=C&&t.isParentOf(C);if(x&&k&&_.rangeCount>0){const w=Dm(_,n);w&&(w.anchor.set(t.getKey(),h.isBackward()?t.getChildrenSize():0,"element"),_.removeAllRanges(),ke(w))}}}return h&&!h.is(g)&&(ae(h)||ae(g))&&i.tableSelection&&!i.tableSelection.is(g)?(ae(h)&&h.tableKey===i.tableNodeKey?i.$updateTableTableSelection(h):!ae(h)&&ae(g)&&g.tableKey===i.tableNodeKey&&i.$updateTableTableSelection(null),!1):(i.hasHijackedSelectionStyles&&!t.isSelected()?function(_,y){y.$enableHighlightStyle(),Ma(y.table,x=>{const C=x.elem;x.highlighted=!1,Sh(_,x),C.getAttribute("style")||C.removeAttribute("style")})}(n,i):!i.hasHijackedSelectionStyles&&t.isSelected()&&Au(n,i),!1)},Fe)),i.listenersToRemove.add(n.registerCommand(kn,()=>{const h=F();if(!E(h)||!h.isCollapsed()||!St(h,t))return!1;const g=Fu(n,h,t);return!!g&&(Ou(g,t),!0)},Fe)),i}function gl(t){return t[hl]||null}function Jr(t){let e=t;for(;e!=null;){const n=e.nodeName;if(n==="TD"||n==="TH"){const r=e._cell;return r===void 0?null:r}e=e.parentNode}return null}function $u(t,e){if(!t.contains(e))return null;let n=null;for(let r=e;r!=null;r=r.parentNode){if(r===t)return n;const o=r.nodeName;o!=="TD"&&o!=="TH"||(n=r._cell||null)}return null}function er(t,e){const n=[],r={columns:0,domRows:n,rows:0};let o=Mn(t,e).querySelector("tr"),s=0,i=0;for(n.length=0;o!=null;){const l=o.nodeName;if(l==="TD"||l==="TH"){const u={elem:o,hasBackgroundColor:o.style.backgroundColor!=="",highlighted:!1,x:s,y:i};o._cell=u;let d=n[i];d===void 0&&(d=n[i]=[]),d[s]=u}else{const u=o.firstChild;if(u!=null){o=u;continue}}const a=o.nextSibling;if(a!=null){s++,o=a;continue}const c=o.parentNode;if(c!=null){const u=c.nextSibling;if(u==null)break;i++,s=0,o=u}}return r.columns=s+1,r.rows=i+1,r}function So(t,e,n){const r=new Set(n?n.getNodes():[]);Ma(e,(o,s)=>{const i=o.elem;r.has(s)?(o.highlighted=!0,vh(t,o)):(o.highlighted=!1,Sh(t,o),i.getAttribute("style")||i.removeAttribute("style"))})}function Ma(t,e){const{domRows:n}=t;for(let r=0;r<n.length;r++){const o=n[r];if(o)for(let s=0;s<o.length;s++){const i=o[s];if(!i)continue;const l=Ne(i.elem);l!==null&&e(i,l,{x:s,y:r})}}}function Au(t,e){e.$disableHighlightStyle(),Ma(e.table,n=>{n.highlighted=!0,vh(t,n)})}const ax=(t,e,n,r,o)=>{const s=o==="forward";switch(o){case"backward":case"forward":return n!==(s?t.table.columns-1:0)?To(e.getCellNodeFromCordsOrThrow(n+(s?1:-1),r,t.table),s):r!==(s?t.table.rows-1:0)?To(e.getCellNodeFromCordsOrThrow(s?0:t.table.columns-1,r+(s?1:-1),t.table),s):s?e.selectNext():e.selectPrevious(),!0;case"up":return r!==0?To(e.getCellNodeFromCordsOrThrow(n,r-1,t.table),!1):e.selectPrevious(),!0;case"down":return r!==t.table.rows-1?To(e.getCellNodeFromCordsOrThrow(n,r+1,t.table),!0):e.selectNext(),!0;default:return!1}};function wi(t,e){let n,r;if(e.startColumn===t.minColumn)n="minColumn";else{if(e.startColumn+e.cell.__colSpan-1!==t.maxColumn)return null;n="maxColumn"}if(e.startRow===t.minRow)r="minRow";else{if(e.startRow+e.cell.__rowSpan-1!==t.maxRow)return null;r="maxRow"}return[n,r]}function wo([t,e]){return[t==="minColumn"?"maxColumn":"minColumn",e==="minRow"?"maxRow":"minRow"]}function zn(t,e,[n,r]){const o=e[r],s=t[o];s===void 0&&q(250,r,String(o));const i=e[n],l=s[i];return l===void 0&&q(250,n,String(i)),l}function cx(t,e,n,r,o){const s=ls(e,n,r),i=function(v,N){const{minColumn:S,maxColumn:T,minRow:A,maxRow:M}=N;let L=1,I=1,j=1,B=1;const W=v[A],P=v[M];for(let H=S;H<=T;H++)L=Math.max(L,W[H].cell.__rowSpan),B=Math.max(B,P[H].cell.__rowSpan);for(let H=A;H<=M;H++)I=Math.max(I,v[H][S].cell.__colSpan),j=Math.max(j,v[H][T].cell.__colSpan);return{bottomSpan:B,leftSpan:I,rightSpan:j,topSpan:L}}(e,s),{topSpan:l,leftSpan:a,bottomSpan:c,rightSpan:u}=i,d=function(v,N){const S=wi(v,N);return S===null&&q(249,N.cell.getKey()),S}(s,n),[f,h]=wo(d);let g=s[f],m=s[h];o==="forward"?g+=f==="maxColumn"?1:a:o==="backward"?g-=f==="minColumn"?1:u:o==="down"?m+=h==="maxRow"?1:l:o==="up"&&(m-=h==="minRow"?1:c);const _=e[m];if(_===void 0)return!1;const y=_[g];if(y===void 0)return!1;const[x,C]=function(v,N,S){const T=ls(v,N,S),A=wi(T,N);if(A)return[zn(v,T,A),zn(v,T,wo(A))];const M=wi(T,S);if(M)return[zn(v,T,wo(M)),zn(v,T,M)];const L=["minColumn","minRow"];return[zn(v,T,L),zn(v,T,wo(L))]}(e,n,y),k=gn(t,x.cell),w=gn(t,C.cell);return t.$setAnchorCellForSelection(k),t.$setFocusCellForSelection(w,!0),!0}function St(t,e){if(E(t)||ae(t)){const n=e.isParentOf(t.anchor.getNode()),r=e.isParentOf(t.focus.getNode());return n&&r}return!1}function To(t,e){e?t.selectStart():t.selectEnd()}function vh(t,e){const n=e.elem,r=t._config.theme;V(Ne(n))||q(131),Te(n,r.tableCellSelected)}function Sh(t,e){const n=e.elem;V(Ne(n))||q(131);const r=t._config.theme;mt(n,r.tableCellSelected)}function vr(t){const e=oe(t,V);return V(e)?e:null}function tr(t){const e=oe(t,Se);return Se(e)?e:null}function ux(t,e,n,r,o,s,i){const l=bt(n.focus,o?"previous":"next");if(Ca(l))return!1;let a=l;for(const _ of Kr(l).iterNodeCarets("shadowRoot")){if(!en(_)||!$(_.origin))return!1;a=_}const c=a.getParentAtCaret();if(!V(c))return!1;const u=c,d=function(_){for(const y of Kr(_).iterNodeCarets("root")){const{origin:x}=y;if(V(x)){if(rt(y))return et(x,_.direction)}else if(!Ce(x))break}return null}(Ae(u,a.direction)),f=oe(u,Se);if(!f||!f.is(s))return!1;const h=t.getElementByKey(u.getKey()),g=Jr(h);if(!h||!g)return!1;const m=fx(t,f);if(i.table=m,d)if(r==="extend"){const _=Jr(t.getElementByKey(d.origin.getKey()));if(!_)return!1;i.$setAnchorCellForSelection(g),i.$setFocusCellForSelection(_,!0)}else{const _=Ye(d);ht(n.anchor,_),ht(n.focus,_)}else if(r==="extend")i.$setAnchorCellForSelection(g),i.$setFocusCellForSelection(g,!0);else{const _=function(y){const x=ao(y);return rt(x)?Ye(x):y}(Ae(f,l.direction));ht(n.anchor,_),ht(n.focus,_)}return zt(e),!0}function wh(t,e,n,r,o){if((n==="up"||n==="down")&&function(i){const l=i.getRootElement();return l?l.hasAttribute("aria-controls")&&l.getAttribute("aria-controls")==="typeahead-menu":!1}(t))return!1;const s=F();if(!St(s,r)){if(E(s)){if(n==="backward"){if(s.focus.offset>0)return!1;const i=function(a){for(let c=a,u=a;u!==null;c=u,u=u.getParent())if($(u)){if(u!==c&&u.getFirstChild()!==c)return null;if(!u.isInline())return u}return null}(s.focus.getNode());if(!i)return!1;const l=i.getPreviousSibling();return!!Se(l)&&(zt(e),e.shiftKey?s.focus.set(l.getParentOrThrow().getKey(),l.getIndexWithinParent(),"element"):l.selectEnd(),!0)}if(e.shiftKey&&(n==="up"||n==="down")){const i=s.focus.getNode();if(!s.isCollapsed()&&(n==="up"&&!s.isBackward()||n==="down"&&s.isBackward())){let l=oe(i,f=>Se(f));if(V(l)&&(l=oe(l,Se)),l!==r||!l)return!1;const a=n==="down"?l.getNextSibling():l.getPreviousSibling();if(!a)return!1;let c=0;n==="up"&&$(a)&&(c=a.getChildrenSize());let u=a;n==="up"&&$(a)&&(u=a.getLastChild()||a,c=R(u)?u.getTextContentSize():0);const d=s.clone();return d.focus.set(u.getKey(),c,R(u)?"text":"element"),ke(d),zt(e),!0}if(ze(i)){const l=n==="up"?s.getNodes()[s.getNodes().length-1]:s.getNodes()[0];if(l&&Mr(r,l)!==null){const a=r.getFirstDescendant(),c=r.getLastDescendant();if(!a||!c)return!1;const[u]=Oe(a),[d]=Oe(c),f=r.getCordsFromCellNode(u,o.table),h=r.getCordsFromCellNode(d,o.table),g=r.getDOMCellFromCordsOrThrow(f.x,f.y,o.table),m=r.getDOMCellFromCordsOrThrow(h.x,h.y,o.table);return o.$setAnchorCellForSelection(g),o.$setFocusCellForSelection(m,!0),!0}return!1}{let l=oe(i,c=>$(c)&&!c.isInline());if(V(l)&&(l=oe(l,Se)),!l)return!1;const a=n==="down"?l.getNextSibling():l.getPreviousSibling();if(Se(a)&&o.tableNodeKey===a.getKey()){const c=a.getFirstDescendant(),u=a.getLastDescendant();if(!c||!u)return!1;const[d]=Oe(c),[f]=Oe(u),h=s.clone();return h.focus.set((n==="up"?d:f).getKey(),n==="up"?0:f.getChildrenSize(),"element"),zt(e),ke(h),!0}}}}return n==="down"&&as(t)&&o.setShouldCheckSelection(),!1}if(E(s)){if(n==="backward"||n==="forward")return ux(t,e,s,e.shiftKey?"extend":"move",n==="backward",r,o);if(s.isCollapsed()){const{anchor:i,focus:l}=s,a=oe(i.getNode(),V),c=oe(l.getNode(),V);if(!V(a)||!a.is(c))return!1;const u=tr(a);if(u!==r&&u!=null){const y=Mn(u,t.getElementByKey(u.getKey()));if(y!=null)return o.table=er(u,y),wh(t,e,n,u,o)}const d=t.getElementByKey(a.__key),f=t.getElementByKey(i.key);if(f==null||d==null)return!1;let h;if(i.type==="element")h=f.getBoundingClientRect();else{const y=Qe(Fa(t));if(y===null||y.rangeCount===0)return!1;h=y.getRangeAt(0).getBoundingClientRect()}const g=n==="up"?a.getFirstChild():a.getLastChild();if(g==null)return!1;const m=t.getElementByKey(g.__key);if(m==null)return!1;const _=m.getBoundingClientRect();if(n==="up"?_.top>h.top-h.height:h.bottom+h.height>_.bottom){zt(e);const y=r.getCordsFromCellNode(a,o.table);if(!e.shiftKey)return ax(o,r,y.x,y.y,n);{const x=r.getDOMCellFromCordsOrThrow(y.x,y.y,o.table);o.$setAnchorCellForSelection(x),o.$setFocusCellForSelection(x,!0)}return!0}}}else if(ae(s)){const{anchor:i,focus:l}=s,a=oe(i.getNode(),V),c=oe(l.getNode(),V),[u]=s.getNodes();Se(u)||q(251);const d=Mn(u,t.getElementByKey(u.getKey()));if(!V(a)||!V(c)||!Se(u)||d==null)return!1;o.$updateTableTableSelection(s);const f=er(u,d),h=r.getCordsFromCellNode(a,f),g=r.getDOMCellFromCordsOrThrow(h.x,h.y,f);if(o.$setAnchorCellForSelection(g),zt(e),e.shiftKey){const[m,_,y]=Ve(r,a,c);return cx(o,m,_,y,n)}return c.selectEnd(),!0}return!1}function zt(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()}function Ou(t,e,n){const r=ee();t==="first"?e.insertBefore(r):e.insertAfter(r),r.append(...n||[]),r.selectEnd()}function Fu(t,e,n){const r=n.getParent();if(!r)return;const o=Qe(Fa(t));if(!o)return;const s=o.anchorNode,i=t.getElementByKey(r.getKey()),l=Mn(n,t.getElementByKey(n.getKey()));if(!s||!i||!l||!i.contains(s)||l.contains(s))return;const a=oe(e.anchor.getNode(),x=>V(x));if(!a)return;const c=oe(a,x=>Se(x));if(!Se(c)||!c.is(n))return;const[u,d]=Ve(n,a,a),f=u[0][0],h=u[u.length-1][u[0].length-1],{startRow:g,startColumn:m}=d,_=g===f.startRow&&m===f.startColumn,y=g===h.startRow&&m===h.startColumn;return _?"first":y?"last":void 0}function gn(t,e){const{tableNode:n}=t.$lookup(),r=n.getCordsFromCellNode(e,t.table);return n.getDOMCellFromCordsOrThrow(r.x,r.y,t.table)}function pl(t,e,n){return Mr(t,Ne(e,n))}function Mu(t,e,n){if(!e.theme.tableAlignment)return;const r=[],o=[];for(const s of["center","right"]){const i=e.theme.tableAlignment[s];i&&(s===n?o:r).push(i)}mt(t,...r),Te(t,...o)}const ml=new WeakSet;function as(t=lo()){return ml.has(t)}function dx(t,e){e?ml.add(t):ml.delete(t)}class Ct extends Ie{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(e){const n=this.getWritable();return n.__colWidths=e,n}static clone(e){return new Ct(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__colWidths=e.__colWidths,this.__rowStriping=e.__rowStriping,this.__frozenColumnCount=e.__frozenColumnCount,this.__frozenRowCount=e.__frozenRowCount}static importDOM(){return{table:e=>({conversion:hx,priority:1})}}static importJSON(e){return Ra().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setRowStriping(e.rowStriping||!1).setFrozenColumns(e.frozenColumnCount||0).setFrozenRows(e.frozenRowCount||0).setColWidths(e.colWidths)}constructor(e){super(e),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(e,n,r){return r==="html"}getDOMSlot(e){const n=Wn(e)?e:e.querySelector("table");return Wn(n)||q(229),super.getDOMSlot(e).withElement(n).withAfter(n.querySelector("colgroup"))}createDOM(e,n){const r=document.createElement("table");this.__style&&(r.style.cssText=this.__style);const o=document.createElement("colgroup");if(r.appendChild(o),a_(o),Te(r,e.theme.table),this.updateTableElement(null,r,e),as(n)){const s=document.createElement("div"),i=e.theme.tableScrollableWrapper;return i?Te(s,i):s.style.cssText="overflow-x: auto;",s.appendChild(r),this.updateTableWrapper(null,s,r,e),s}return r}updateTableWrapper(e,n,r,o){this.__frozenColumnCount!==(e?e.__frozenColumnCount:0)&&function(s,i,l,a){a>0?(Te(s,l.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(mt(s,l.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))}(n,r,o,this.__frozenColumnCount),this.__frozenRowCount!==(e?e.__frozenRowCount:0)&&function(s,i,l,a){a>0?(Te(s,l.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(mt(s,l.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))}(n,r,o,this.__frozenRowCount)}updateTableElement(e,n,r){this.__style!==(e?e.__style:"")&&(n.style.cssText=this.__style),this.__rowStriping!==(!!e&&e.__rowStriping)&&function(o,s,i){i?(Te(o,s.theme.tableRowStriping),o.setAttribute("data-lexical-row-striping","true")):(mt(o,s.theme.tableRowStriping),o.removeAttribute("data-lexical-row-striping"))}(n,r,this.__rowStriping),function(o,s,i,l){const a=o.querySelector("colgroup");if(!a)return;const c=[];for(let u=0;u<i;u++){const d=document.createElement("col"),f=l&&l[u];f&&(d.style.width=`${f}px`),c.push(d)}a.replaceChildren(...c)}(n,0,this.getColumnCount(),this.getColWidths()),Mu(n,r,this.getFormatType())}updateDOM(e,n,r){const o=this.getDOMSlot(n).element;return n===o===as()||(ge(s=n)&&s.nodeName==="DIV"&&this.updateTableWrapper(e,n,o,r),this.updateTableElement(e,o,r),!1);var s}exportDOM(e){const n=super.exportDOM(e),{element:r}=n;return{after:o=>{if(n.after&&(o=n.after(o)),!Wn(o)&&ge(o)&&(o=o.querySelector("table")),!Wn(o))return null;Mu(o,e._config,this.getFormatType());const[s]=Bt(this,null,null),i=new Map;for(const u of s)for(const d of u){const f=d.cell.getKey();i.has(f)||i.set(f,{colSpan:d.cell.getColSpan(),startColumn:d.startColumn})}const l=new Set;for(const u of o.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const d=u.getAttribute("data-temporary-table-cell-lexical-key");if(d){const f=i.get(d);if(u.removeAttribute("data-temporary-table-cell-lexical-key"),f){i.delete(d);for(let h=0;h<f.colSpan;h++)l.add(h+f.startColumn)}}}const a=o.querySelector(":scope > colgroup");if(a){const u=Array.from(o.querySelectorAll(":scope > colgroup > col")).filter((d,f)=>l.has(f));a.replaceChildren(...u)}const c=o.querySelectorAll(":scope > tr");if(c.length>0){const u=document.createElement("tbody");for(const d of c)u.appendChild(d);o.append(u)}return o},element:!Wn(r)&&ge(r)?r.querySelector("table"):r}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,n){const{rows:r,domRows:o}=n;for(let s=0;s<r;s++){const i=o[s];if(i!=null)for(let l=0;l<i.length;l++){const a=i[l];if(a==null)continue;const{elem:c}=a,u=pl(this,c);if(u!==null&&e.is(u))return{x:l,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,n,r){const{domRows:o}=r,s=o[n];if(s==null)return null;const i=s[e<s.length?e:s.length-1];return i??null}getDOMCellFromCordsOrThrow(e,n,r){const o=this.getDOMCellFromCords(e,n,r);if(!o)throw new Error("Cell not found at cords.");return o}getCellNodeFromCords(e,n,r){const o=this.getDOMCellFromCords(e,n,r);if(o==null)return null;const s=Ne(o.elem);return V(s)?s:null}getCellNodeFromCordsOrThrow(e,n,r){const o=this.getCellNodeFromCords(e,n,r);if(!o)throw new Error("Node at cords not TableCellNode.");return o}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(e){const n=this.getWritable();return n.__rowStriping=e,n}setFrozenColumns(e){const n=this.getWritable();return n.__frozenColumnCount=e,n}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(e){const n=this.getWritable();return n.__frozenRowCount=e,n}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const e=this.getFirstChild();if(!e)return 0;let n=0;return e.getChildren().forEach(r=>{V(r)&&(n+=r.getColSpan())}),n}}function fx(t,e){const n=t.getElementByKey(e.getKey());return n===null&&q(230),er(e,n)}function hx(t){const e=Ra();t.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),t.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),t.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const n=t.querySelector(":scope > colgroup");if(n){let r=[];for(const o of n.querySelectorAll(":scope > col")){let s=o.style.width||"";if(!Ea.test(s)&&(s=o.getAttribute("width")||"",!/^\d+$/.test(s))){r=void 0;break}r.push(parseFloat(s))}r&&e.setColWidths(r)}return{after:r=>Wf(r,Ce),node:e}}function Ra(){return Me(new Ct)}function Se(t){return t instanceof Ct}function gx({rows:t,columns:e,includeHeaders:n}){const r=F()||Mt();if(!r||!E(r)||tr(r.anchor.getNode()))return!1;const o=Wy(Number(t),Number(e),n);zf(o);const s=o.getFirstDescendant();return R(s)&&s.select(),!0}function px(t){Ce(t.getParent())?t.isEmpty()&&t.append(ee()):t.remove()}function mx(t){Se(t.getParent())?Bf(t,V):t.remove()}function _x(t){Bf(t,Ce);const[e]=Bt(t,null,null),n=e.reduce((o,s)=>Math.max(o,s.length),0),r=t.getChildren();for(let o=0;o<e.length;++o){const s=r[o];if(!s)continue;Ce(s)||q(254,s.constructor.name,s.getType());const i=e[o].reduce((l,a)=>a?1+l:l,0);if(i!==n)for(let l=i;l<n;++l){const a=_t();a.append(ee()),s.append(a)}}}function yx(t){if(t.detail<3||!ct(t.target))return!1;const e=Ne(t.target);if(e===null)return!1;const n=oe(e,r=>$(r)&&!r.isInline());return n===null?!1:!!V(n.getParent())&&(n.select(0),!0)}function xx(t){return t.registerNodeTransform(sn,e=>{if(e.getColSpan()>1||e.getRowSpan()>1){const[,,n]=Oe(e),[r]=Ve(n,e,e),o=r.length,s=r[0].length;let i=n.getFirstChild();Ce(i)||q(175);const l=[];for(let a=0;a<o;a++){a!==0&&(i=i.getNextSibling(),Ce(i)||q(175));let c=null;for(let u=0;u<s;u++){const d=r[a][u],f=d.cell;if(d.startRow===a&&d.startColumn===u)c=f,l.push(f);else if(f.getColSpan()>1||f.getRowSpan()>1){V(f)||q(176);const h=_t(f.__headerState);c!==null?c.insertAfter(h):U_(i,h)}}}for(const a of l)a.setColSpan(1),a.setRowSpan(1)}})}function bx(t,e=!0){const n=new Map,r=(s,i,l)=>{const a=Mn(s,l),c=lx(s,a,t,e);n.set(i,[c,a])},o=t.registerMutationListener(Ct,s=>{t.getEditorState().read(()=>{for(const[i,l]of s){const a=n.get(i);if(l==="created"||l==="updated"){const{tableNode:c,tableElement:u}=Ch(i);a===void 0?r(c,i,u):u!==a[1]&&(a[0].removeListeners(),n.delete(i),r(c,i,u))}else l==="destroyed"&&a!==void 0&&(a[0].removeListeners(),n.delete(i))}},{editor:t})},{skipInitialization:!1});return()=>{o();for(const[,[s]]of n)s.removeListeners()}}function Cx(t){return t.hasNodes([Ct])||q(255),He(t.registerCommand(fh,gx,se),t.registerCommand(Ul,({nodes:e,selection:n},r)=>t!==r||!E(n)?!1:tr(n.anchor.getNode())!==null&&e.some(Se),se),t.registerCommand(_s,yx,se),t.registerNodeTransform(Ct,_x),t.registerNodeTransform(_r,mx),t.registerNodeTransform(sn,px))}const vx=b.lazy(()=>bg(()=>import("./image-component-DbQ9BFiv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72])));function Sx(t){return t.parentElement!=null&&t.parentElement.tagName==="LI"&&t.previousSibling===null&&t.getAttribute("aria-roledescription")==="checkbox"}function wx(t){const e=t;if(e.src.startsWith("file:///")||Sx(e))return null;const{alt:n,src:r,width:o,height:s}=e;return{node:Gs({altText:n,height:s,src:r,width:o})}}class yr extends ro{constructor(n,r,o,s,i,l){super(l);Be(this,"__src");Be(this,"__altText");Be(this,"__width");Be(this,"__height");Be(this,"__maxWidth");this.__src=n,this.__altText=r,this.__maxWidth=o,this.__width=s||"inherit",this.__height=i||"inherit"}static getType(){return"image"}static clone(n){return new yr(n.__src,n.__altText,n.__maxWidth,n.__width,n.__height,n.__key)}static importJSON(n){const{altText:r,height:o,width:s,maxWidth:i,src:l}=n;return Gs({altText:r,height:o,maxWidth:i,src:l,width:s})}exportDOM(){const n=document.createElement("img");return n.setAttribute("src",this.__src),n.setAttribute("alt",this.__altText),n.setAttribute("width",this.__width.toString()),n.setAttribute("height",this.__height.toString()),{element:n}}static importDOM(){return{img:n=>({conversion:wx,priority:0})}}exportJSON(){return{altText:this.getAltText(),height:this.__height==="inherit"?0:this.__height,maxWidth:this.__maxWidth,src:this.getSrc(),type:"image",version:1,width:this.__width==="inherit"?0:this.__width}}setWidthAndHeight(n,r){const o=this.getWritable();o.__width=n,o.__height=r}setAltText(n){const r=this.getWritable();r.__altText=n}createDOM(n){const r=document.createElement("span"),s=n.theme.image;return s!==void 0&&(r.className=s),r}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}decorate(){return p.jsx(b.Suspense,{fallback:p.jsx("div",{children:"Loading image..."}),children:p.jsx(vx,{src:this.__src,altText:this.__altText,width:this.__width,height:this.__height,maxWidth:this.__maxWidth,nodeKey:this.getKey(),resizable:!0})})}}function Gs({altText:t,height:e,maxWidth:n=500,src:r,width:o,key:s}){return Me(new yr(r,t,n,o,e,s))}function Tx(t){return t instanceof yr}class nr extends at{constructor(e,n){super(e,n)}static getType(){return"extended-text"}static clone(e){return new nr(e.__text,e.__key)}static importDOM(){const e=at.importDOM();return{...e,code:()=>({conversion:Bn(e==null?void 0:e.code),priority:1}),em:()=>({conversion:Bn(e==null?void 0:e.em),priority:1}),span:()=>({conversion:Bn(e==null?void 0:e.span),priority:1}),strong:()=>({conversion:Bn(e==null?void 0:e.strong),priority:1}),sub:()=>({conversion:Bn(e==null?void 0:e.sub),priority:1}),sup:()=>({conversion:Bn(e==null?void 0:e.sup),priority:1})}}static importJSON(e){return kx().updateFromJSON(e)}isSimpleText(){return this.__type==="extended-text"&&this.__mode===0}}function kx(t=""){return Me(new nr(t))}function Bn(t){return e=>{const n=t==null?void 0:t(e);if(!n)return null;const r=n.conversion(e);if(!r)return r;const o=e.style.backgroundColor,s=e.style.color,i=e.style.fontFamily,l=e.style.fontWeight,a=e.style.fontSize,c=e.style.textDecoration;return{...r,forChild:(u,d)=>{const h=((r==null?void 0:r.forChild)??(g=>g))(u,d);if(R(h)){const g=[o?`background-color: ${o}`:null,s?`color: ${s}`:null,i?`font-family: ${i}`:null,l?`font-weight: ${l}`:null,a?`font-size: ${a}`:null,c?`text-decoration: ${c}`:null].filter(m=>m!=null).join("; ");if(g.length)return h.setStyle(g)}return h}}}}const Nx=[Vs,pr,nr,{replace:at,with:t=>new nr(t.__text),withKlass:nr},Hs,on,Ht,uo,Cy,rs,Ct,sn,_r,Bs,va,Ws,wa,yr];function _l(t,e){const n={};for(const r of t){const o=e(r);o&&(n[o]?n[o].push(r):n[o]=[r])}return n}function La(t){const e=_l(t,n=>n.type);return{element:e.element||[],multilineElement:e["multiline-element"]||[],textFormat:e["text-format"]||[],textMatch:e["text-match"]||[]}}const cs=/[!-/:-@[-`{-~\s]/,Ex=/^\s{0,3}$/;function yl(t){if(!dt(t))return!1;const e=t.getFirstChild();return e==null||t.getChildrenSize()===1&&R(e)&&Ex.test(e.getTextContent())}function $x(t,e,n,r){for(const o of e){if(!o.export)continue;const s=o.export(t,i=>us(i,n,r));if(s!=null)return s}return $(t)?us(t,n,r):de(t)?t.getTextContent():null}function us(t,e,n,r,o){const s=[],i=t.getChildren();r||(r=[]),o||(o=[]);e:for(const l of i){for(const a of n){if(!a.export)continue;const c=a.export(l,u=>us(u,e,n,r,[...o,...r]),(u,d)=>Ru(u,d,e,r,o));if(c!=null){s.push(c);continue e}}Ot(l)?s.push(`
`):R(l)?s.push(Ru(l,l.getTextContent(),e,r,o)):$(l)?s.push(us(l,e,n,r,o)):de(l)&&s.push(l.getTextContent())}return s.join("")}function Ru(t,e,n,r,o){let s=t.getFormat()===0?e:function(f){return f.replace(/^\s+|\s+$/g,h=>[...h].map(g=>"&#"+g.codePointAt(0)+";").join(""))}(e);t.hasFormat("code")||(s=s.replace(/([*_`~\\])/g,"\\$1"));let i="",l="",a="";const c=Lu(t,!0),u=Lu(t,!1),d=new Set;for(const f of n){const h=f.format[0],g=f.tag;ko(t,h)&&!d.has(h)&&(d.add(h),ko(c,h)&&r.find(m=>m.tag===g)||(r.push({format:h,tag:g}),i+=g))}for(let f=0;f<r.length;f++){const h=ko(t,r[f].format),g=ko(u,r[f].format);if(h&&g)continue;const m=[...r];for(;m.length>f;){const _=m.pop();o&&_&&o.find(y=>y.tag===_.tag)||(_&&typeof _.tag=="string"&&(h?g||(a+=_.tag):l+=_.tag),r.pop())}break}return s=i+s+a,l+s}function Lu(t,e){let n=e?t.getPreviousSibling():t.getNextSibling();if(!n){const r=t.getParentOrThrow();r.isInline()&&(n=e?r.getPreviousSibling():r.getNextSibling())}for(;n;){if($(n)){if(!n.isInline())break;const r=e?n.getLastDescendant():n.getFirstDescendant();if(R(r))return r;n=e?n.getPreviousSibling():n.getNextSibling()}if(R(n))return n;if(!$(n))return null}return null}function ko(t,e){return R(t)&&t.hasFormat(e)}function Ax(t,e){const n=function(o,s){const i=o.match(s.openTagsRegExp);if(i==null)return null;for(const l of i){const a=l.replace(/^\s/,""),c=s.fullMatchRegExpByTag[a];if(c==null)continue;const u=o.match(c),d=s.transformersByTag[a];if(u!=null&&d!=null){if(d.intraword!==!1)return u;const{index:f=0}=u,h=o[f-1],g=o[f+u[0].length];if((!h||cs.test(h))&&(!g||cs.test(g)))return u}}return null}(t.getTextContent(),e);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:e.transformersByTag[n[1]]}}function dn(t){return R(t)&&!t.hasFormat("code")}function fn(t,e,n){let r=Ax(t,e),o=function(i,l){const a=i;let c,u,d,f;for(const h of l){if(!h.replace||!h.importRegExp)continue;const g=a.getTextContent().match(h.importRegExp);if(!g)continue;const m=g.index||0,_=h.getEndIndex?h.getEndIndex(a,g):m+g[0].length;_!==!1&&(c===void 0||u===void 0||m<c&&_>u)&&(c=m,u=_,d=h,f=g)}return c===void 0||u===void 0||d===void 0||f===void 0?null:{endIndex:u,match:f,startIndex:c,transformer:d}}(t,n);if(r&&o&&(r.startIndex<=o.startIndex&&r.endIndex>=o.endIndex?o=null:r=null),r){const i=function(l,a,c,u,d){const f=l.getTextContent();let h,g,m;if(d[0]===f?h=l:a===0?[h,g]=l.splitText(c):[m,h,g]=l.splitText(a,c),h.setTextContent(d[2]),u)for(const _ of u.format)h.hasFormat(_)||h.toggleFormat(_);return{nodeAfter:g,nodeBefore:m,transformedNode:h}}(t,r.startIndex,r.endIndex,r.transformer,r.match);dn(i.nodeAfter)&&fn(i.nodeAfter,e,n),dn(i.nodeBefore)&&fn(i.nodeBefore,e,n),dn(i.transformedNode)&&fn(i.transformedNode,e,n)}else if(o){const i=function(l,a,c,u,d){let f,h,g;return a===0?[f,h]=l.splitText(c):[g,f,h]=l.splitText(a,c),u.replace?{nodeAfter:h,nodeBefore:g,transformedNode:u.replace(f,d)||void 0}:null}(t,o.startIndex,o.endIndex,o.transformer,o.match);if(!i)return;dn(i.nodeAfter)&&fn(i.nodeAfter,e,n),dn(i.nodeBefore)&&fn(i.nodeBefore,e,n),dn(i.transformedNode)&&fn(i.transformedNode,e,n)}const s=t.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(i,l)=>String.fromCodePoint(l));t.setTextContent(s)}function Ox(t,e=!1){const n=La(t),r=function(o){const s={},i={},l=[],a="(?<![\\\\])";for(const c of o){const{tag:u}=c;s[u]=c;const d=u.replace(/(\*|\^|\+)/g,"\\$1");l.push(d),u.length===1?i[u]=new RegExp(`(?<![\\\\${d}])(${d})((\\\\${d})?.*?[^${d}\\s](\\\\${d})?)((?<!\\\\)|(?<=\\\\\\\\))(${d})(?![\\\\${d}])`):i[u]=new RegExp(`(?<!\\\\)(${d})((\\\\${d})?.*?[^\\s](\\\\${d})?)((?<!\\\\)|(?<=\\\\\\\\))(${d})(?!\\\\)`)}return{fullMatchRegExpByTag:i,openTagsRegExp:new RegExp(`${a}(${l.join("|")})`,"g"),transformersByTag:s}}(n.textFormat);return(o,s)=>{const i=o.split(`
`),l=i.length,a=s||fe();a.clear();for(let u=0;u<l;u++){const d=i[u],[f,h]=Fx(i,u,n.multilineElement,a);f?u=h:Mx(d,a,n.element,r,n.textMatch,e)}const c=a.getChildren();for(const u of c)!e&&yl(u)&&a.getChildrenSize()>1&&u.remove();F()!==null&&a.selectStart()}}function Fx(t,e,n,r){for(const o of n){const{handleImportAfterStartMatch:s,regExpEnd:i,regExpStart:l,replace:a}=o,c=t[e].match(l);if(!c)continue;if(s){const g=s({lines:t,rootNode:r,startLineIndex:e,startMatch:c,transformer:o});if(g===null)continue;if(g)return g}const u=typeof i=="object"&&"regExp"in i?i.regExp:i,d=i&&typeof i=="object"&&"optional"in i?i.optional:!i;let f=e;const h=t.length;for(;f<h;){const g=u?t[f].match(u):null;if(!g&&(!d||d&&f<h-1)){f++;continue}if(g&&e===f&&g.index===c.index){f++;continue}const m=[];if(g&&e===f)m.push(t[e].slice(c[0].length,-g[0].length));else for(let _=e;_<=f;_++)if(_===e){const y=t[_].slice(c[0].length);m.push(y)}else if(_===f&&g){const y=t[_].slice(0,-g[0].length);m.push(y)}else m.push(t[_]);if(a(r,null,c,g,m,!0)!==!1)return[!0,f];break}}return[!1,e]}function Mx(t,e,n,r,o,s){const i=ue(t),l=ee();l.append(i),e.append(l);for(const{regExp:a,replace:c}of n){const u=t.match(a);if(u&&(i.setTextContent(t.slice(u[0].length)),c(l,[i],u,!0)!==!1))break}if(fn(i,r,o),l.isAttached()&&t.length>0){const a=l.getPreviousSibling();if(!s&&(dt(a)||is(a)||Q(a))){let c=a;if(Q(a)){const u=a.getLastDescendant();c=u==null?null:oe(u,ce)}c!=null&&c.getTextContentSize()>0&&(c.splice(c.getChildrenSize(),0,[xt(),...l.getChildren()]),l.remove())}}}function Rx(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Iu(t,e,n){const r=n.length;for(let o=e;o>=r;o--){const s=o-r;if(Th(t,s,n,0,r)&&t[s+r]!==" ")return s}return-1}function Th(t,e,n,r,o){for(let s=0;s<o;s++)if(t[e+s]!==n[r+s])return!1;return!0}function Lx(t,e=Ys){const n=La(e),r=_l(n.textFormat,({tag:i})=>i[i.length-1]),o=_l(n.textMatch,({trigger:i})=>i);for(const i of e){const l=i.type;if(l==="element"||l==="text-match"||l==="multiline-element"){const a=i.dependencies;for(const c of a)t.hasNode(c)||Rx(173,c.getType())}}const s=(i,l,a)=>{(function(c,u,d,f){const h=c.getParent();if(!ze(h)||c.getFirstChild()!==u)return!1;const g=u.getTextContent();if(g[d-1]!==" ")return!1;for(const{regExp:m,replace:_}of f){const y=g.match(m);if(y&&y[0].length===(y[0].endsWith(" ")?d:d-1)){const x=u.getNextSiblings(),[C,k]=u.splitText(d);if(_(c,k?[k,...x]:x,y,!1)!==!1)return C.remove(),!0}}return!1})(i,l,a,n.element)||function(c,u,d,f){const h=c.getParent();if(!ze(h)||c.getFirstChild()!==u)return!1;const g=u.getTextContent();if(g[d-1]!==" ")return!1;for(const{regExpStart:m,replace:_,regExpEnd:y}of f){if(y&&!("optional"in y)||y&&"optional"in y&&!y.optional)continue;const x=g.match(m);if(x&&x[0].length===(x[0].endsWith(" ")?d:d-1)){const C=u.getNextSiblings(),[k,w]=u.splitText(d);if(_(c,w?[w,...C]:C,x,null,null,!1)!==!1)return k.remove(),!0}}return!1}(i,l,a,n.multilineElement)||function(c,u,d){let f=c.getTextContent();const h=d[f[u-1]];if(h==null)return!1;u<f.length&&(f=f.slice(0,u));for(const g of h){if(!g.replace||!g.regExp)continue;const m=f.match(g.regExp);if(m===null)continue;const _=m.index||0,y=_+m[0].length;let x;return _===0?[x]=c.splitText(y):[,x]=c.splitText(_,y),x.selectNext(0,0),g.replace(x,m),!0}return!1}(l,a,o)||function(c,u,d){const f=c.getTextContent(),h=u-1,g=f[h],m=d[g];if(!m)return!1;for(const _ of m){const{tag:y}=_,x=y.length,C=h-x+1;if(x>1&&!Th(f,C,y,0,x)||f[C-1]===" ")continue;const k=f[h+1];if(_.intraword===!1&&k&&!cs.test(k))continue;const w=c;let v=w,N=Iu(f,C,y),S=v;for(;N<0&&(S=S.getPreviousSibling())&&!Ot(S);)if(R(S)){if(S.hasFormat("code"))continue;const P=S.getTextContent();v=S,N=Iu(P,P.length,y)}if(N<0||v===w&&N+x===C)continue;const T=v.getTextContent();if(N>0&&T[N-1]===g)continue;const A=T[N-1];if(_.intraword===!1&&A&&!cs.test(A))continue;const M=w.getTextContent(),L=M.slice(0,C)+M.slice(h+1);w.setTextContent(L);const I=v===w?L:T;v.setTextContent(I.slice(0,N)+I.slice(N+x));const j=F(),B=hr();ke(B);const W=h-x*(v===w?2:1)+1;B.anchor.set(v.__key,N,"text"),B.focus.set(w.__key,W,"text");for(const P of _.format)B.hasFormat(P)||B.formatText(P);B.anchor.set(B.focus.key,B.focus.offset,B.focus.type);for(const P of _.format)B.hasFormat(P)&&B.toggleFormat(P);return E(j)&&(B.format=j.format),!0}}(l,a,r)};return t.registerUpdateListener(({tags:i,dirtyLeaves:l,editorState:a,prevEditorState:c})=>{if(i.has(pf)||i.has(Xo)||t.isComposing())return;const u=a.read(F),d=c.read(F);if(!E(d)||!E(u)||!u.isCollapsed()||u.is(d))return;const f=u.anchor.key,h=u.anchor.offset,g=a._nodeMap.get(f);!R(g)||!l.has(f)||h!==1&&h>d.anchor.offset+1||t.update(()=>{if(!dn(g))return;const m=g.getParent();m===null||Ks(m)||s(m,g,u.anchor.offset)})})}const kh=/^(\s*)(\d{1,})\.\s/,Nh=/^(\s*)[-*+]\s/,Eh=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,xl=/^(#{1,6})\s/,$h=/^>\s/,Ah=/^[ \t]*```([\w-]+)?/,Oh=/[ \t]*```$/,Ix=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,jx=/^(?:\|)(.+)(?:\|)\s?$/,Dx=/^(\| ?:?-*:? ?)+\|\s?$/,Fh=t=>(e,n,r,o)=>{const s=t(r);s.append(...n),e.replace(s),o||s.select(0,0)},Ia=t=>(e,n,r,o)=>{const s=e.getPreviousSibling(),i=e.getNextSibling(),l=st(t==="check"?r[3]==="x":void 0);if(Q(i)&&i.getListType()===t){const c=i.getFirstChild();c!==null?c.insertBefore(l):i.append(l),e.remove()}else if(Q(s)&&s.getListType()===t)s.append(l),e.remove();else{const c=Ze(t,t==="number"?Number(r[2]):void 0);c.append(l),e.replace(c)}l.append(...n),o||l.select(0,0);const a=function(c){const u=c.match(/\t/g),d=c.match(/ /g);let f=0;return u&&(f+=u.length),d&&(f+=Math.floor(d.length/4)),f}(r[1]);a&&l.setIndent(a)},qs=(t,e,n)=>{const r=[],o=t.getChildren();let s=0;for(const i of o)if(ce(i)){if(i.getChildrenSize()===1){const u=i.getFirstChild();if(Q(u)){r.push(qs(u,e,n+1));continue}}const l=" ".repeat(4*n),a=t.getListType(),c=a==="number"?`${t.getStart()+s}. `:a==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(l+c+e(i)),s++}return r.join(`
`)},Px={dependencies:[Vs],export:(t,e)=>{if(!Na(t))return null;const n=Number(t.getTag().slice(1));return"#".repeat(n)+" "+e(t)},regExp:xl,replace:Fh(t=>{const e="h"+t[1].length;return mn(e)}),type:"element"},zx={dependencies:[Hs],export:(t,e)=>{if(!is(t))return null;const n=e(t).split(`
`),r=[];for(const o of n)r.push("> "+o);return r.join(`
`)},regExp:$h,replace:(t,e,n,r)=>{if(r){const s=t.getPreviousSibling();if(is(s))return s.splice(s.getChildrenSize(),0,[xt(),...e]),void t.remove()}const o=Js();o.append(...e),t.replace(o),r||o.select(0,0)},type:"element"},Bx={dependencies:[Bs],export:t=>{if(!Ks(t))return null;const e=t.getTextContent();return"```"+(t.getLanguage()||"")+(e?`
`+e:"")+"\n```"},regExpEnd:{optional:!0,regExp:Oh},regExpStart:Ah,replace:(t,e,n,r,o,s)=>{let i,l;if(!e&&o){if(o.length===1)r?(i=gt(),l=n[1]+o[0]):(i=gt(n[1]),l=o[0].startsWith(" ")?o[0].slice(1):o[0]);else{if(i=gt(n[1]),o[0].trim().length===0)for(;o.length>0&&!o[0].length;)o.shift();else o[0]=o[0].startsWith(" ")?o[0].slice(1):o[0];for(;o.length>0&&!o[o.length-1].length;)o.pop();l=o.join(`
`)}const a=ue(l);i.append(a),t.append(i)}else e&&Fh(a=>gt(a?a[1]:void 0))(t,e,n,s)},type:"multiline-element"},Kx={dependencies:[on,Ht],export:(t,e)=>Q(t)?qs(t,e,0):null,regExp:Nh,replace:Ia("bullet"),type:"element"},Mh={dependencies:[on,Ht],export:(t,e)=>Q(t)?qs(t,e,0):null,regExp:Eh,replace:Ia("check"),type:"element"},Wx={dependencies:[on,Ht],export:(t,e)=>Q(t)?qs(t,e,0):null,regExp:kh,replace:Ia("number"),type:"element"},Ux={format:["code"],tag:"`",type:"text-format"},Hx={format:["highlight"],tag:"==",type:"text-format"},Jx={format:["bold","italic"],tag:"***",type:"text-format"},Vx={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Gx={format:["bold"],tag:"**",type:"text-format"},qx={format:["bold"],intraword:!1,tag:"__",type:"text-format"},Yx={format:["strikethrough"],tag:"~~",type:"text-format"},Xx={format:["italic"],tag:"*",type:"text-format"},Zx={format:["italic"],intraword:!1,tag:"_",type:"text-format"},Qx={dependencies:[uo],export:(t,e,n)=>{if(!On(t)||ry(t))return null;const r=t.getTitle(),o=e(t);return r?`[${o}](${t.getURL()} "${r}")`:`[${o}](${t.getURL()})`},importRegExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(t,e)=>{const[,n,r,o]=e,s=ur(r,{title:o}),i=ue(n);return i.setFormat(t.getFormat()),s.append(i),t.replace(s),i},trigger:")",type:"text-match"},ja=[Px,zx,Kx,Wx],Da=[Bx],Pa=[Ux,Jx,Vx,Gx,qx,Hx,Xx,Zx,Yx],za=[Qx],Ys=[...ja,...Da,...Pa,...za];function eb(t,e=Ys,n,r=!1,o=!1){const s=r?t:function(i,l=!1){const a=i.split(`
`);let c=!1;const u=[];for(let d=0;d<a.length;d++){const f=a[d],h=u[u.length-1];Ix.test(f)?u.push(f):Ah.test(f)||Oh.test(f)?(c=!c,u.push(f)):c||f===""||h===""||!h||xl.test(h)||xl.test(f)||$h.test(f)||kh.test(f)||Nh.test(f)||Eh.test(f)||jx.test(f)||Dx.test(f)||!l?u.push(f):u[u.length-1]=h+f}return u.join(`
`)}(t,o);return Ox(e,r)(s,n)}function tb(t=Ys,e,n=!1){return function(o,s=!1){const i=La(o),l=[...i.multilineElement,...i.element],a=!s,c=i.textFormat.filter(u=>u.format.length===1).sort((u,d)=>Number(u.format.includes("code"))-Number(d.format.includes("code")));return u=>{const d=[],f=(u||fe()).getChildren();for(let h=0;h<f.length;h++){const g=f[h],m=$x(g,l,c,i.textMatch);m!=null&&d.push(a&&h>0&&!yl(g)&&!yl(f[h-1])?`
`.concat(m):m)}return d.join(`
`)}}(t,n)(e)}function nb(){const[t]=ie();return b.useEffect(()=>gy(t),[t]),null}function rb({newTab:t=!0,disabled:e=!1}){const[n]=ie();return b.useEffect(()=>{const r=s=>{const i=s.target;if(!ct(i))return;const l=Rs(i);if(l===null)return;let a=null,c=null;if(l.update(()=>{const f=Ne(i);if(f!==null){const h=oe(f,$);if(!e)if(On(h))a=h.sanitizeUrl(h.getURL()),c=h.getTarget();else{const g=function(m,_){let y=m;for(;y!=null;){if(_(y))return y;y=y.parentNode}return null}(i,ha);g!==null&&(a=g.href,c=g.target)}}}),a===null||a==="")return;const u=n.getEditorState().read(F);if(E(u)&&!u.isCollapsed())return void s.preventDefault();const d=s.type==="auxclick"&&s.button===1;window.open(a,t||d||s.metaKey||s.ctrlKey||c==="_blank"?"_blank":"_self"),s.preventDefault()},o=s=>{s.button===1&&r(s)};return n.registerRootListener((s,i)=>{i!==null&&(i.removeEventListener("click",r),i.removeEventListener("mouseup",o)),s!==null&&(s.addEventListener("click",r),s.addEventListener("mouseup",o))})},[n,t,e]),null}function bl(t,e){return bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bl(t,e)}var ju={error:null},ob=function(t){var e,n;function r(){for(var s,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return(s=t.call.apply(t,[this].concat(l))||this).state=ju,s.resetErrorBoundary=function(){for(var c,u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];s.props.onReset==null||(c=s.props).onReset.apply(c,d),s.reset()},s}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,bl(e,n),r.getDerivedStateFromError=function(s){return{error:s}};var o=r.prototype;return o.reset=function(){this.setState(ju)},o.componentDidCatch=function(s,i){var l,a;(l=(a=this.props).onError)==null||l.call(a,s,i)},o.componentDidUpdate=function(s,i){var l,a,c,u,d=this.state.error,f=this.props.resetKeys;d!==null&&i.error!==null&&((c=s.resetKeys)===void 0&&(c=[]),(u=f)===void 0&&(u=[]),c.length!==u.length||c.some(function(h,g){return!Object.is(h,u[g])}))&&((l=(a=this.props).onResetKeysChange)==null||l.call(a,s.resetKeys,f),this.reset())},o.render=function(){var s=this.state.error,i=this.props,l=i.fallbackRender,a=i.FallbackComponent,c=i.fallback;if(s!==null){var u={error:s,resetErrorBoundary:this.resetErrorBoundary};if(b.isValidElement(c))return c;if(typeof l=="function")return l(u);if(a)return b.createElement(a,u);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(b.Component);function sb({children:t,onError:e}){return p.jsx(ob,{fallback:p.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:t})}function Rh(){return fe().getTextContent()}function ib(t,e=!0){if(t)return!1;let n=Rh();return e&&(n=n.trim()),n===""}function lb(t){if(!ib(t,!1))return!1;const e=fe().getChildren(),n=e.length;if(n>1)return!1;for(let r=0;r<n;r++){const o=e[r];if(de(o))return!1;if($(o)){if(!dt(o)||o.__indent!==0)return!1;const s=o.getChildren(),i=s.length;for(let l=0;l<i;l++){const a=s[r];if(!R(a))return!1}}}return!0}function Lh(t){return()=>lb(t)}function ab(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function cb(t,e,n,r){const o=i=>i instanceof n,s=i=>{const l=ue(i.getTextContent());l.setFormat(i.getFormat()),i.replace(l)};return[t.registerNodeTransform(at,i=>{if(!i.isSimpleText())return;let l,a=i.getPreviousSibling(),c=i.getTextContent(),u=i;if(R(a)){const f=a.getTextContent(),h=e(f+c);if(o(a)){if(h===null||(g=>g.getLatest().__mode)(a)!==0)return void s(a);{const g=h.end-f.length;if(g>0){const m=f+c.slice(0,g);if(a.select(),a.setTextContent(m),g===c.length)i.remove();else{const _=c.slice(g);i.setTextContent(_)}return}}}else if(h===null||h.start<f.length)return}let d=0;for(;;){l=e(c);let f,h=l===null?"":c.slice(l.end);if(c=h,h===""){const m=u.getNextSibling();if(R(m)){h=u.getTextContent()+m.getTextContent();const _=e(h);if(_===null)return void(o(m)?s(m):m.markDirty());if(_.start!==0)return}}if(l===null)return;if(l.start===0&&R(a)&&a.isTextEntity()){d+=l.end;continue}l.start===0?[f,u]=u.splitText(l.end):[,f,u]=u.splitText(l.start+d,l.end+d),f===void 0&&ab(165,"nodeToReplace");const g=r(f);if(g.setFormat(f.getFormat()),f.replace(g),u==null)return;d=0,a=g}}),t.registerNodeTransform(n,i=>{const l=i.getTextContent(),a=e(l);if(a===null||a.start!==0)return void s(i);if(l.length>a.end)return void i.splitText(a.end);const c=i.getPreviousSibling();R(c)&&c.isTextEntity()&&(s(c),s(i));const u=i.getNextSibling();R(u)&&u.isTextEntity()&&(s(u),o(i)&&s(i))})]}function ub(t,e,n){const[r]=ie();b.useEffect(()=>He(...cb(r,t,e,n)),[n,r,t,e])}const db=new RegExp(function(){const{alpha:t,alphanumeric:e,hashChars:n}=function(){const o=String.fromCharCode,s="A-Za-zªµºÀ-ÖØ-öø-Ɂɐ-ˁˆ-ˑˠ-ˤˮͺΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϵϷ-ҁҊ-ӎӐ-ӹԀ-ԏԱ-Ֆՙա-ևא-תװ-ײء-غـ-يٮ-ٯٱ-ۓەۥ-ۦۮ-ۯۺ-ۼۿܐܒ-ܯݍ-ݭހ-ޥޱऄ-हऽॐक़-ॡॽঅ-ঌএ-ঐও-নপ-রলশ-হঽৎড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽૐૠ-ૡଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽଡ଼-ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡඅ-ඖක-නඳ-රලව-ෆก-ะา-ำเ-ๆກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆໜ-ໝༀཀ-ཇཉ-ཪྈ-ྋက-အဣ-ဧဩ-ဪၐ-ၕႠ-Ⴥა-ჺჼᄀ-ᅙᅟ-ᆢᆨ-ᇹሀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙶᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦩᧁ-ᧇᨀ-ᨖᴀ-ᶿḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₔℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℱℳ-ℹℼ-ℿⅅ-ⅉⰀ-Ⱞⰰ-ⱞⲀ-ⳤⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〆〱-〵〻-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄬㄱ-ㆎㆠ-ㆷㇰ-ㇿ㐀-䶵一-龻ꀀ-ꒌꠀ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢ가-힣豈-鶴侮-頻並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜÀ-ÖØ-öø-ÿĀ-ɏɓ-ɔɖ-ɗəɛɣɨɯɲʉʋʻ̀-ͯḀ-ỿЀ-ӿԀ-ԧⷠ-ⷿꙀ-֑ꚟ-ֿׁ-ׂׄ-ׇׅא-תװ-״﬒-ﬨשׁ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﭏؐ-ؚؠ-ٟٮ-ۓە-ۜ۞-۪ۨ-ۯۺ-ۼۿݐ-ݿࢠࢢ-ࢬࣤ-ࣾﭐ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼ‌-‌ก-ฺเ-๎ᄀ-ᇿ㄰-ㆅꥠ-꥿가-힯ힰ-퟿ﾡ-ￜァ-ヺー-ヾｦ-ﾟ０-９Ａ-Ｚａ-ｚぁ-ゖ゙-ゞ㐀-䶿一-鿿"+o(173824)+"-"+o(177983)+o(177984)+"-"+o(178207)+o(194560)+"-"+o(195103)+"〃々〻";return{alpha:s,alphanumeric:s+"̀-ͯ҃-֑҆-ֹֻ-ֽֿׁ-ׂׄ-ׇׅؐ-ًؕ-ٰٞۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ްँ-ः़ा-्॑-॔ॢ-ॣঁ-ঃ়া-ৄে-ৈো-্ৗৢ-ৣਁ-ਃ਼ਾ-ੂੇ-ੈੋ-੍ੰ-ੱઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣଁ-ଃ଼ା-ୃେ-ୈୋ-୍ୖ-ୗஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕ-ౖಂ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕ-ೖം-ഃാ-ൃെ-ൈൊ-്ൗං-ඃ්ා-ුූෘ-ෟෲ-ෳัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-༹༙༵༷༾-༿ཱ-྄྆-྇ྐ-ྗྙ-ྼ࿆ာ-ဲံ-္ၖ-ၙ፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈ-ᧉᨗ-ᨛ᷀-᷃⃐-⃥⃜⃡-⃫〪-゙〯-゚ꠂ꠆ꠋꠣ-ꠧﬞ︀-️︠-︣0-9٠-٩۰-۹०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉០-៩᠐-᠙᥆-᥏᧐-᧙０-９_",hashChars:"#\\uFF03"}}(),r="["+e+"]";return"("+("^|$|[^&/"+e+"]")+")("+("["+n+"]")+")("+r+"*"+("["+t+"]")+r+"*)"}(),"i");function fb(){const[t]=ie();b.useEffect(()=>{if(!t.hasNodes([rs]))throw new Error("HashtagPlugin: HashtagNode not registered on editor")},[t]);const e=b.useCallback(r=>Yf(r.getTextContent()),[]),n=b.useCallback(r=>{const o=db.exec(r);if(o===null)return null;const s=o[3].length+1,i=o.index+o[1].length;return{end:i+s,start:i}},[]);return ub(n,rs,e),null}const No=0,Cl=1,vl=2,ft=0,hb=1,Du=2,gb=3,pb=4;function mb(t,e,n,r,o){if(t===null||n.size===0&&r.size===0&&!o)return ft;const s=e._selection,i=t._selection;if(o)return hb;if(!(E(s)&&E(i)&&i.isCollapsed()&&s.isCollapsed()))return ft;const l=function(y,x,C){const k=y._nodeMap,w=[];for(const v of x){const N=k.get(v);N!==void 0&&w.push(N)}for(const[v,N]of C){if(!N)continue;const S=k.get(v);S===void 0||Pe(S)||w.push(S)}return w}(e,n,r);if(l.length===0)return ft;if(l.length>1){const y=e._nodeMap,x=y.get(s.anchor.key),C=y.get(i.anchor.key);return x&&C&&!t._nodeMap.has(x.__key)&&R(x)&&x.__text.length===1&&s.anchor.offset===1?Du:ft}const a=l[0],c=t._nodeMap.get(a.__key);if(!R(c)||!R(a)||c.__mode!==a.__mode)return ft;const u=c.__text,d=a.__text;if(u===d)return ft;const f=s.anchor,h=i.anchor;if(f.key!==h.key||f.type!=="text")return ft;const g=f.offset,m=h.offset,_=d.length-u.length;return _===1&&m===g-1?Du:_===-1&&m===g+1?gb:_===-1&&m===g?pb:ft}function _b(t,e){let n=Date.now(),r=ft;return(o,s,i,l,a,c)=>{const u=Date.now();if(c.has(Xo))return r=ft,n=u,vl;const d=mb(o,s,l,a,t.isComposing()),f=(()=>{const h=i===null||i.editor===t,g=c.has(Wm);if(!g&&h&&c.has(Xn))return No;if(o===null)return Cl;const m=s._selection;return l.size>0||a.size>0?g===!1&&d!==ft&&d===r&&u<n+e&&h||l.size===1&&function(_,y,x){const C=y._nodeMap.get(_),k=x._nodeMap.get(_),w=y._selection,v=x._selection;return!(E(w)&&E(v)&&w.anchor.type==="element"&&w.focus.type==="element"&&v.anchor.type==="text"&&v.focus.type==="text"||!R(C)||!R(k)||C.__parent!==k.__parent)&&JSON.stringify(y.read(()=>C.exportJSON()))===JSON.stringify(x.read(()=>k.exportJSON()))}(Array.from(l)[0],o,s)?No:Cl:m!==null?No:vl})();return n=u,r=d,f}}function Pu(t){t.undoStack=[],t.redoStack=[],t.current=null}function yb(t,e,n){const r=_b(t,n);return He(t.registerCommand(ys,()=>(function(s,i){const l=i.redoStack,a=i.undoStack;if(a.length!==0){const c=i.current,u=a.pop();c!==null&&(l.push(c),s.dispatchCommand(kr,!0)),a.length===0&&s.dispatchCommand(Nr,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Xo})}}(t,e),!0),se),t.registerCommand(xs,()=>(function(s,i){const l=i.redoStack,a=i.undoStack;if(l.length!==0){const c=i.current;c!==null&&(a.push(c),s.dispatchCommand(Nr,!0));const u=l.pop();l.length===0&&s.dispatchCommand(kr,!1),i.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:Xo})}}(t,e),!0),se),t.registerCommand(Tm,()=>(Pu(e),!1),se),t.registerCommand(km,()=>(Pu(e),t.dispatchCommand(kr,!1),t.dispatchCommand(Nr,!1),!0),se),t.registerUpdateListener(({editorState:s,prevEditorState:i,dirtyLeaves:l,dirtyElements:a,tags:c})=>{const u=e.current,d=e.redoStack,f=e.undoStack,h=u===null?null:u.editorState;if(u!==null&&s===h)return;const g=r(i,s,u,l,a,c);if(g===Cl)d.length!==0&&(e.redoStack=[],t.dispatchCommand(kr,!1)),u!==null&&(f.push({...u}),t.dispatchCommand(Nr,!0));else if(g===vl)return;e.current={editor:t,editorState:s}}))}function xb(){return{current:null,redoStack:[],undoStack:[]}}function bb({delay:t,externalHistoryState:e}){const[n]=ie();return function(r,o,s=1e3){const i=b.useMemo(()=>o||xb(),[o]);b.useEffect(()=>yb(r,i,s),[s,r,i])}(n,e,t),null}function Cb(){const[t]=ie();return b.useEffect(()=>t.registerCommand(Sy,e=>{const n=F();if(!E(n))return!1;if(n.focus.getNode()!==null){const r=fo();zf(r)}return!0},se),[t]),null}function vb({hasStrictIndent:t=!1}){const[e]=ie();return b.useEffect(()=>{if(!e.hasNodes([on,Ht]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")},[e]),b.useEffect(()=>{if(t)return by(e)},[e,t]),function(n){b.useEffect(()=>xy(n),[n])}(e),null}const Sb=[{dependencies:[Ws],export:t=>ky(t)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(t,e,n,r)=>{const o=fo();r||t.getNextSibling()!=null?t.replace(o):t.insertBefore(o),o.selectNext()},type:"element"},...Ys];function wb({transformers:t=Sb}){const[e]=ie();return b.useEffect(()=>Lx(e,t),[e,t]),null}const Tb=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?b.useLayoutEffect:b.useEffect;function kb(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}function ho(){return function(t){const[e]=ie(),n=b.useMemo(()=>t(e),[e,t]),[r,o]=b.useState(()=>n.initialValueFn()),s=b.useRef(r);return Tb(()=>{const{initialValueFn:i,subscribe:l}=n,a=i();return s.current!==a&&(s.current=a,o(a)),l(c=>{s.current=c,o(c)})},[n,t]),r}(kb)}function Nb(t){const e=window.location.origin,n=r=>{if(r.origin!==e)return;const o=t.getRootElement();if(document.activeElement!==o)return;const s=r.data;if(typeof s=="string"){let i;try{i=JSON.parse(s)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const l=i.payload;if(l&&l.functionId==="makeChanges"){const a=l.args;if(a){const[c,u,d,f,h,g]=a;t.update(()=>{const m=F();if(E(m)){const _=m.anchor;let y=_.getNode(),x=0,C=0;if(R(y)&&c>=0&&u>=0&&(x=c,C=c+u,m.setTextNodeRange(y,x,y,C)),x===C&&d===""||(m.insertRawText(d),y=_.getNode()),R(y)){x=f,C=f+h;const k=y.getTextContentSize();x=x>k?k:x,C=C>k?k:C,m.setTextNodeRange(y,x,y,C)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const Sl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?b.useLayoutEffect:b.useEffect;function zu(t){return t.getEditorState().read(Lh(t.isComposing()))}function Eb({contentEditable:t,placeholder:e=null,ErrorBoundary:n}){const[r]=ie(),o=function(s,i){const[l,a]=b.useState(()=>s.getDecorators());return Sl(()=>s.registerDecoratorListener(c=>{Cn.flushSync(()=>{a(c)})}),[s]),b.useEffect(()=>{a(s.getDecorators())},[s]),b.useMemo(()=>{const c=[],u=Object.keys(l);for(let d=0;d<u.length;d++){const f=u[d],h=p.jsx(i,{onError:m=>s._onError(m),children:p.jsx(b.Suspense,{fallback:null,children:l[f]})}),g=s.getElementByKey(f);g!==null&&c.push(Cn.createPortal(h,g,f))}return c},[i,l,s])}(r,n);return function(s){Sl(()=>He(zy(s),Nb(s)),[s])}(r),p.jsxs(p.Fragment,{children:[t,p.jsx($b,{content:e}),o]})}function $b({content:t}){const[e]=ie(),n=function(o){const[s,i]=b.useState(()=>zu(o));return Sl(()=>{function l(){const a=zu(o);i(a)}return l(),He(o.registerUpdateListener(()=>{l()}),o.registerEditableListener(()=>{l()}))},[o]),s}(e),r=ho();return n?typeof t=="function"?t(r):t:null}function Ab(t,e){return He(t.registerCommand(ws,n=>{const r=F();if(!E(r))return!1;n.preventDefault();const o=function(s){const i=s.getNodes();if(W_(i,f=>Go(f)&&f.canIndent()?f:null).length>0)return!0;const l=s.anchor,a=s.focus,c=a.isBefore(l)?a:l,u=c.getNode(),d=ns(u);if(d.canIndent()){const f=d.getKey();let h=hr();if(h.anchor.set(f,0,"element"),h.focus.set(f,0,"element"),h=sr(h),h.anchor.is(c))return!0}return!1}(r)?n.shiftKey?Jo:Ho:Vd;return t.dispatchCommand(o,void 0)},se),t.registerCommand(Ho,()=>{if(e==null)return!1;const n=F();if(!E(n))return!1;const r=n.getNodes().map(o=>ns(o).getIndent());return Math.max(...r)+1>=e},Fe))}function Ob({maxIndent:t}){const[e]=ie();return b.useEffect(()=>Ab(e,t),[e,t]),null}function Fb({hasCellMerge:t=!0,hasCellBackgroundColor:e=!0,hasTabHandler:n=!0,hasHorizontalScroll:r=!1}){const[o]=ie();return b.useEffect(()=>{as(o)!==r&&(dx(o,r),o.registerNodeTransform(Ct,()=>{})())},[o,r]),b.useEffect(()=>Cx(o),[o]),b.useEffect(()=>bx(o,n),[o,n]),b.useEffect(()=>{if(!t)return xx(o)},[o,t]),b.useEffect(()=>{if(!e)return o.registerNodeTransform(sn,s=>{s.getBackgroundColor()!==null&&s.setBackgroundColor(null)})},[o,e,t]),null}const Ih=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?b.useLayoutEffect:b.useEffect;function Mb({editor:t,ariaActiveDescendant:e,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:o,ariaErrorMessage:s,ariaExpanded:i,ariaInvalid:l,ariaLabel:a,ariaLabelledBy:c,ariaMultiline:u,ariaOwns:d,ariaRequired:f,autoCapitalize:h,className:g,id:m,role:_="textbox",spellCheck:y=!0,style:x,tabIndex:C,"data-testid":k,...w},v){const[N,S]=b.useState(t.isEditable()),T=b.useCallback(M=>{M&&M.ownerDocument&&M.ownerDocument.defaultView?t.setRootElement(M):t.setRootElement(null)},[t]),A=b.useMemo(()=>function(...M){return L=>{M.forEach(I=>{typeof I=="function"?I(L):I!=null&&(I.current=L)})}}(v,T),[T,v]);return Ih(()=>(S(t.isEditable()),t.registerEditableListener(M=>{S(M)})),[t]),p.jsx("div",{"aria-activedescendant":N?e:void 0,"aria-autocomplete":N?n:"none","aria-controls":N?r:void 0,"aria-describedby":o,...s!=null?{"aria-errormessage":s}:{},"aria-expanded":N&&_==="combobox"?!!i:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":a,"aria-labelledby":c,"aria-multiline":u,"aria-owns":N?d:void 0,"aria-readonly":!N||void 0,"aria-required":f,autoCapitalize:h,className:g,contentEditable:N,"data-testid":k,id:m,ref:A,role:_,spellCheck:y,style:x,tabIndex:C,...w})}const Rb=b.forwardRef(Mb);function Bu(t){return t.getEditorState().read(Lh(t.isComposing()))}const Lb=b.forwardRef(Ib);function Ib(t,e){const{placeholder:n,...r}=t,[o]=ie();return p.jsxs(p.Fragment,{children:[p.jsx(Rb,{editor:o,...r,ref:e}),n!=null&&p.jsx(jb,{editor:o,content:n})]})}function jb({content:t,editor:e}){const n=function(i){const[l,a]=b.useState(()=>Bu(i));return Ih(()=>{function c(){const u=Bu(i);a(u)}return c(),He(i.registerUpdateListener(()=>{c()}),i.registerEditableListener(()=>{c()}))},[i]),l}(e),[r,o]=b.useState(e.isEditable());if(b.useLayoutEffect(()=>(o(e.isEditable()),e.registerEditableListener(i=>{o(i)})),[e]),!n)return null;let s=null;return typeof t=="function"?s=t(r):t!==null&&(s=t),s===null?null:p.jsx("div",{"aria-hidden":!0,children:s})}function Db({placeholder:t,className:e,placeholderClassName:n}){return p.jsx(Lb,{className:e??"ContentEditable__root relative block min-h-72 max-h-96 overflow-auto px-8 py-4 focus:outline-none","aria-placeholder":t,placeholder:p.jsx("div",{className:n??"text-muted-foreground pointer-events-none absolute top-0 left-0 overflow-hidden px-8 py-[18px] text-ellipsis select-none",children:t})})}function Ku(t){if(!t||t.trim()==="")return"";const e=document.createElement("div");e.innerHTML=t;function n(s,i=0){var d,f;const l="  ".repeat(i),a=s.tagName.toLowerCase();if(["br","hr","img","input","meta","link"].includes(a))return`${l}<${a}${r(s)} />`;if(s.children.length===0){const h=(d=s.textContent)==null?void 0:d.trim();return h?`${l}<${a}${r(s)}>${h}</${a}>`:`${l}<${a}${r(s)}></${a}>`}let u=`${l}<${a}${r(s)}>
`;for(let h=0;h<s.childNodes.length;h++){const g=s.childNodes[h];if(g.nodeType===Node.TEXT_NODE){const m=(f=g.textContent)==null?void 0:f.trim();m&&(u+=`${l}  ${m}
`)}else g.nodeType===Node.ELEMENT_NODE&&(u+=n(g,i+1)+`
`)}return u+=`${l}</${a}>`,u}function r(s){const i=[];for(let l=0;l<s.attributes.length;l++){const a=s.attributes[l];i.push(`${a.name}="${a.value}"`)}return i.length>0?" "+i.join(" "):""}let o="";for(let s=0;s<e.children.length;s++){const i=e.children[s];o+=n(i)+`
`}if(o.trim()===""){const s=document.createElement("div");if(s.innerHTML=t,s.children.length===0&&s.textContent)return s.textContent;for(let i=0;i<s.children.length;i++){const l=s.children[i];o+=n(l)+`
`}}return o.trim()}function Pb(){const[t]=ie(),[e,n]=b.useState(!1),[r,o]=b.useState(""),[s,i]=b.useState(!1),l=()=>{t.read(()=>{const f=Us(t),h=Ku(f);o(h),n(!0)})},a=()=>{t.update(()=>{const f=fe();if(f.clear(),r.trim()===""){const{$createParagraphNode:h,$createTextNode:g}=require("lexical"),m=h();m.append(g("")),f.append(m)}else{const g=new DOMParser().parseFromString(r,"text/html"),m=ka(t,g);fe().select(),no(m)}}),n(!1),i(!1)},c=f=>{o(f.target.value),i(!0)},u=()=>{n(!1),i(!1),o("")},d=()=>{try{const f=Ku(r);o(f),i(!0)}catch(f){console.error("Error formatting HTML:",f)}};return p.jsxs(p.Fragment,{children:[p.jsx(Lr,{orientation:"vertical",className:"h-6"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0",children:p.jsx(qa,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Edit Source Code"})})]}),p.jsx(Gr,{open:e,onOpenChange:n,children:p.jsxs(qr,{className:"sm:max-w-4xl max-h-[95vh] flex flex-col",children:[p.jsxs(Yr,{children:[p.jsxs(Xr,{className:"flex items-center gap-2",children:[p.jsx(qa,{className:"h-5 w-5"}),"Edit Source Code"]}),p.jsx(Zr,{children:"View and edit the HTML source code of your content. Changes will be applied when you save."})]}),p.jsx("div",{className:"flex-1 flex flex-col space-y-4 min-h-0",children:p.jsxs("div",{className:"flex flex-col space-y-2 flex-1 min-h-0",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("label",{htmlFor:"source-code",className:"text-sm font-medium",children:"HTML Source Code"}),p.jsxs(re,{variant:"outline",size:"sm",onClick:d,className:"h-8 px-3",children:[p.jsx(md,{className:"mr-2 h-4 w-4"}),"Format"]})]}),p.jsx(kg,{id:"source-code",value:r,onChange:c,placeholder:"Enter HTML source code...",className:"font-mono text-sm flex-1 min-h-[200px] max-h-none overflow-y-auto resize-none",spellCheck:!1,style:{height:"auto",minHeight:"200px"}})]})}),p.jsxs(hs,{children:[p.jsxs(re,{variant:"outline",onClick:u,children:[p.jsx(Eg,{className:"mr-2 h-4 w-4"}),"Cancel"]}),p.jsxs(re,{onClick:a,disabled:!s,children:[p.jsx(Mg,{className:"mr-2 h-4 w-4"}),"Apply Changes"]})]})]})})]})}function zb(){const[t]=ie(),[e,n]=b.useState(!1),r=()=>{n(!e)};return b.useEffect(()=>{const o=s=>{s.key==="Escape"&&e&&n(!1)};return e?(document.addEventListener("keydown",o),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}},[e]),b.useEffect(()=>{var i;const o=(i=document.querySelector("[data-lexical-editor]"))==null?void 0:i.closest(".bg-background"),s=document.querySelector(".ContentEditable__root");o&&(e?(o.classList.add("fixed","inset-0","z-[9999]","bg-background","flex","flex-col"),o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.right="0",o.style.bottom="0",o.style.zIndex="9999",o.style.backgroundColor="var(--background)",s&&(s.style.overflow="auto",s.style.maxHeight="calc(100vh - 120px)",s.style.flex="1")):(o.classList.remove("fixed","inset-0","z-[9999]","flex","flex-col"),o.style.position="",o.style.top="",o.style.left="",o.style.right="",o.style.bottom="",o.style.zIndex="",o.style.backgroundColor="",s&&(s.style.overflow="",s.style.maxHeight="",s.style.flex="")))},[e]),p.jsxs(p.Fragment,{children:[p.jsx(Lr,{orientation:"vertical",className:"h-6"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:e?p.jsx(kp,{className:"h-4 w-4"}):p.jsx(wp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:e?"Exit Fullscreen":"Enter Fullscreen"})})]})]})}const Bb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kb=t=>Bb?(t||window).getSelection():null,Xs=X("INSERT_IMAGE_COMMAND");function Wb({onClick:t}){const[e,n]=b.useState(""),[r,o]=b.useState(""),s=e==="";return p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid gap-2",children:[p.jsx(_n,{htmlFor:"image-url",children:"Image URL"}),p.jsx(vn,{id:"image-url",placeholder:"i.e. https://example.com/image.jpg",onChange:i=>n(i.target.value),value:e,"data-test-id":"image-modal-url-input"})]}),p.jsxs("div",{className:"grid gap-2",children:[p.jsx(_n,{htmlFor:"alt-text",children:"Alt Text"}),p.jsx(vn,{id:"alt-text",placeholder:"Add alt text for accessibility",onChange:i=>o(i.target.value),value:r,"data-test-id":"image-modal-alt-text-input"})]}),p.jsx(hs,{children:p.jsx(re,{type:"submit",disabled:s,onClick:()=>t({altText:r,src:e}),"data-test-id":"image-modal-confirm-btn",children:"Confirm"})})]})}function Ub({activeEditor:t,onClose:e}){const n=b.useRef(!1);b.useEffect(()=>{n.current=!1;const o=s=>{n.current=s.altKey};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[t]);const r=o=>{t.dispatchCommand(Xs,o),e()};return p.jsx("div",{className:"grid gap-4 py-4",children:p.jsx(Wb,{onClick:r})})}function Hb(){const[t]=ie();return b.useEffect(()=>{if(!t.hasNodes([yr]))throw new Error("ImagesPlugin: ImageNode not registered on editor");return He(t.registerCommand(Xs,e=>{const n=Gs(e);if(no([n]),ze(n.getParentOrThrow())){const r=ee();r.append(n);const o=F();o&&E(o)&&o.insertNodes([r])}return!0},se),t.registerCommand(Xl,e=>Jb(e),Zn),t.registerCommand(ks,e=>Vb(e),Ge),t.registerCommand(Ts,e=>Gb(e,t),Zn))},[t]),null}function Jb(t){const e=Ba();if(!e)return!1;const n=t.dataTransfer;if(!n)return!1;const r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o=document.createElement("img");return o.src=r,n.setData("text/plain","_"),n.setDragImage(o,0,0),n.setData("application/x-lexical-drag",JSON.stringify({data:{altText:e.__altText,height:e.__height,key:e.getKey(),maxWidth:e.__maxWidth,src:e.__src,width:e.__width},type:"image"})),!0}function Vb(t){return Ba()?(jh(t)||t.preventDefault(),!0):!1}function Gb(t,e){const n=Ba();if(!n)return!1;const r=qb(t);if(!r)return!1;if(t.preventDefault(),jh(t)){const o=Yb(t);n.remove();const s=hr();o!=null&&s.applyDOMRange(o),ke(s),e.dispatchCommand(Xs,r)}return!0}function Ba(){const t=F();if(!Re(t))return null;const n=t.getNodes()[0];return Tx(n)?n:null}function qb(t){var o;const e=(o=t.dataTransfer)==null?void 0:o.getData("application/x-lexical-drag");if(!e)return null;const{type:n,data:r}=JSON.parse(e);return n!=="image"?null:r}function jh(t){const e=t.target;return!!(e&&e instanceof HTMLElement&&!e.closest("code, span.editor-image")&&e.parentElement&&e.parentElement.closest("div.ContentEditable__root"))}function Yb(t){let e;const n=t.target,r=n==null?null:n.nodeType===9?n.defaultView:n.ownerDocument.defaultView,o=Kb(r);if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t.clientX,t.clientY);else if(t.rangeParent&&o!==null)o.collapse(t.rangeParent,t.rangeOffset||0),e=o.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return e}function Dh(){const[t,e]=b.useState(null),n=b.useCallback(()=>{e(null)},[]),r=b.useMemo(()=>{if(t===null)return null;const{title:s,content:i}=t;return p.jsx(Gr,{open:!0,onOpenChange:n,children:p.jsxs(qr,{className:"sm:max-w-xl",children:[p.jsxs(Yr,{children:[p.jsx(Xr,{children:s}),p.jsxs(Zr,{children:[s==="Insert Image"&&"Add an image to your content by entering a URL.",s==="Insert Inline Image"&&"Upload an image file to insert into your content.",s==="Insert Link"&&"Add a link to your content.",s==="Edit Link"&&"Modify the link properties.",s==="Insert Table"&&"Create a new table with the specified number of rows and columns.",s==="Edit Source Code"&&"View and edit the HTML source code of your content."]})]}),i]})})},[t,n]),o=b.useCallback((s,i,l=!1)=>{e({closeOnClickOutside:l,content:i(n),title:s})},[n]);return[r,o]}function Xb(){const[t]=ie(),[e,n]=b.useState(!1),[r,o]=Dh(),{project:s}=Cg().props,i=b.useCallback(c=>{t.update(()=>{const u=F();E(u)&&c.forEach(d=>{var g;const f=((g=d.metadata)==null?void 0:g.alt_text)||d.original_filename;if(["jpg","jpeg","png","gif","webp","svg","bmp"].includes(d.extension.toLowerCase())){const m=Gs({altText:f,src:d.full_url||d.url,maxWidth:500});if(no([m]),ze(m.getParentOrThrow())){const _=ee();_.append(m),u.insertNodes([_])}}else{const m=d.original_filename,_=ue(m);_.setFormat("underline"),u.insertNodes([_]);const y=ue(` (${d.formatted_size})`);u.insertNodes([y])}})}),n(!1)},[t]);b.useCallback(c=>{t.dispatchCommand(Xs,{...c,maxWidth:500})},[t]);const l=()=>{n(!0)},a=()=>{o("Insert Image",c=>p.jsx(Ub,{activeEditor:t,onClose:c}))};return p.jsxs(p.Fragment,{children:[p.jsx(Lr,{orientation:"vertical",className:"h-6"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0",children:p.jsx(Lg,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Insert from Asset Library"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0",children:p.jsx(_p,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Insert Image from URL"})})]}),s&&p.jsx(Rg,{isOpen:e,onClose:()=>n(!1),project:s,onSelect:i,currentlySelected:[],allowMultiple:!1}),r]})}const Wu=[{value:"Arial",label:"Arial"},{value:"Verdana",label:"Verdana"},{value:"Times New Roman",label:"Times New Roman"},{value:"Georgia",label:"Georgia"},{value:"Courier New",label:"Courier New"},{value:"Trebuchet MS",label:"Trebuchet MS"},{value:"Helvetica",label:"Helvetica"},{value:"Comic Sans MS",label:"Comic Sans MS"}];function Zb(){const[t]=ie(),[e,n]=b.useState("Arial"),r=b.useCallback(()=>{const i=F();if(E(i)){const l=Ps(i,"font-family","Arial");n(l)}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:i})=>{i.read(()=>{r()})}),[t,r]),b.useEffect(()=>t.registerCommand(tt,()=>(r(),!1),Fe),[t,r]);const o=b.useCallback(i=>{t.update(()=>{const l=F();l!==null&&Ds(l,{"font-family":i})}),n(i)},[t]),s=()=>{const i=Wu.find(l=>l.value===e);return i?i.label:e};return p.jsxs(Ol,{children:[p.jsx(Fl,{asChild:!0,children:p.jsxs(re,{variant:"outline",size:"sm",className:"h-8 gap-2",children:[p.jsx(Qr,{className:"h-4 w-4"}),p.jsx("span",{className:"text-xs",children:s()}),p.jsx(gs,{className:"h-3 w-3"})]})}),p.jsxs(Ml,{className:"w-48",align:"start",children:[p.jsx(Rl,{children:"Font Family"}),Wu.map(i=>p.jsx(_d,{onClick:()=>o(i.value),className:e===i.value?"bg-accent":"",children:p.jsx("span",{style:{fontFamily:i.value},children:i.label})},i.value))]})]})}const Uu=[{value:"8px",label:"8"},{value:"10px",label:"10"},{value:"12px",label:"12"},{value:"14px",label:"14"},{value:"16px",label:"16"},{value:"18px",label:"18"},{value:"20px",label:"20"},{value:"24px",label:"24"},{value:"28px",label:"28"},{value:"32px",label:"32"},{value:"36px",label:"36"},{value:"48px",label:"48"}];function Qb(){const[t]=ie(),[e,n]=b.useState("16px"),r=b.useCallback(()=>{const i=F();if(E(i)){const l=Ps(i,"font-size","16px");n(l)}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:i})=>{i.read(()=>{r()})}),[t,r]),b.useEffect(()=>t.registerCommand(tt,()=>(r(),!1),Fe),[t,r]);const o=b.useCallback(i=>{t.update(()=>{const l=F();l!==null&&Ds(l,{"font-size":i})}),n(i)},[t]),s=()=>{const i=Uu.find(l=>l.value===e);return i?i.label:e.replace("px","")};return p.jsxs(Ol,{children:[p.jsx(Fl,{asChild:!0,children:p.jsxs(re,{variant:"outline",size:"sm",className:"h-8 gap-2",children:[p.jsx(Qr,{className:"h-4 w-4"}),p.jsx("span",{className:"text-xs",children:s()}),p.jsx(gs,{className:"h-3 w-3"})]})}),p.jsxs(Ml,{className:"w-32",align:"start",children:[p.jsx(Rl,{children:"Font Size"}),p.jsx("div",{className:"grid grid-cols-2 gap-1 p-2",children:Uu.map(i=>p.jsx(re,{variant:e===i.value?"default":"ghost",size:"sm",onClick:()=>o(i.value),className:"h-8 text-xs",children:i.label},i.value))})]})]})}const Ti=[{value:"paragraph",label:"Paragraph",icon:Qr},{value:"h1",label:"Heading 1",icon:sp},{value:"h2",label:"Heading 2",icon:lp},{value:"h3",label:"Heading 3",icon:cp},{value:"h4",label:"Heading 4",icon:dp},{value:"h5",label:"Heading 5",icon:hp},{value:"h6",label:"Heading 6",icon:pp}];function eC(){const[t]=ie(),[e,n]=b.useState("paragraph"),r=b.useCallback(()=>{const a=F();if(E(a)){const c=a.anchor.getNode(),u=c.getKey()==="root"?c:c.getTopLevelElementOrThrow();if(Na(u)){const d=u.getTag();n(d)}else dt(u),n("paragraph")}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:a})=>{a.read(()=>{r()})}),[t,r]),b.useEffect(()=>t.registerCommand(tt,()=>(r(),!1),Fe),[t,r]);const o=b.useCallback(a=>{t.update(()=>{const c=F();if(E(c)){const u=c.anchor.getNode(),d=u.getKey()==="root"?u:u.getTopLevelElementOrThrow(),f=d.getTextContent();let h;a==="paragraph"?(h=ee(),f&&h.append(ue(f))):(h=mn(a),f&&h.append(ue(f))),d.replace(h),h.select()}}),n(a)},[t]),s=()=>{const a=Ti.find(c=>c.value===e);return a?a.label:"Paragraph"},l=(()=>{const a=Ti.find(c=>c.value===e);return a?a.icon:Qr})();return p.jsxs(Ol,{children:[p.jsx(Fl,{asChild:!0,children:p.jsxs(re,{variant:"outline",size:"sm",className:"h-8 gap-2",children:[p.jsx(l,{className:"h-4 w-4"}),p.jsx("span",{className:"text-xs",children:s()}),p.jsx(gs,{className:"h-3 w-3"})]})}),p.jsxs(Ml,{className:"w-48",align:"start",children:[p.jsx(Rl,{children:"Block Type"}),Ti.map(({value:a,label:c,icon:u})=>{const d=e===a;return p.jsxs(_d,{onClick:()=>o(a),className:d?"bg-accent":"",children:[p.jsx(u,{className:"h-4 w-4 mr-2"}),c]},a)})]})]})}function Zs(){return(Zs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ph(t,e){if(t==null)return{};var n,r,o={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(o[n]=t[n]);return o}function wl(t){var e=b.useRef(t),n=b.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Vr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Rr=function(t){return"touches"in t},Tl=function(t){return t&&t.ownerDocument.defaultView||self},Hu=function(t,e,n){var r=t.getBoundingClientRect(),o=Rr(e)?function(s,i){for(var l=0;l<s.length;l++)if(s[l].identifier===i)return s[l];return s[0]}(e.touches,n):e;return{left:Vr((o.pageX-(r.left+Tl(t).pageXOffset))/r.width),top:Vr((o.pageY-(r.top+Tl(t).pageYOffset))/r.height)}},Ju=function(t){!Rr(t)&&t.preventDefault()},zh=be.memo(function(t){var e=t.onMove,n=t.onKey,r=Ph(t,["onMove","onKey"]),o=b.useRef(null),s=wl(e),i=wl(n),l=b.useRef(null),a=b.useRef(!1),c=b.useMemo(function(){var h=function(_){Ju(_),(Rr(_)?_.touches.length>0:_.buttons>0)&&o.current?s(Hu(o.current,_,l.current)):m(!1)},g=function(){return m(!1)};function m(_){var y=a.current,x=Tl(o.current),C=_?x.addEventListener:x.removeEventListener;C(y?"touchmove":"mousemove",h),C(y?"touchend":"mouseup",g)}return[function(_){var y=_.nativeEvent,x=o.current;if(x&&(Ju(y),!function(k,w){return w&&!Rr(k)}(y,a.current)&&x)){if(Rr(y)){a.current=!0;var C=y.changedTouches||[];C.length&&(l.current=C[0].identifier)}x.focus(),s(Hu(x,y,l.current)),m(!0)}},function(_){var y=_.which||_.keyCode;y<37||y>40||(_.preventDefault(),i({left:y===39?.05:y===37?-.05:0,top:y===40?.05:y===38?-.05:0}))},m]},[i,s]),u=c[0],d=c[1],f=c[2];return b.useEffect(function(){return f},[f]),be.createElement("div",Zs({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:o,onKeyDown:d,tabIndex:0,role:"slider"}))}),Ka=function(t){return t.filter(Boolean).join(" ")},Bh=function(t){var e=t.color,n=t.left,r=t.top,o=r===void 0?.5:r,s=Ka(["react-colorful__pointer",t.className]);return be.createElement("div",{className:s,style:{top:100*o+"%",left:100*n+"%"}},be.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Ue=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},tC=function(t){return iC(kl(t))},kl=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ue(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?Ue(parseInt(t.substring(6,8),16)/255,2):1}},nC=function(t){return sC(oC(t))},rC=function(t){var e=t.s,n=t.v,r=t.a,o=(200-e)*n/100;return{h:Ue(t.h),s:Ue(o>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0),l:Ue(o/2),a:Ue(r,2)}},Nl=function(t){var e=rC(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},oC=function(t){var e=t.h,n=t.s,r=t.v,o=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),i=r*(1-n),l=r*(1-(e-s)*n),a=r*(1-(1-e+s)*n),c=s%6;return{r:Ue(255*[r,l,i,i,a,r][c]),g:Ue(255*[a,r,r,l,i,i][c]),b:Ue(255*[i,i,a,r,r,l][c]),a:Ue(o,2)}},Eo=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},sC=function(t){var e=t.r,n=t.g,r=t.b,o=t.a,s=o<1?Eo(Ue(255*o)):"";return"#"+Eo(e)+Eo(n)+Eo(r)+s},iC=function(t){var e=t.r,n=t.g,r=t.b,o=t.a,s=Math.max(e,n,r),i=s-Math.min(e,n,r),l=i?s===e?(n-r)/i:s===n?2+(r-e)/i:4+(e-n)/i:0;return{h:Ue(60*(l<0?l+6:l)),s:Ue(s?i/s*100:0),v:Ue(s/255*100),a:o}},lC=be.memo(function(t){var e=t.hue,n=t.onChange,r=Ka(["react-colorful__hue",t.className]);return be.createElement("div",{className:r},be.createElement(zh,{onMove:function(o){n({h:360*o.left})},onKey:function(o){n({h:Vr(e+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":Ue(e),"aria-valuemax":"360","aria-valuemin":"0"},be.createElement(Bh,{className:"react-colorful__hue-pointer",left:e/360,color:Nl({h:e,s:100,v:100,a:1})})))}),aC=be.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:Nl({h:e.h,s:100,v:100,a:1})};return be.createElement("div",{className:"react-colorful__saturation",style:r},be.createElement(zh,{onMove:function(o){n({s:100*o.left,v:100-100*o.top})},onKey:function(o){n({s:Vr(e.s+100*o.left,0,100),v:Vr(e.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Ue(e.s)+"%, Brightness "+Ue(e.v)+"%"},be.createElement(Bh,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Nl(e)})))}),Kh=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},cC=function(t,e){return t.toLowerCase()===e.toLowerCase()||Kh(kl(t),kl(e))};function uC(t,e,n){var r=wl(n),o=b.useState(function(){return t.toHsva(e)}),s=o[0],i=o[1],l=b.useRef({color:e,hsva:s});b.useEffect(function(){if(!t.equal(e,l.current.color)){var c=t.toHsva(e);l.current={hsva:c,color:e},i(c)}},[e,t]),b.useEffect(function(){var c;Kh(s,l.current.hsva)||t.equal(c=t.fromHsva(s),l.current.color)||(l.current={hsva:s,color:c},r(c))},[s,t,r]);var a=b.useCallback(function(c){i(function(u){return Object.assign({},u,c)})},[]);return[s,a]}var dC=typeof window<"u"?b.useLayoutEffect:b.useEffect,fC=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Vu=new Map,hC=function(t){dC(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!Vu.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Vu.set(e,n);var r=fC();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},gC=function(t){var e=t.className,n=t.colorModel,r=t.color,o=r===void 0?n.defaultColor:r,s=t.onChange,i=Ph(t,["className","colorModel","color","onChange"]),l=b.useRef(null);hC(l);var a=uC(n,o,s),c=a[0],u=a[1],d=Ka(["react-colorful",e]);return be.createElement("div",Zs({},i,{ref:l,className:d}),be.createElement(aC,{hsva:c,onChange:u}),be.createElement(lC,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},pC={defaultColor:"000",toHsva:tC,fromHsva:function(t){return nC({h:t.h,s:t.s,v:t.v,a:1})},equal:cC},mC=function(t){return be.createElement(gC,Zs({},t,{colorModel:pC}))};function Wa({disabled:t=!1,stopCloseOnClickSelf:e=!0,color:n,onChange:r,icon:o,label:s,...i}){return p.jsxs(yd,{modal:!0,children:[p.jsx(xd,{asChild:!0,disabled:t,children:p.jsx(re,{size:"sm",className:"h-8 w-8 p-0",variant:"outline",...i,children:o})}),p.jsxs(bd,{className:"w-[200px] p-0",children:[p.jsx(mC,{color:n,onChange:l=>r==null?void 0:r(l,!1)}),p.jsx(vn,{maxLength:7,onChange:l=>{var a;l.stopPropagation(),r==null||r((a=l==null?void 0:l.currentTarget)==null?void 0:a.value,!1)},value:n})]})]})}function _C(){const[t]=ie(),[e,n]=b.useState("#000"),r=b.useCallback(()=>{const i=F();if(E(i)){const l=Ps(i,"color","#000");n(l)}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:i})=>{i.read(()=>{r()})}),[t,r]),b.useEffect(()=>t.registerCommand(tt,()=>(r(),!1),Fe),[t,r]);const o=b.useCallback((i,l)=>{t.update(()=>{const a=F();a!==null&&Ds(a,i)},l?{tag:"historic"}:{})},[t]),s=b.useCallback((i,l)=>{o({color:i},l),n(i)},[o]);return p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(Wa,{icon:p.jsx(ep,{className:"size-4"}),color:e,onChange:s,title:"text color"})}),p.jsx(_e,{children:p.jsx("p",{children:"Text Color"})})]})}function yC(){const[t]=ie(),[e,n]=b.useState("#fff"),r=b.useCallback(()=>{const i=F();if(E(i)){const l=Ps(i,"background-color","#fff");n(l)}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:i})=>{i.read(()=>{r()})}),[t,r]),b.useEffect(()=>t.registerCommand(tt,()=>(r(),!1),Fe),[t,r]);const o=b.useCallback((i,l)=>{t.update(()=>{const a=F();a!==null&&Ds(a,i)},l?{tag:"historic"}:{})},[t]),s=b.useCallback((i,l)=>{o({"background-color":i},l),n(i)},[o]);return p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(Wa,{icon:p.jsx(Td,{className:"size-4"}),color:e,onChange:s,title:"text background color"})}),p.jsx(_e,{children:p.jsx("p",{children:"Background Color"})})]})}class xC extends ro{constructor(e,n){super(n),this.__format=e||""}exportJSON(){return{...super.exportJSON(),format:this.__format||""}}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format||"")}canIndent(){return!1}createDOM(){return document.createElement("div")}updateDOM(){return!1}setFormat(e){const n=this.getWritable();return n.__format=e,n}isInline(){return!1}}function bC(t){return t instanceof xC}function CC(){const[t]=ie(),e=b.useCallback(()=>{t.update(()=>{const n=F();if(E(n)||ae(n)){const r=n.anchor,o=n.focus,s=n.getNodes(),i=n.extract();if(r.key===o.key&&r.offset===o.offset)return;s.forEach((l,a)=>{if(R(l)){let c=l;a===0&&r.offset!==0&&(c=c.splitText(r.offset)[1]||c),a===s.length-1&&(c=c.splitText(o.offset)[0]||c);const u=i[0];s.length===1&&R(u)&&(c=u),c.__style!==""&&c.setStyle(""),c.__format!==0&&(c.setFormat(0),ns(c).setFormat("")),l=c}else Na(l)||is(l)?l.replace(ee(),!0):bC(l)&&l.setFormat("")})}})},[t]);return p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"outline",size:"sm",onClick:e,className:"h-8 w-8 p-0",children:p.jsx(rp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Clear Formatting"})})]})}function Ua(t){const e=t.anchor,n=t.focus,r=t.anchor.getNode(),o=t.focus.getNode();return r===o?r:t.isBackward()?Wc(n)?r:o:Wc(e)?r:o}function vC(){const[t]=ie(),[e,n]=b.useState("left"),r=b.useCallback(()=>{const l=F();if(E(l)){const a=Ua(l),c=a.getParent();let u;On(c)&&(u=oe(a,d=>$(d)&&!d.isInline())),n($(u)?u.getFormatType():$(a)?a.getFormatType():(c==null?void 0:c.getFormatType())||"left")}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:l})=>{l.read(()=>{r()})}),[t,r]);const o=l=>{t.dispatchCommand(Yl,l)},s=()=>{t.dispatchCommand(Ho,void 0)},i=()=>{t.dispatchCommand(Jo,void 0)};return p.jsxs(p.Fragment,{children:[p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:e==="left"?"default":"ghost",size:"sm",onClick:()=>o("left"),className:"h-8 w-8 p-0",children:p.jsx(md,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Align Left"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:e==="center"?"default":"ghost",size:"sm",onClick:()=>o("center"),className:"h-8 w-8 p-0",children:p.jsx(Ig,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Align Center"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:e==="right"?"default":"ghost",size:"sm",onClick:()=>o("right"),className:"h-8 w-8 p-0",children:p.jsx(Zg,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Align Right"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:e==="justify"?"default":"ghost",size:"sm",onClick:()=>o("justify"),className:"h-8 w-8 p-0",children:p.jsx(Yg,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Justify"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",children:p.jsx(xp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Decrease Indent"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0",children:p.jsx(Cp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Increase Indent"})})]})]})}const cn=[{value:"_self",label:"Same window"},{value:"_blank",label:"New window"},{value:"_parent",label:"Parent frame"},{value:"_top",label:"Full window"}];function SC({isOpen:t,onClose:e,onInsert:n,selectedText:r,existingLinkData:o}){const[s,i]=b.useState(""),[l,a]=b.useState(r||""),[c,u]=b.useState(cn[0]);be.useEffect(()=>{t&&(o?(i(o.url),a(o.text),u(cn.find(h=>h.value===o.target)||cn[0])):(a(r||""),i(""),u(cn[0])))},[t,r,o]);const d=h=>{h.preventDefault(),s.trim()&&l.trim()&&(n(s.trim(),c.value,l.trim()),i(""),a(""),u(cn[0]),e())},f=()=>{i(""),a(""),u(cn[0]),e()};return p.jsx(Gr,{open:t,onOpenChange:e,children:p.jsxs(qr,{className:"sm:max-w-xl",children:[p.jsxs(Yr,{children:[p.jsx(Xr,{children:o?"Edit Link":"Insert Link"}),p.jsx(Zr,{children:o?"Modify the link properties including URL, text, and target window.":"Add a link to your content by specifying the URL and display text."})]}),p.jsxs("form",{onSubmit:d,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(_n,{htmlFor:"url",children:"URL"}),p.jsx(vn,{id:"url",type:"url",placeholder:"https://example.com",value:s,onChange:h=>i(h.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(_n,{htmlFor:"linkText",children:"Link Text"}),p.jsx(vn,{id:"linkText",type:"text",placeholder:"Enter link text",value:l,onChange:h=>a(h.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(_n,{htmlFor:"target",children:"Open in"}),p.jsx(jg,{id:"target",value:c,onChange:h=>u(h),options:cn,isSearchable:!1,placeholder:"Select target"})]}),p.jsxs(hs,{children:[p.jsx(re,{type:"button",variant:"outline",onClick:f,children:"Cancel"}),p.jsx(re,{type:"submit",disabled:!s.trim()||!l.trim(),children:o?"Update Link":"Insert Link"})]})]})]})})}function wC({isOpen:t,onClose:e}){const[n]=ie(),[r,o]=b.useState("3"),[s,i]=b.useState("3"),[l,a]=b.useState(!0);b.useEffect(()=>{const d=Number(r),f=Number(s);d&&d>0&&d<=500&&f&&f>0&&f<=50?a(!1):a(!0)},[r,s]);const c=d=>{d.preventDefault(),l||(n.dispatchCommand(fh,{columns:s,rows:r}),e())},u=()=>{o("3"),i("3"),e()};return p.jsx(Gr,{open:t,onOpenChange:e,children:p.jsxs(qr,{className:"sm:max-w-xl",children:[p.jsxs(Yr,{children:[p.jsx(Xr,{children:"Insert Table"}),p.jsx(Zr,{children:"Specify the number of rows and columns for your new table."})]}),p.jsxs("form",{onSubmit:c,className:"space-y-4",children:[p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(_n,{htmlFor:"rows",children:"Number of rows"}),p.jsx(vn,{id:"rows",placeholder:"# of rows (1-500)",onChange:d=>o(d.target.value),value:r,type:"number",min:"1",max:"500"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(_n,{htmlFor:"columns",children:"Number of columns"}),p.jsx(vn,{id:"columns",placeholder:"# of columns (1-50)",onChange:d=>i(d.target.value),value:s,type:"number",min:"1",max:"50"})]})]}),p.jsxs(hs,{children:[p.jsx(re,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),p.jsx(re,{type:"submit",disabled:l,children:"Insert Table"})]})]})]})})}const Wh=[];class Qs extends Ie{static getType(){return"mark"}static clone(e){return new Qs(e.__ids,e.__key)}static importDOM(){return null}static importJSON(e){return Gu().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIDs(e.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(e=Wh,n){super(n),this.__ids=e}createDOM(e){const n=document.createElement("mark");return Te(n,e.theme.mark),this.__ids.length>1&&Te(n,e.theme.markOverlap),n}updateDOM(e,n,r){const o=e.__ids,s=this.__ids,i=o.length,l=s.length,a=r.theme.markOverlap;return i!==l&&(i===1?l===2&&Te(n,a):l===1&&mt(n,a)),!1}hasID(e){return this.getIDs().includes(e)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(e){const n=this.getWritable();return n.__ids=e,n}addID(e){const n=this.getWritable();return n.__ids.includes(e)?n:n.setIDs([...n.__ids,e])}deleteID(e){const n=this.getWritable(),r=n.__ids.indexOf(e);if(r===-1)return n;const o=Array.from(n.__ids);return o.splice(r,1),n.setIDs(o)}insertNewAfter(e,n=!0){const r=Gu(this.__ids);return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,n,r){if(!E(n)||r==="html")return!1;const o=n.anchor,s=n.focus,i=o.getNode(),l=s.getNode(),a=n.isBackward()?o.offset-s.offset:s.offset-o.offset;return this.isParentOf(i)&&this.isParentOf(l)&&this.getTextContent().length===a}excludeFromCopy(e){return e!=="clone"}}function Gu(t=Wh){return Me(new Qs(t))}function TC(t){return t instanceof Qs}const Uh=Object.freeze({"	":"\\t","\n":"\\n"}),qu=new RegExp(Object.keys(Uh).join("|"),"g"),Et=Object.freeze({ancestorHasNextSibling:"|",ancestorIsLastChild:" ",hasNextSibling:"├",isLastChild:"└",selectedChar:"^",selectedLine:">"}),kC=[t=>t.hasFormat("bold")&&"Bold",t=>t.hasFormat("code")&&"Code",t=>t.hasFormat("italic")&&"Italic",t=>t.hasFormat("strikethrough")&&"Strikethrough",t=>t.hasFormat("subscript")&&"Subscript",t=>t.hasFormat("superscript")&&"Superscript",t=>t.hasFormat("underline")&&"Underline",t=>t.hasFormat("highlight")&&"Highlight"],NC=[t=>t.hasTextFormat("bold")&&"Bold",t=>t.hasTextFormat("code")&&"Code",t=>t.hasTextFormat("italic")&&"Italic",t=>t.hasTextFormat("strikethrough")&&"Strikethrough",t=>t.hasTextFormat("subscript")&&"Subscript",t=>t.hasTextFormat("superscript")&&"Superscript",t=>t.hasTextFormat("underline")&&"Underline",t=>t.hasTextFormat("highlight")&&"Highlight"],EC=[t=>t.isDirectionless()&&"Directionless",t=>t.isUnmergeable()&&"Unmergeable"],$C=[t=>t.isToken()&&"Token",t=>t.isSegmented()&&"Segmented"];function AC(t,e,n,r,o=!1){const s=t.getEditorState(),i=t._config,l=t._compositionKey,a=t._editable;if(n){let f="";return s.read(()=>{f=function(h){const g=document.createElement("div");return g.innerHTML=h.trim(),Jh(g,0).innerHTML}(Us(t))}),f}let c=` root
`;const u=s.read(()=>{const f=F();return Hh(fe(),(h,g)=>{const m=`(${h.getKey()})`,_=h.getType()||"",y=h.isSelected();c+=`${y?Et.selectedLine:" "} ${g.join(" ")} ${m} ${_} ${function(x,C,k=!1){const w=C?C(x,k):void 0;if(w!==void 0&&w.length>0)return w;if(R(x)){const v=x.getTextContent(),N=v.length===0?"(empty)":`"${Yu(v,k)}"`,S=function(T){return[Xu(T),OC(T),FC(T),Zu(T)].filter(Boolean).join(", ")}(x);return[N,S.length!==0?`{ ${S} }`:null].filter(Boolean).join(" ").trim()}if(On(x)){const v=x.getURL(),N=v.length===0?"(empty)":`"${Yu(v,k)}"`,S=function(T){return[MC(T),RC(T),LC(T),Zu(T)].filter(Boolean).join(", ")}(x);return[N,S.length!==0?`{ ${S} }`:null].filter(Boolean).join(" ").trim()}if(TC(x))return`ids: [ ${x.getIDs().join(", ")} ]`;if(dt(x)){const v=function(S){let T=NC.map(A=>A(S)).filter(Boolean).join(", ").toLocaleLowerCase();return T!==""&&(T="format: "+T),T}(x);let N=v!==""?`{ ${v} }`:"";return N+=x.__style?`(${x.__style})`:"",N}return""}(h,r,o)}
`,c+=function({indent:x,isSelected:C,node:k,nodeKeyDisplay:w,selection:v,typeDisplay:N}){if(!R(k)||!E(v)||!C||$(k))return"";const S=v.anchor,T=v.focus;if(k.getTextContent()===""||S.getNode()===v.focus.getNode()&&S.offset===T.offset)return"";const[A,M]=function(H,Y){const ne=Y.getStartEndPoints();if(Re(Y)||ne===null)return[-1,-1];const[U,O]=ne,K=H.getTextContent(),G=K.length;let z=-1,te=-1;if(U.type==="text"&&O.type==="text"){const le=U.getNode(),Ee=O.getNode();le===Ee&&H===le&&U.offset!==O.offset?[z,te]=U.offset<O.offset?[U.offset,O.offset]:[O.offset,U.offset]:[z,te]=H===le?le.isBefore(Ee)?[U.offset,G]:[0,U.offset]:H===Ee?Ee.isBefore(le)?[O.offset,G]:[0,O.offset]:[0,G]}const he=(K.slice(0,z).match(qu)||[]).length,Z=(K.slice(z,te).match(qu)||[]).length;return[z+he,te+he+Z]}(k,v);if(A===M)return"";const L=x[x.length-1]===Et.hasNextSibling?Et.ancestorHasNextSibling:Et.ancestorIsLastChild,I=[...x.slice(0,x.length-1),L],j=Array(A+1).fill(" "),B=Array(M-A).fill(Et.selectedChar),W=N.length+2,P=Array(w.length+W).fill(" ");return[Et.selectedLine,I.join(" "),[...P,...j,...B].join("")].join(" ")+`
`}({indent:g,isSelected:y,node:h,nodeKeyDisplay:m,selection:f,typeDisplay:_})}),f===null?": null":E(f)?function(h){let g="";const m=Xu(h);g+=`: range ${m!==""?`{ ${m} }`:""} ${h.style!==""?`{ style: ${h.style} } `:""}`;const _=h.anchor,y=h.focus,x=_.offset,C=y.offset;return g+=`
  ├ anchor { key: ${_.key}, offset: ${x===null?"null":x}, type: ${_.type} }`,g+=`
  └ focus { key: ${y.key}, offset: ${C===null?"null":C}, type: ${y.type} }`,g}(f):ae(f)?function(h){return`: table
  └ { table: ${h.tableKey}, anchorCell: ${h.anchor.key}, focusCell: ${h.focus.key} }`}(f):function(h){return Re(h)?`: node
  └ [${Array.from(h._nodes).join(", ")}]`:""}(f)});if(c+=`
 selection`+u,c+=`

 commands:`,e.length)for(const{index:f,type:h,payload:g}of e)c+=`
  └ ${f}. { type: ${h}, payload: ${g instanceof Event?g.constructor.name:g} }`;else c+=`
  └ None dispatched.`;const{version:d}=t.constructor;return c+=`

 editor${d?` (v${d})`:""}:`,c+=`
  └ namespace ${i.namespace}`,l!==null&&(c+=`
  └ compositionKey ${l}`),c+=`
  └ editable ${String(a)}`,c}function Hh(t,e,n=[]){const r=t.getChildren(),o=r.length;r.forEach((s,i)=>{e(s,n.concat(i===o-1?Et.isLastChild:Et.hasNextSibling)),$(s)&&Hh(s,e,n.concat(i===o-1?Et.ancestorIsLastChild:Et.ancestorHasNextSibling))})}function Yu(t,e=!1){const n=Object.entries(Uh).reduce((r,[o,s])=>r.replace(new RegExp(o,"g"),String(s)),t);return e?n.replace(/[^\s]/g,"*"):n}function OC(t){let e=EC.map(n=>n(t)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="detail: "+e),e}function FC(t){let e=$C.map(n=>n(t)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="mode: "+e),e}function Xu(t){let e=kC.map(n=>n(t)).filter(Boolean).join(", ").toLocaleLowerCase();return e!==""&&(e="format: "+e),e}function MC(t){let e=t.getTarget();return e!=null&&(e="target: "+e),e}function RC(t){let e=t.getRel();return e!=null&&(e="rel: "+e),e}function LC(t){let e=t.getTitle();return e!=null&&(e="title: "+e),e}function Zu(t){if(!t.__state)return!1;const e=[];for(const[r,o]of t.__state.knownState.entries()){if(r.isEqual(o,r.defaultValue))continue;const s=JSON.stringify(r.unparse(o));e.push(`[${r.key}: ${s}]`)}let n=e.join(",");return n!==""&&(n="state: "+n),n}function Jh(t,e){const n=new Array(1+e++).join("  "),r=new Array(e-1).join("  ");let o;for(let s=0;s<t.children.length;s++)o=document.createTextNode(`
`+n),t.insertBefore(o,t.children[s]),Jh(t.children[s],e),t.lastElementChild===t.children[s]&&(o=document.createTextNode(`
`+r),t.appendChild(o));return t}const IC=b.forwardRef(function({treeTypeButtonClassName:t,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:n,timeTravelPanelButtonClassName:r,viewClassName:o,timeTravelPanelClassName:s,editorState:i,setEditorState:l,setEditorReadOnly:a,generateContent:c,commandsLog:u=[]},d){const[f,h]=b.useState([]),[g,m]=b.useState(""),[_,y]=b.useState(!1),[x,C]=b.useState(!1),k=b.useRef(0),w=b.useRef(null),[v,N]=b.useState(!1),[S,T]=b.useState(!1),[A,M]=b.useState(!1),L=b.useRef(),I=b.useRef([]),j=b.useRef(0),B=b.useCallback(P=>{const H=++j.current;c(P).then(Y=>{H===j.current&&m(Y)}).catch(Y=>{H===j.current&&m(`Error rendering tree: ${Y.message}

Stack:
${Y.stack}`)})},[c]);b.useEffect(()=>{if(!(!A&&i._nodeMap.size>1e3&&(T(!0),!A))&&(L.current!==i||I.current!==u)){const P=L.current!==i;L.current=i,I.current=u,B(x),!_&&P&&h(H=>[...H,[Date.now(),i]])}},[i,B,x,A,_,u]);const W=f.length;return b.useEffect(()=>{if(v){let P;const H=()=>{const Y=k.current;if(Y===W-1)return void N(!1);const ne=f[Y][0],U=f[Y+1][0];P=setTimeout(()=>{k.current++;const O=k.current,K=w.current;K!==null&&(K.value=String(O)),l(f[O][1]),H()},U-ne)};return H(),()=>{clearTimeout(P)}}},[f,v,W,l]),p.jsxs("div",{className:o,children:[!A&&S?p.jsxs("div",{style:{padding:20},children:[p.jsx("span",{style:{marginRight:20},children:"Detected large EditorState, this can impact debugging performance."}),p.jsx("button",{onClick:()=>{M(!0)},style:{background:"transparent",border:"1px solid white",color:"white",cursor:"pointer",padding:5},children:"Show full tree"})]}):null,A?null:p.jsx("button",{onClick:()=>(B(!x),void C(!x)),className:t,type:"button",children:x?"Tree":"Export DOM"}),!_&&(A||!S)&&W>2&&p.jsx("button",{onClick:()=>{a(!0),k.current=W-1,y(!0)},className:e,type:"button",children:"Time Travel"}),(A||!S)&&p.jsx("pre",{ref:d,children:g}),_&&(A||!S)&&p.jsxs("div",{className:s,children:[p.jsx("button",{className:r,onClick:()=>{k.current===W-1&&(k.current=1),N(!v)},type:"button",children:v?"Pause":"Play"}),p.jsx("input",{className:n,ref:w,onChange:P=>{const H=Number(P.target.value),Y=f[H];Y&&(k.current=H,l(Y[1]))},type:"range",min:"1",max:W-1}),p.jsx("button",{className:r,onClick:()=>{a(!1);const P=f.length-1,H=f[P];l(H[1]);const Y=w.current;Y!==null&&(Y.value=String(P)),y(!1),N(!1)},type:"button",children:"Exit"})]})]})});function jC(t,e){const n=new Set;let r=0;for(const[o]of t._commands)n.add(t.registerCommand(o,s=>(e(i=>{r+=1;const l=[...i];return l.push({index:r,payload:s,type:o.type?o.type:"UNKNOWN"}),l.length>10&&l.shift(),l}),!1),Fe));return()=>n.forEach(o=>o())}function DC(t){const[e,n]=b.useState([]);return b.useEffect(()=>jC(t,n),[t]),b.useMemo(()=>e,[e])}function PC({treeTypeButtonClassName:t,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:n,timeTravelPanelButtonClassName:r,timeTravelPanelClassName:o,viewClassName:s,editor:i,customPrintNode:l}){const a=b.createRef(),[c,u]=b.useState(i.getEditorState()),d=DC(i);return b.useEffect(()=>He(i.registerUpdateListener(({editorState:f})=>{u(f)}),i.registerEditableListener(()=>{u(i.getEditorState())})),[i]),b.useEffect(()=>{const f=a.current;if(f!==null)return f.__lexicalEditor=i,()=>{f.__lexicalEditor=null}},[i,a]),p.jsx(IC,{treeTypeButtonClassName:t,timeTravelButtonClassName:e,timeTravelPanelSliderClassName:n,timeTravelPanelButtonClassName:r,viewClassName:s,timeTravelPanelClassName:o,setEditorReadOnly:f=>{const h=i.getRootElement();h!=null&&(h.contentEditable=f?"false":"true")},editorState:c,setEditorState:f=>i.setEditorState(f),generateContent:async function(f){return AC(i,d,f,l)},ref:a,commandsLog:d})}function zC(){const[t]=ie();return p.jsxs(Gr,{children:[p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(Tg,{asChild:!0,children:p.jsx(re,{size:"sm",variant:"ghost",className:"p-2",children:p.jsx(Ap,{className:"h-4 w-4"})})})}),p.jsx(_e,{children:p.jsx("p",{children:"Tree View"})})]}),p.jsxs(qr,{className:"sm:max-w-2xl",children:[p.jsxs(Yr,{children:[p.jsx(Xr,{children:"Tree View"}),p.jsx(Zr,{children:"View the tree structure of the editor."})]}),p.jsxs(Dg,{className:"bg-foreground text-background h-96 overflow-hidden rounded-lg p-2",children:[p.jsx(PC,{viewClassName:"tree-view-output",treeTypeButtonClassName:"debug-treetype-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",editor:t}),p.jsx(Pg,{orientation:"vertical"})]})]})]})}function BC({shouldPreserveNewLinesInMarkdown:t,transformers:e}){const[n]=ie(),[r,o]=b.useState(!1),[s,i]=b.useState(null),l=b.useCallback(()=>{n.update(()=>{const a=fe();if(r){if(s){a.clear();const c=n.parseEditorState(JSON.stringify(s));n.setEditorState(c),i(null)}else{const c=a.getFirstChild();if(Ks(c)&&c.getLanguage()==="markdown"){const u=c.getTextContent();a.clear(),eb(u,e,a,t)}}o(!1)}else{const c=tb(e,a,t),u=n.getEditorState().toJSON();i(u),a.clear();const d=gt("markdown");d.append(ue(c)),a.append(d),o(!0)}})},[n,r,e,t]);return b.useEffect(()=>{var c;const a=(c=document.querySelector("[data-lexical-editor]"))==null?void 0:c.closest(".bg-background");a&&(r?a.classList.add("markdown-mode"):a.classList.remove("markdown-mode"))},[r]),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:r?"default":"ghost",onClick:l,title:r?"Switch to Rich Text":"Switch to Markdown","aria-label":r?"Switch to Rich Text":"Switch to Markdown",size:"sm",className:"p-2",children:r?p.jsx(Qr,{className:"size-4"}):p.jsx(zg,{className:"size-4"})})}),p.jsx(_e,{children:r?"Switch to Rich Text":"Switch to Markdown"})]})}function KC(){const[t]=ie(),[e,n]=b.useState(!1),[r,o]=b.useState(!1),[s,i]=b.useState(!1),[l,a]=b.useState(!1),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[h,g]=b.useState(!1),[m,_]=b.useState(!1),[y,x]=b.useState(!1),[C,k]=b.useState(!1),[w,v]=b.useState(""),[N,S]=b.useState(!1),[T,A]=b.useState(null),M=b.useCallback(()=>{const U=F();if(E(U)){n(U.hasFormat("bold")),o(U.hasFormat("italic")),i(U.hasFormat("underline")),a(U.hasFormat("strikethrough")),u(U.hasFormat("subscript")),f(U.hasFormat("superscript")),v(U.getTextContent());const O=Ua(U),K=oe(O,On);K?(S(!0),A({url:K.getURL(),target:K.getTarget()||"_self",text:K.getTextContent()})):(S(!1),A(null))}},[]);b.useEffect(()=>t.registerUpdateListener(({editorState:U})=>{U.read(()=>{M()})}),[t,M]),b.useEffect(()=>t.registerCommand(Nr,U=>(g(U),!1),Fe),[t]),b.useEffect(()=>t.registerCommand(kr,U=>(_(U),!1),Fe),[t]);const L=U=>{t.dispatchCommand(Ke,U)},I=U=>{t.update(()=>{const O=F();if(E(O)){const K=Ze(U==="bullet"?"bullet":"number"),G=st(),z=O.getTextContent();z&&G.append(ee().append(ue(z))),K.append(G),O.insertNodes([K])}})},j=()=>{t.update(()=>{const U=F();if(E(U)){const O=Js(),K=U.getTextContent();K&&O.append(ee().append(ue(K))),U.insertNodes([O])}})},B=()=>{t.update(()=>{const U=F();if(E(U)){const O=gt(),K=U.getTextContent();K&&O.append(ue(K)),U.insertNodes([O])}})},W=()=>{t.update(()=>{const U=F();if(E(U)){const O=fo();U.insertNodes([O])}})},P=()=>{x(!0)},H=()=>{x(!0)},Y=()=>{k(!0)},ne=(U,O,K)=>{t.update(()=>{const G=F();if(E(G))if(N&&T){t.dispatchCommand(rl,null);const z=ur(U);z.setTarget(O);const te=ue(K);z.append(te),G.insertNodes([z])}else{const z=ur(U);z.setTarget(O);const te=ue(K);z.append(te),G.insertNodes([z])}})};return p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b flex-wrap",children:[p.jsx(Pb,{}),p.jsx(zC,{}),p.jsx(zb,{}),p.jsx(BC,{shouldPreserveNewLinesInMarkdown:!0,transformers:[Mh,...ja,...Da,...Pa,...za]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-300 dark:bg-gray-600"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t.dispatchCommand(ys,void 0),disabled:!h,className:"h-8 w-8 p-0",children:p.jsx(Hp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Undo"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t.dispatchCommand(xs,void 0),disabled:!m,className:"h-8 w-8 p-0",children:p.jsx(Lp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Redo"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-300 dark:bg-gray-600"}),p.jsx(Xb,{}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:N?"default":"ghost",size:"sm",onClick:N?H:P,className:"h-8 w-8 p-0",children:p.jsx(Bg,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:N?"Edit Link":"Insert Link"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:Y,className:"h-8 w-8 p-0",children:p.jsx(Bp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Insert Table"})})]})]}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b flex-wrap",children:[p.jsx(eC,{}),p.jsx(Zb,{}),p.jsx(Qb,{}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:e?"default":"ghost",size:"sm",onClick:()=>L("bold"),className:"h-8 w-8 p-0",children:p.jsx(Sd,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Bold"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:r?"default":"ghost",size:"sm",onClick:()=>L("italic"),className:"h-8 w-8 p-0",children:p.jsx(wd,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Italic"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:s?"default":"ghost",size:"sm",onClick:()=>L("underline"),className:"h-8 w-8 p-0",children:p.jsx($d,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Underline"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:l?"default":"ghost",size:"sm",onClick:()=>L("strikethrough"),className:"h-8 w-8 p-0",children:p.jsx(kd,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Strikethrough"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:c?"default":"ghost",size:"sm",onClick:()=>L("subscript"),className:"h-8 w-8 p-0",children:p.jsx(Nd,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Subscript"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:d?"default":"ghost",size:"sm",onClick:()=>L("superscript"),className:"h-8 w-8 p-0",children:p.jsx(Ed,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Superscript"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsx(_C,{}),p.jsx(yC,{}),p.jsx(CC,{}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsx(vC,{}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:()=>I("bullet"),className:"h-8 w-8 p-0",children:p.jsx(Kg,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Bullet List"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:()=>I("number"),className:"h-8 w-8 p-0",children:p.jsx(Ng,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Numbered List"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:j,className:"h-8 w-8 p-0",children:p.jsx(Mp,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Quote"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:B,className:"h-8 w-8 p-0",children:p.jsx(Cd,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Code Block"})})]}),p.jsxs(pe,{children:[p.jsx(me,{asChild:!0,children:p.jsx(re,{variant:"ghost",size:"sm",onClick:W,className:"h-8 w-8 p-0",children:p.jsx(Ep,{className:"h-4 w-4"})})}),p.jsx(_e,{children:p.jsx("p",{children:"Horizontal Rule"})})]}),p.jsx("div",{className:"h-6 w-px mx-2 bg-gray-200 dark:bg-gray-500"})]}),p.jsx(SC,{isOpen:y,onClose:()=>x(!1),onInsert:ne,selectedText:w,existingLinkData:T}),p.jsx(wC,{isOpen:C,onClose:()=>k(!1)})]})}var Qu=1,WC=.9,UC=.8,HC=.17,ki=.1,Ni=.999,JC=.9999,VC=.99,GC=/[\\\/_+.#"@\[\(\{&]/,qC=/[\\\/_+.#"@\[\(\{&]/g,YC=/[\s-]/,Vh=/[\s-]/g;function El(t,e,n,r,o,s,i){if(s===e.length)return o===t.length?Qu:VC;var l=`${o},${s}`;if(i[l]!==void 0)return i[l];for(var a=r.charAt(s),c=n.indexOf(a,o),u=0,d,f,h,g;c>=0;)d=El(t,e,n,r,c+1,s+1,i),d>u&&(c===o?d*=Qu:GC.test(t.charAt(c-1))?(d*=UC,h=t.slice(o,c-1).match(qC),h&&o>0&&(d*=Math.pow(Ni,h.length))):YC.test(t.charAt(c-1))?(d*=WC,g=t.slice(o,c-1).match(Vh),g&&o>0&&(d*=Math.pow(Ni,g.length))):(d*=HC,o>0&&(d*=Math.pow(Ni,c-o))),t.charAt(c)!==e.charAt(s)&&(d*=JC)),(d<ki&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(f=El(t,e,n,r,c+1,s+2,i),f*ki>d&&(d=f*ki)),d>u&&(u=d),c=n.indexOf(a,c+1);return i[l]=u,u}function ed(t){return t.toLowerCase().replace(Vh," ")}function XC(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,El(t,e,ed(t),ed(e),0,0,{})}var Sr='[cmdk-group=""]',Ei='[cmdk-group-items=""]',ZC='[cmdk-group-heading=""]',Gh='[cmdk-item=""]',td=`${Gh}:not([aria-disabled="true"])`,$l="cmdk-item-select",Un="data-value",QC=(t,e,n)=>XC(t,e,n),qh=b.createContext(void 0),go=()=>b.useContext(qh),Yh=b.createContext(void 0),Ha=()=>b.useContext(Yh),Xh=b.createContext(void 0),Zh=b.forwardRef((t,e)=>{let n=Hn(()=>{var O,K;return{search:"",value:(K=(O=t.value)!=null?O:t.defaultValue)!=null?K:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Hn(()=>new Set),o=Hn(()=>new Map),s=Hn(()=>new Map),i=Hn(()=>new Set),l=Qh(t),{label:a,children:c,value:u,onValueChange:d,filter:f,shouldFilter:h,loop:g,disablePointerSelection:m=!1,vimBindings:_=!0,...y}=t,x=Gn(),C=Gn(),k=Gn(),w=b.useRef(null),v=u0();Rn(()=>{if(u!==void 0){let O=u.trim();n.current.value=O,N.emit()}},[u]),Rn(()=>{v(6,I)},[]);let N=b.useMemo(()=>({subscribe:O=>(i.current.add(O),()=>i.current.delete(O)),snapshot:()=>n.current,setState:(O,K,G)=>{var z,te,he,Z;if(!Object.is(n.current[O],K)){if(n.current[O]=K,O==="search")L(),A(),v(1,M);else if(O==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let le=document.getElementById(k);le?le.focus():(z=document.getElementById(x))==null||z.focus()}if(v(7,()=>{var le;n.current.selectedItemId=(le=j())==null?void 0:le.id,N.emit()}),G||v(5,I),((te=l.current)==null?void 0:te.value)!==void 0){let le=K??"";(Z=(he=l.current).onValueChange)==null||Z.call(he,le);return}}N.emit()}},emit:()=>{i.current.forEach(O=>O())}}),[]),S=b.useMemo(()=>({value:(O,K,G)=>{var z;K!==((z=s.current.get(O))==null?void 0:z.value)&&(s.current.set(O,{value:K,keywords:G}),n.current.filtered.items.set(O,T(K,G)),v(2,()=>{A(),N.emit()}))},item:(O,K)=>(r.current.add(O),K&&(o.current.has(K)?o.current.get(K).add(O):o.current.set(K,new Set([O]))),v(3,()=>{L(),A(),n.current.value||M(),N.emit()}),()=>{s.current.delete(O),r.current.delete(O),n.current.filtered.items.delete(O);let G=j();v(4,()=>{L(),(G==null?void 0:G.getAttribute("id"))===O&&M(),N.emit()})}),group:O=>(o.current.has(O)||o.current.set(O,new Set),()=>{s.current.delete(O),o.current.delete(O)}),filter:()=>l.current.shouldFilter,label:a||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:x,inputId:k,labelId:C,listInnerRef:w}),[]);function T(O,K){var G,z;let te=(z=(G=l.current)==null?void 0:G.filter)!=null?z:QC;return O?te(O,n.current.search,K):0}function A(){if(!n.current.search||l.current.shouldFilter===!1)return;let O=n.current.filtered.items,K=[];n.current.filtered.groups.forEach(z=>{let te=o.current.get(z),he=0;te.forEach(Z=>{let le=O.get(Z);he=Math.max(le,he)}),K.push([z,he])});let G=w.current;B().sort((z,te)=>{var he,Z;let le=z.getAttribute("id"),Ee=te.getAttribute("id");return((he=O.get(Ee))!=null?he:0)-((Z=O.get(le))!=null?Z:0)}).forEach(z=>{let te=z.closest(Ei);te?te.appendChild(z.parentElement===te?z:z.closest(`${Ei} > *`)):G.appendChild(z.parentElement===G?z:z.closest(`${Ei} > *`))}),K.sort((z,te)=>te[1]-z[1]).forEach(z=>{var te;let he=(te=w.current)==null?void 0:te.querySelector(`${Sr}[${Un}="${encodeURIComponent(z[0])}"]`);he==null||he.parentElement.appendChild(he)})}function M(){let O=B().find(G=>G.getAttribute("aria-disabled")!=="true"),K=O==null?void 0:O.getAttribute(Un);N.setState("value",K||void 0)}function L(){var O,K,G,z;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let te=0;for(let he of r.current){let Z=(K=(O=s.current.get(he))==null?void 0:O.value)!=null?K:"",le=(z=(G=s.current.get(he))==null?void 0:G.keywords)!=null?z:[],Ee=T(Z,le);n.current.filtered.items.set(he,Ee),Ee>0&&te++}for(let[he,Z]of o.current)for(let le of Z)if(n.current.filtered.items.get(le)>0){n.current.filtered.groups.add(he);break}n.current.filtered.count=te}function I(){var O,K,G;let z=j();z&&(((O=z.parentElement)==null?void 0:O.firstChild)===z&&((G=(K=z.closest(Sr))==null?void 0:K.querySelector(ZC))==null||G.scrollIntoView({block:"nearest"})),z.scrollIntoView({block:"nearest"}))}function j(){var O;return(O=w.current)==null?void 0:O.querySelector(`${Gh}[aria-selected="true"]`)}function B(){var O;return Array.from(((O=w.current)==null?void 0:O.querySelectorAll(td))||[])}function W(O){let K=B()[O];K&&N.setState("value",K.getAttribute(Un))}function P(O){var K;let G=j(),z=B(),te=z.findIndex(Z=>Z===G),he=z[te+O];(K=l.current)!=null&&K.loop&&(he=te+O<0?z[z.length-1]:te+O===z.length?z[0]:z[te+O]),he&&N.setState("value",he.getAttribute(Un))}function H(O){let K=j(),G=K==null?void 0:K.closest(Sr),z;for(;G&&!z;)G=O>0?a0(G,Sr):c0(G,Sr),z=G==null?void 0:G.querySelector(td);z?N.setState("value",z.getAttribute(Un)):P(O)}let Y=()=>W(B().length-1),ne=O=>{O.preventDefault(),O.metaKey?Y():O.altKey?H(1):P(1)},U=O=>{O.preventDefault(),O.metaKey?W(0):O.altKey?H(-1):P(-1)};return b.createElement(yt.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:O=>{var K;(K=y.onKeyDown)==null||K.call(y,O);let G=O.nativeEvent.isComposing||O.keyCode===229;if(!(O.defaultPrevented||G))switch(O.key){case"n":case"j":{_&&O.ctrlKey&&ne(O);break}case"ArrowDown":{ne(O);break}case"p":case"k":{_&&O.ctrlKey&&U(O);break}case"ArrowUp":{U(O);break}case"Home":{O.preventDefault(),W(0);break}case"End":{O.preventDefault(),Y();break}case"Enter":{O.preventDefault();let z=j();if(z){let te=new Event($l);z.dispatchEvent(te)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:f0},a),ei(t,O=>b.createElement(Yh.Provider,{value:N},b.createElement(qh.Provider,{value:S},O))))}),e0=b.forwardRef((t,e)=>{var n,r;let o=Gn(),s=b.useRef(null),i=b.useContext(Xh),l=go(),a=Qh(t),c=(r=(n=a.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Rn(()=>{if(!c)return l.item(o,i==null?void 0:i.id)},[c]);let u=eg(o,s,[t.value,t.children,s],t.keywords),d=Ha(),f=nn(v=>v.value&&v.value===u.current),h=nn(v=>c||l.filter()===!1?!0:v.search?v.filtered.items.get(o)>0:!0);b.useEffect(()=>{let v=s.current;if(!(!v||t.disabled))return v.addEventListener($l,g),()=>v.removeEventListener($l,g)},[h,t.onSelect,t.disabled]);function g(){var v,N;m(),(N=(v=a.current).onSelect)==null||N.call(v,u.current)}function m(){d.setState("value",u.current,!0)}if(!h)return null;let{disabled:_,value:y,onSelect:x,forceMount:C,keywords:k,...w}=t;return b.createElement(yt.div,{ref:Ir(s,e),...w,id:o,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!f,"data-disabled":!!_,"data-selected":!!f,onPointerMove:_||l.getDisablePointerSelection()?void 0:m,onClick:_?void 0:g},t.children)}),t0=b.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...s}=t,i=Gn(),l=b.useRef(null),a=b.useRef(null),c=Gn(),u=go(),d=nn(h=>o||u.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);Rn(()=>u.group(i),[]),eg(i,l,[t.value,t.heading,a]);let f=b.useMemo(()=>({id:i,forceMount:o}),[o]);return b.createElement(yt.div,{ref:Ir(l,e),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&b.createElement("div",{ref:a,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),ei(t,h=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},b.createElement(Xh.Provider,{value:f},h))))}),n0=b.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=b.useRef(null),s=nn(i=>!i.search);return!n&&!s?null:b.createElement(yt.div,{ref:Ir(o,e),...r,"cmdk-separator":"",role:"separator"})}),r0=b.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,s=Ha(),i=nn(c=>c.search),l=nn(c=>c.selectedItemId),a=go();return b.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),b.createElement(yt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":a.listId,"aria-labelledby":a.labelId,"aria-activedescendant":l,id:a.inputId,type:"text",value:o?t.value:i,onChange:c=>{o||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),o0=b.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,s=b.useRef(null),i=b.useRef(null),l=nn(c=>c.selectedItemId),a=go();return b.useEffect(()=>{if(i.current&&s.current){let c=i.current,u=s.current,d,f=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let h=c.offsetHeight;u.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(c),()=>{cancelAnimationFrame(d),f.unobserve(c)}}},[]),b.createElement(yt.div,{ref:Ir(s,e),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:a.listId},ei(t,c=>b.createElement("div",{ref:Ir(i,a.listInnerRef),"cmdk-list-sizer":""},c)))}),s0=b.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:s,container:i,...l}=t;return b.createElement($g,{open:n,onOpenChange:r},b.createElement(Ag,{container:i},b.createElement(Og,{"cmdk-overlay":"",className:o}),b.createElement(Fg,{"aria-label":t.label,"cmdk-dialog":"",className:s},b.createElement(Zh,{ref:e,...l}))))}),i0=b.forwardRef((t,e)=>nn(n=>n.filtered.count===0)?b.createElement(yt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),l0=b.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...s}=t;return b.createElement(yt.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ei(t,i=>b.createElement("div",{"aria-hidden":!0},i)))}),po=Object.assign(Zh,{List:o0,Item:e0,Input:r0,Group:t0,Separator:n0,Dialog:s0,Empty:i0,Loading:l0});function a0(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function c0(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function Qh(t){let e=b.useRef(t);return Rn(()=>{e.current=t}),e}var Rn=typeof window>"u"?b.useEffect:b.useLayoutEffect;function Hn(t){let e=b.useRef();return e.current===void 0&&(e.current=t()),e}function nn(t){let e=Ha(),n=()=>t(e.snapshot());return b.useSyncExternalStore(e.subscribe,n,n)}function eg(t,e,n,r=[]){let o=b.useRef(),s=go();return Rn(()=>{var i;let l=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():o.current}})(),a=r.map(c=>c.trim());s.value(t,l,a),(i=e.current)==null||i.setAttribute(Un,l),o.current=l}),o}var u0=()=>{let[t,e]=b.useState(),n=Hn(()=>new Map);return Rn(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function d0(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function ei({asChild:t,children:e},n){return t&&b.isValidElement(e)?b.cloneElement(d0(e),{ref:e.ref},n(e.props.children)):n(e)}var f0={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function h0({className:t,...e}){return p.jsx(po,{"data-slot":"command",className:Ln("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function g0({className:t,...e}){return p.jsx(po.List,{"data-slot":"command-list",className:Ln("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...e})}function p0({className:t,...e}){return p.jsx(po.Group,{"data-slot":"command-group",className:Ln("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function $o({className:t,...e}){return p.jsx(po.Separator,{"data-slot":"command-separator",className:Ln("bg-border -mx-1 h-px",t),...e})}function it({className:t,...e}){return p.jsx(po.Item,{"data-slot":"command-item",className:Ln("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function $i(t){const e=t.getShape();return{columns:e.toX-e.fromX+1,rows:e.toY-e.fromY+1}}function m0(){const t=F();if(E(t)&&!t.isCollapsed()||ae(t)&&!t.anchor.is(t.focus)||!E(t)&&!ae(t))return!1;const[e]=Oe(t.anchor);return e.__colSpan>1||e.__rowSpan>1}function nd(t){if(t.getChildrenSize()!==1)return!1;const e=t.getFirstChildOrThrow();return!(!dt(e)||!e.isEmpty())}function _0(t){const e=t.getLastDescendant();R(e)?e.select():$(e)?e.selectEnd():e!==null&&e.selectNext()}function rd(t){return t.getEditorState().read(()=>{const e=F();if(E(e)||ae(e)){const[n]=Oe(e.anchor);if(V(n))return n.getBackgroundColor()}return null})}function y0({onClose:t,tableCellNode:e,setIsMenuOpen:n,contextRef:r,cellMerge:o}){const[s]=ie(),i=b.useRef(null),[l,a]=b.useState(e),[c,u]=b.useState({columns:1,rows:1}),[d,f]=Dh(),[h,g]=b.useState(!1),[m,_]=b.useState(!1),[y,x]=b.useState(()=>rd(s)||"");b.useEffect(()=>s.registerMutationListener(sn,W=>{W.get(l.getKey())==="updated"&&(s.getEditorState().read(()=>{a(l.getLatest())}),x(rd(s)||""))},{skipInitialization:!0}),[s,l]),b.useEffect(()=>{s.getEditorState().read(()=>{const W=F();if(ae(W)){const P=$i(W);u($i(W)),g(P.columns>1||P.rows>1)}_(m0())})},[s]),b.useEffect(()=>{const W=r.current,P=i.current,H=s.getRootElement();if(W!=null&&P!=null&&H!=null){const Y=H.getBoundingClientRect(),ne=W.getBoundingClientRect();P.style.opacity="1";const U=P.getBoundingClientRect(),O=5;let K=ne.right+O;if(K+U.width>window.innerWidth||K+U.width>Y.right){const z=ne.left-U.width-O;K=(z<0?O:z)+window.pageXOffset}P.style.left=`${K+window.pageXOffset}px`;let G=ne.top;if(G+U.height>window.innerHeight){const z=ne.bottom-U.height;G=(z<0?O:z)+window.pageYOffset}P.style.top=`${G+ +window.pageYOffset}px`}},[r,i,s]),b.useEffect(()=>{function W(P){i.current!=null&&r.current!=null&&!i.current.contains(P.target)&&!r.current.contains(P.target)&&n(!1)}return window.addEventListener("click",W),()=>window.removeEventListener("click",W)},[n,r]);const C=b.useCallback(()=>{s.update(()=>{if(l.isAttached()){const P=At(l),H=s.getElementByKey(P.getKey());if(!H)throw new Error("Expected to find tableElement in DOM");const Y=gl(H);Y!==null&&Y.$clearHighlight(),P.markDirty(),a(l.getLatest())}fe().selectStart()})},[s,l]),k=()=>{s.update(()=>{const W=F();if(ae(W)){const{columns:P,rows:H}=$i(W),Y=W.getNodes();let ne=null;for(let U=0;U<Y.length;U++){const O=Y[U];if(V(O))if(ne===null){O.setColSpan(P).setRowSpan(H),ne=O;const K=nd(O);let G;K&&dt(G=O.getFirstChild())&&G.remove()}else V(ne)&&(nd(O)||ne.append(...O.getChildren()),O.remove())}ne!==null&&(ne.getChildrenSize()===0&&ne.append(ee()),_0(ne)),t()}})},w=()=>{s.update(()=>{Qy()})},v=b.useCallback(W=>{s.update(()=>{ph(W),t()})},[s,t]),N=b.useCallback(W=>{s.update(()=>{for(let P=0;P<c.columns;P++)mh(W);t()})},[s,t,c.columns]),S=b.useCallback(()=>{s.update(()=>{Gy(),t()})},[s,t]),T=b.useCallback(()=>{s.update(()=>{At(l).remove(),C(),t()})},[s,l,C,t]),A=b.useCallback(()=>{s.update(()=>{Yy(),t()})},[s,t]),M=b.useCallback(()=>{s.update(()=>{const W=At(l),P=Aa(l),H=W.getChildren();if(P>=H.length||P<0)throw new Error("Expected table cell to be inside of table row.");const Y=H[P];if(!Ce(Y))throw new Error("Expected table row");const ne=l.getHeaderStyles()^ve.ROW;Y.getChildren().forEach(U=>{if(!V(U))throw new Error("Expected table cell");U.setHeaderStyles(ne,ve.ROW)}),C(),t()})},[s,l,C,t]),L=b.useCallback(()=>{s.update(()=>{const W=At(l),P=gh(l),H=W.getChildren(),Y=Math.max(...H.map(U=>U.getChildren().length));if(P>=Y||P<0)throw new Error("Expected table cell to be inside of table row.");const ne=l.getHeaderStyles()^ve.COLUMN;for(let U=0;U<H.length;U++){const O=H[U];if(!Ce(O))throw new Error("Expected table row");const K=O.getChildren();if(P>=K.length)continue;const G=K[P];if(!V(G))throw new Error("Expected table cell");G.setHeaderStyles(ne,ve.COLUMN)}C(),t()})},[s,l,C,t]),I=b.useCallback(()=>{s.update(()=>{if(l.isAttached()){const W=At(l);W&&W.setRowStriping(!W.getRowStriping())}C(),t()})},[s,l,C,t]),j=b.useCallback(W=>{s.update(()=>{const P=F();if(E(P)||ae(P)){const[H]=Oe(P.anchor);if(V(H)&&H.setBackgroundColor(W),ae(P)){const Y=P.getNodes();for(let ne=0;ne<Y.length;ne++){const U=Y[ne];V(U)&&U.setBackgroundColor(W)}}}})},[s]);let B=null;return o&&(h?B=p.jsx(it,{onSelect:()=>k(),children:"Merge cells"}):m&&(B=p.jsx(it,{onSelect:()=>w(),children:"Unmerge cells"}))),p.jsxs(p.Fragment,{children:[d,p.jsx(h0,{children:p.jsx(g0,{children:p.jsxs(p0,{children:[B,p.jsxs(it,{className:"flex justify-between",children:["Background color",p.jsx(Wa,{color:y,onChange:j,icon:p.jsx(Td,{className:"size-4"})})]}),p.jsx(it,{onSelect:()=>I(),children:"Toggle row striping"}),p.jsx($o,{}),p.jsxs(it,{onSelect:()=>v(!1),children:["Insert"," ",c.rows===1?"row":`${c.rows} rows`," ","above"]}),p.jsxs(it,{onSelect:()=>v(!0),children:["Insert"," ",c.rows===1?"row":`${c.rows} rows`," ","below"]}),p.jsx($o,{}),p.jsxs(it,{onSelect:()=>N(!1),children:["Insert"," ",c.columns===1?"column":`${c.columns} columns`," ","left"]}),p.jsxs(it,{onSelect:()=>N(!0),children:["Insert"," ",c.columns===1?"column":`${c.columns} columns`," ","right"]}),p.jsx($o,{}),p.jsx(it,{onSelect:()=>A(),children:"Delete column"}),p.jsx(it,{onSelect:()=>S(),children:"Delete row"}),p.jsx(it,{onSelect:()=>T(),children:"Delete table"}),p.jsx($o,{}),p.jsxs(it,{onSelect:()=>M(),children:[(l.__headerState&ve.ROW)===ve.ROW?"Remove":"Add"," ","row header"]}),p.jsxs(it,{onSelect:()=>L(),children:[(l.__headerState&ve.COLUMN)===ve.COLUMN?"Remove":"Add"," ","column header"]})]})})})]})}function x0({anchorElem:t,cellMerge:e}){const[n]=ie(),r=b.useRef(null),o=b.useRef(null),[s,i]=b.useState(!1),[l,a]=b.useState(null),c=b.useCallback(()=>{const d=r.current,f=F(),h=window.getSelection(),g=document.activeElement;if(f==null||d==null){a(null);return}const m=n.getRootElement();if(E(f)&&m!==null&&h!==null&&m.contains(h.anchorNode)){const _=Uy(f.anchor.getNode());if(_==null){a(null);return}if(n.getElementByKey(_.getKey())==null){a(null);return}a(_)}else g||a(null)},[n]);b.useEffect(()=>n.registerUpdateListener(()=>{n.getEditorState().read(()=>{c()})})),b.useEffect(()=>{const d=r.current;if(d!=null&&l!=null){const f=n.getElementByKey(l.getKey());if(f!=null){const h=f.getBoundingClientRect(),g=d.getBoundingClientRect(),m=t.getBoundingClientRect(),_=h.top-m.top+4,y=h.right-g.width-10-m.left;d.style.opacity="1",d.style.transform=`translate(${y}px, ${_}px)`}else d.style.opacity="0",d.style.transform="translate(-10000px, -10000px)"}},[r,l,n,t]);const u=b.useRef(l);return b.useEffect(()=>{u.current!==l&&i(!1),u.current=l},[u,l]),p.jsx("div",{className:"table-cell-action-button-container absolute top-0 will-change-transform",ref:r,children:l!=null&&p.jsxs(yd,{open:s,onOpenChange:i,children:[p.jsx(xd,{asChild:!0,children:p.jsx("button",{type:"button",className:"relative flex inline-block cursor-pointer items-center justify-center bg-none",onClick:d=>{d.stopPropagation(),i(!s)},ref:o,children:p.jsx(gs,{className:"h-4 w-4"})})}),p.jsx(bd,{className:"w-[200px] p-0",children:p.jsx(y0,{contextRef:o,setIsMenuOpen:i,onClose:()=>i(!1),tableCellNode:l,cellMerge:e})})]})})}function b0({anchorElem:t,cellMerge:e=!1}){const n=ho();return t?Cn.createPortal(n?p.jsx(x0,{anchorElem:t,cellMerge:e}):null,t):null}var C0=typeof global=="object"&&global&&global.Object===Object&&global,v0=typeof self=="object"&&self&&self.Object===Object&&self,tg=C0||v0||Function("return this")(),ds=tg.Symbol,ng=Object.prototype,S0=ng.hasOwnProperty,w0=ng.toString,wr=ds?ds.toStringTag:void 0;function T0(t){var e=S0.call(t,wr),n=t[wr];try{t[wr]=void 0;var r=!0}catch{}var o=w0.call(t);return r&&(e?t[wr]=n:delete t[wr]),o}var k0=Object.prototype,N0=k0.toString;function E0(t){return N0.call(t)}var $0="[object Null]",A0="[object Undefined]",od=ds?ds.toStringTag:void 0;function O0(t){return t==null?t===void 0?A0:$0:od&&od in Object(t)?T0(t):E0(t)}function F0(t){return t!=null&&typeof t=="object"}var M0="[object Symbol]";function R0(t){return typeof t=="symbol"||F0(t)&&O0(t)==M0}var L0=/\s/;function I0(t){for(var e=t.length;e--&&L0.test(t.charAt(e)););return e}var j0=/^\s+/;function D0(t){return t&&t.slice(0,I0(t)+1).replace(j0,"")}function Al(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var sd=NaN,P0=/^[-+]0x[0-9a-f]+$/i,z0=/^0b[01]+$/i,B0=/^0o[0-7]+$/i,K0=parseInt;function id(t){if(typeof t=="number")return t;if(R0(t))return sd;if(Al(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Al(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=D0(t);var n=z0.test(t);return n||B0.test(t)?K0(t.slice(2),n?2:8):P0.test(t)?sd:+t}var Ai=function(){return tg.Date.now()},W0="Expected a function",U0=Math.max,H0=Math.min;function J0(t,e,n){var r,o,s,i,l,a,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(W0);e=id(e)||0,Al(n)&&(u=!!n.leading,d="maxWait"in n,s=d?U0(id(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(v){var N=r,S=o;return r=o=void 0,c=v,i=t.apply(S,N),i}function g(v){return c=v,l=setTimeout(y,e),u?h(v):i}function m(v){var N=v-a,S=v-c,T=e-N;return d?H0(T,s-S):T}function _(v){var N=v-a,S=v-c;return a===void 0||N>=e||N<0||d&&S>=s}function y(){var v=Ai();if(_(v))return x(v);l=setTimeout(y,m(v))}function x(v){return l=void 0,f&&r?h(v):(r=o=void 0,i)}function C(){l!==void 0&&clearTimeout(l),c=0,r=a=o=l=void 0}function k(){return l===void 0?i:x(Ai())}function w(){var v=Ai(),N=_(v);if(r=arguments,o=this,a=v,N){if(l===void 0)return g(a);if(d)return clearTimeout(l),l=setTimeout(y,e),h(a)}return l===void 0&&(l=setTimeout(y,e)),i}return w.cancel=C,w.flush=k,w}function V0(t,e,n){const r=b.useRef(null);return r.current=t,b.useMemo(()=>J0((...o)=>{r.current&&r.current(...o)},e,{maxWait:n}),[e,n])}const ld=20;function G0({anchorElem:t}){const[e]=ie(),n=ho(),[r,o]=b.useState(!1),[s,i]=b.useState(!1),[l,a]=b.useState(!1),[c,u]=b.useState({}),d=b.useRef(new Set),f=b.useRef(null),h=V0(_=>{const{isOutside:y,tableDOMNode:x}=q0(_);if(y){o(!1),i(!1);return}if(!x)return;f.current=x;let C=null,k=null,w=null;if(e.update(()=>{var N;const v=Ne(x);if(V(v)){const S=oe(v,T=>Se(T));if(!Se(S))return;if(w=e.getElementByKey(S==null?void 0:S.getKey()),w){const T=S.getChildrenSize(),A=(N=S.getChildAtIndex(0))==null?void 0:N.getChildrenSize(),M=Aa(v),L=gh(v);M===T-1?C=v:L===A-1&&(k=v)}}}),w){const{width:v,y:N,right:S,left:T,bottom:A,height:M}=w.getBoundingClientRect(),{y:L,left:I}=t.getBoundingClientRect();C?(i(!1),o(!0),u({height:ld,left:T-I,top:A-L+5,width:v})):k&&(i(!0),o(!1),u({height:M,left:S-I+5,top:N-L,width:ld}))}},50,250),g=b.useMemo(()=>new ResizeObserver(()=>{o(!1),i(!1)}),[]);b.useEffect(()=>{if(l)return document.addEventListener("mousemove",h),()=>{o(!1),i(!1),h.cancel(),document.removeEventListener("mousemove",h)}},[l,h]),b.useEffect(()=>He(e.registerMutationListener(Ct,_=>{e.getEditorState().read(()=>{for(const[y,x]of Array.from(_)){const C=e.getElementByKey(y);switch(x){case"created":d.current.add(y),a(d.current.size>0),C&&g.observe(C);break;case"destroyed":d.current.delete(y),a(d.current.size>0),g.disconnect(),d.current.forEach(k=>{const w=e.getElementByKey(k);w&&g.observe(w)});break}}})},{skipInitialization:!1})),[e,g]);const m=_=>{e.update(()=>{if(f.current){const y=Ne(f.current);y==null||y.selectEnd(),_?(ph(),o(!1)):(mh(),i(!1))}})};return n?p.jsxs(p.Fragment,{children:[r&&p.jsx("button",{className:"EditorTheme__tableAddRows bg-accent hover:bg-accent/80 absolute flex w-[calc(100%-25px)] cursor-pointer items-center justify-center border-0",style:{...c},onClick:()=>m(!0),children:p.jsx(Ga,{className:"h-4 w-4"})}),s&&p.jsx("button",{className:"EditorTheme__tableAddColumns bg-accent hover:bg-accent/80 absolute flex w-[calc(100%-25px)] cursor-pointer items-center justify-center border-0",style:{...c},onClick:()=>m(!1),children:p.jsx(Ga,{className:"h-4 w-4"})})]}):null}function q0(t){const e=t.target;if(e&&e instanceof HTMLElement){const n=e.closest("td.EditorTheme__tableCell, th.EditorTheme__tableCell");return{isOutside:!(n||e.closest("button.EditorTheme__tableAddRows")||e.closest("button.EditorTheme__tableAddColumns")||e.closest("div.TableCellResizer__resizer")),tableDOMNode:n}}else return{isOutside:!0,tableDOMNode:null}}function Y0({anchorElem:t}){const e=ho();return t&&e?Cn.createPortal(p.jsx(G0,{anchorElem:t}),t):null}const X0=33,ad=92;function Z0({editor:t}){const e=b.useRef(null),n=b.useRef(null),r=b.useRef(null),o=b.useRef(null),[s,i]=b.useState(null),[l,a]=b.useState(null),[c,u]=b.useState(!1),[d,f]=b.useState(null),h=b.useCallback(()=>{a(null),e.current=null,f(null),o.current=null,r.current=null},[]),g=S=>(S.buttons&1)===1;b.useEffect(()=>t.registerNodeTransform(Ct,S=>{if(S.getColWidths())return S;const T=S.getColumnCount(),A=ad;return S.setColWidths(Array(T).fill(A)),S}),[t]),b.useEffect(()=>{const S=L=>{setTimeout(()=>{const I=L.target;if(d){i({x:L.clientX,y:L.clientY});return}if(u(g(L)),!(n.current&&n.current.contains(I))&&e.current!==I){e.current=I;const j=Jr(I);j&&l!==j?t.update(()=>{const B=Ne(j.elem);if(!B)throw new Error("TableCellResizer: Table cell node not found.");const W=At(B),P=t.getElementByKey(W.getKey());if(!P)throw new Error("TableCellResizer: Table element not found.");e.current=I,r.current=P.getBoundingClientRect(),a(j)}):j==null&&h()}},0)},T=L=>{setTimeout(()=>{u(!0)},0)},A=L=>{setTimeout(()=>{u(!1)},0)},M=t.registerRootListener((L,I)=>{I==null||I.removeEventListener("mousemove",S),I==null||I.removeEventListener("mousedown",T),I==null||I.removeEventListener("mouseup",A),L==null||L.addEventListener("mousemove",S),L==null||L.addEventListener("mousedown",T),L==null||L.addEventListener("mouseup",A)});return()=>{M()}},[l,d,t,h]);const m=S=>S==="bottom",_=b.useCallback(S=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{const T=Ne(l.elem);if(!V(T))throw new Error("TableCellResizer: Table cell node not found.");const A=At(T),M=Aa(T)+T.getRowSpan()-1,L=A.getChildren();if(M>=L.length||M<0)throw new Error("Expected table cell to be inside of table row.");const I=L[M];if(!Ce(I))throw new Error("Expected table row");let j=I.getHeight();if(j===void 0){const W=I.getChildren();j=Math.min(...W.map(P=>y(P,t)??1/0))}const B=Math.max(j+S,X0);I.setHeight(B)},{tag:"skip-scroll-into-view"})},[l,t]),y=(S,T)=>{const A=T.getElementByKey(S.getKey());return A==null?void 0:A.clientHeight},x=(S,T)=>{for(let A=0;A<T.length;A++)for(let M=0;M<T[A].length;M++)if(T[A][M].cell===S)return M},C=b.useCallback(S=>{if(!l)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{const T=Ne(l.elem);if(!V(T))throw new Error("TableCellResizer: Table cell node not found.");const A=At(T),[M]=Bt(A,null,null),L=x(T,M);if(L===void 0)throw new Error("TableCellResizer: Table column not found.");const I=A.getColWidths();if(!I)return;const j=I[L];if(j===void 0)return;const B=[...I],W=Math.max(j+S,ad);B[L]=W,A.setColWidths(B)},{tag:"skip-scroll-into-view"})},[l,t]),k=b.useCallback(S=>{const T=A=>{if(A.preventDefault(),A.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");if(o.current){const{x:M,y:L}=o.current;if(l===null)return;const I=Xt(A.target);if(m(S)){const j=(A.clientY-L)/I;_(j)}else{const j=(A.clientX-M)/I;C(j)}h(),document.removeEventListener("mouseup",T)}};return T},[l,h,C,_]),w=b.useCallback(S=>T=>{if(T.preventDefault(),T.stopPropagation(),!l)throw new Error("TableCellResizer: Expected active cell.");o.current={x:T.clientX,y:T.clientY},i(o.current),f(S),document.addEventListener("mouseup",k(S))},[l,k]),N=b.useCallback(()=>{if(l){const{height:S,width:T,top:A,left:M}=l.elem.getBoundingClientRect(),L=Xt(l.elem),I=10,j={bottom:{backgroundColor:"none",cursor:"row-resize",height:`${I}px`,left:`${window.pageXOffset+M}px`,top:`${window.pageYOffset+A+S-I/2}px`,width:`${T}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${S}px`,left:`${window.pageXOffset+M+T-I/2}px`,top:`${window.pageYOffset+A}px`,width:`${I}px`}},B=r.current;return d&&s&&B&&(m(d)?(j[d].left=`${window.pageXOffset+B.left}px`,j[d].top=`${window.pageYOffset+s.y/L}px`,j[d].height="3px",j[d].width=`${B.width}px`):(j[d].top=`${window.pageYOffset+B.top}px`,j[d].left=`${window.pageXOffset+s.x/L}px`,j[d].width="3px",j[d].height=`${B.height}px`),j[d].backgroundColor="#adf"),j}return{bottom:null,left:null,right:null,top:null}},[l,d,s])();return p.jsx("div",{ref:n,children:l!=null&&!c&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"TableCellResizer__ui absolute",style:N.right||void 0,onMouseDown:w("right")}),p.jsx("div",{className:"TableCellResizer__ui absolute",style:N.bottom||void 0,onMouseDown:w("bottom")})]})})}function Q0(){const[t]=ie(),e=ho(),[n,r]=b.useState(null);return b.useEffect(()=>{r(document.body)},[]),b.useMemo(()=>e&&n?Cn.createPortal(p.jsx(Z0,{editor:t}),n):null,[t,e,n])}let Oi=null;function ev(){return window.TextEncoder===void 0?null:(Oi===null&&(Oi=new window.TextEncoder),Oi)}function tv(t){const e=ev();if(e===null){const n=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(n?n.length:0)}return e.encode(t).length}const cd=(t,e)=>{if(e==="UTF-8")return tv(t);if(e==="UTF-16")return t.length},ud=t=>t.split(/\s+/).filter(e=>e.length>0).length;function nv({charset:t="UTF-16"}){const[e]=ie(),[n,r]=b.useState(()=>{const o=e.getEditorState().read(Rh);return{characters:cd(o,t),words:ud(o)}});return b.useEffect(()=>e.registerTextContentListener(o=>{r({characters:cd(o,t),words:ud(o)})}),[e,t]),p.jsxs("div",{className:"flex gap-2 text-xs whitespace-nowrap text-gray-500",children:[p.jsxs("p",{children:[n.characters," characters"]}),"|",p.jsxs("p",{children:[n.words," words"]})]})}class rg{constructor(e,n){this._x=e,this._y=n}get x(){return this._x}get y(){return this._y}equals({x:e,y:n}){return this.x===e&&this.y===n}calcDeltaXTo({x:e}){return this.x-e}calcDeltaYTo({y:e}){return this.y-e}calcHorizontalDistanceTo(e){return Math.abs(this.calcDeltaXTo(e))}calcVerticalDistance(e){return Math.abs(this.calcDeltaYTo(e))}calcDistanceTo(e){return Math.sqrt(Math.pow(this.calcDeltaXTo(e),2)+Math.pow(this.calcDeltaYTo(e),2))}}class pn{constructor(e,n,r,o){const[s,i]=n<=o?[n,o]:[o,n],[l,a]=e<=r?[e,r]:[r,e];this._top=s,this._right=a,this._left=l,this._bottom=i}get top(){return this._top}get right(){return this._right}get bottom(){return this._bottom}get left(){return this._left}get width(){return Math.abs(this._left-this._right)}get height(){return Math.abs(this._bottom-this._top)}equals({top:e,left:n,bottom:r,right:o}){return e===this._top&&r===this._bottom&&n===this._left&&o===this._right}contains(e){if(e instanceof rg){const{x:n,y:r}=e,o=r<this._top,s=r>this._bottom,i=n<this._left,l=n>this._right;return{reason:{isOnBottomSide:s,isOnLeftSide:i,isOnRightSide:l,isOnTopSide:o},result:!(o||s||i||l)}}{const{top:n,left:r,bottom:o,right:s}=e;return n>=this._top&&n<=this._bottom&&o>=this._top&&o<=this._bottom&&r>=this._left&&r<=this._right&&s>=this._left&&s<=this._right}}intersectsWith(e){const{left:n,top:r,width:o,height:s}=e,{left:i,top:l,width:a,height:c}=this;return(n+o>=i+a?n+o:i+a)-(n<=i?n:i)<=o+a&&(r+s>=l+c?r+s:l+c)-(r<=l?r:l)<=s+c}generateNewRect({left:e=this.left,top:n=this.top,right:r=this.right,bottom:o=this.bottom}){return new pn(e,n,r,o)}static fromLTRB(e,n,r,o){return new pn(e,n,r,o)}static fromLWTH(e,n,r,o){return new pn(e,r,e+n,r+o)}static fromPoints(e,n){const{y:r,x:o}=e,{y:s,x:i}=n;return pn.fromLTRB(o,r,i,s)}static fromDOM(e){const{top:n,width:r,left:o,height:s}=e.getBoundingClientRect();return pn.fromLWTH(o,r,n,s)}}const Fi=4,rv=2,dd="application/x-lexical-drag-block",fd=28,ov=1,sv=-1,hd=0;let Ao=1/0;function og(t){const e=(l,a)=>l?parseFloat(window.getComputedStyle(l)[a]):0,{marginTop:n,marginBottom:r}=window.getComputedStyle(t),o=e(t.previousElementSibling,"marginBottom"),s=e(t.nextElementSibling,"marginTop"),i=Math.max(parseFloat(n),o);return{marginBottom:Math.max(parseFloat(r),s),marginTop:i}}function Mi(t,e,n,r=!1){const o=t.getBoundingClientRect(),s=function(l){return l.getEditorState().read(()=>fe().getChildrenKeys())}(e);let i=null;return e.getEditorState().read(()=>{if(r){const[u,d]=[e.getElementByKey(s[0]),e.getElementByKey(s[s.length-1])],[f,h]=[u!=null?u.getBoundingClientRect():void 0,d!=null?d.getBoundingClientRect():void 0];if(f&&h){const g=Xt(u),m=Xt(d);if(n.y/g<f.top?i=u:n.y/m>h.bottom&&(i=d),i)return}}let l=(a=s.length)===0?1/0:Ao>=0&&Ao<a?Ao:Math.floor(a/2);var a;let c=hd;for(;l>=0&&l<s.length;){const u=s[l],d=e.getElementByKey(u);if(d===null)break;const f=Xt(d),h=new rg(n.x/f,n.y/f),g=pn.fromDOM(d),{marginTop:m,marginBottom:_}=og(d),y=g.generateNewRect({bottom:g.bottom+_,left:o.left,right:o.right,top:g.top-m}),{result:x,reason:{isOnTopSide:C,isOnBottomSide:k}}=y.contains(h);if(x){i=d,Ao=l;break}c===hd&&(c=C?sv:k?ov:1/0),l+=c}}),i}function iv(t,e,n,r,o,s,i,l,a){const c=e.parentElement,u=b.useRef(!1),[d,f]=b.useState(null),h=b.useCallback(g=>{f(g),a&&a(g)},[a]);return b.useEffect(()=>{function g(_){const y=_.target;if(!ge(y))return void h(null);if(l(y))return;const x=Mi(e,t,_);h(x)}function m(){h(null)}return c!=null&&(c.addEventListener("mousemove",g),c.addEventListener("mouseleave",m)),()=>{c!=null&&(c.removeEventListener("mousemove",g),c.removeEventListener("mouseleave",m))}},[c,e,t,l,h]),b.useEffect(()=>{n.current&&function(g,m,_){if(!g)return m.style.opacity="0",void(m.style.transform="translate(-10000px, -10000px)");const y=g.getBoundingClientRect(),x=window.getComputedStyle(g),C=m.getBoundingClientRect(),k=_.getBoundingClientRect();let w=parseInt(x.lineHeight,10);isNaN(w)&&(w=y.bottom-y.top);const v=y.top+(w-C.height)/2-k.top+_.scrollTop,N=Fi;m.style.opacity="1",m.style.transform=`translate(${N}px, ${v}px)`}(d,n.current,e)},[e,d,n]),b.useEffect(()=>{function g(m){if(!u.current)return!1;const[_]=Vn(m);if(_)return!1;const{pageY:y,target:x}=m;if(!ge(x))return!1;const C=Mi(e,t,m,!0),k=r.current;return C!==null&&k!==null&&(function(w,v,N,S){const{top:T,height:A}=v.getBoundingClientRect(),{top:M,width:L}=S.getBoundingClientRect(),{marginTop:I,marginBottom:j}=og(v);let B=T;N>=T?B+=A+j/2:B-=I/2;const W=B-M-rv+S.scrollTop,P=fd-Fi;w.style.transform=`translate(${P}px, ${W}px)`,w.style.width=L-2*(fd-Fi)+"px",w.style.opacity=".4"}(k,C,y/Xt(x),e),m.preventDefault(),!0)}return He(t.registerCommand(ks,m=>g(m),Ge),t.registerCommand(Ts,m=>function(_){if(!u.current)return!1;const[y]=Vn(_);if(y)return!1;const{target:x,dataTransfer:C,pageY:k}=_,w=C!=null?C.getData(dd):"",v=we(w);if(!v||!ge(x))return!1;const N=Mi(e,t,_,!0);if(!N)return!1;const S=Ne(N);if(!S)return!1;if(S===v)return!0;const T=N.getBoundingClientRect().top;return k/Xt(x)>=T?S.insertAfter(v):S.insertBefore(v),h(null),!0}(m),Zn))},[e,t,r,h]),Cn.createPortal(p.jsxs(p.Fragment,{children:[p.jsx("div",{draggable:!0,onDragStart:function(g){const m=g.dataTransfer;if(!m||!d)return;(function(y,x){const{transform:C}=x.style;x.style.transform="translateZ(0)",y.setDragImage(x,0,0),setTimeout(()=>{x.style.transform=C})})(m,d);let _="";t.update(()=>{const y=Ne(d);y&&(_=y.getKey())}),u.current=!0,m.setData(dd,_)},onDragEnd:function(){var g;u.current=!1,(g=r.current)&&(g.style.opacity="0",g.style.transform="translate(-10000px, -10000px)")},children:o&&s}),i]}),e)}function lv({anchorElem:t=document.body,menuRef:e,targetLineRef:n,menuComponent:r,targetLineComponent:o,isOnMenu:s,onElementChanged:i}){const[l]=ie();return iv(l,t,e,n,l._editable,r,o,s,i)}const av="draggable-block-menu";function cv(t){return!!t.closest(`.${av}`)}function uv({anchorElem:t}){const e=b.useRef(null),n=b.useRef(null);return t?p.jsx(lv,{anchorElem:t,menuRef:e,targetLineRef:n,menuComponent:p.jsx("div",{ref:e,className:"draggable-block-menu absolute top-0 left-0 cursor-grab rounded-sm px-[1px] py-0.5 opacity-0 will-change-transform hover:bg-gray-100 active:cursor-grabbing",children:p.jsx(Wg,{className:"size-4 opacity-30"})}),targetLineComponent:p.jsx("div",{ref:n,className:"bg-secondary-foreground pointer-events-none absolute top-0 left-0 h-1 opacity-0 will-change-transform"}),isOnMenu:cv}):null}function dv(t,e){const n=t.getRangeAt(0);let r;if(t.anchorNode===e){let o=e;for(;o.firstElementChild!=null;)o=o.firstElementChild;r=o.getBoundingClientRect()}else r=n.getBoundingClientRect();return r}const fv=10,hv=5;function gv(t,e,n,r=!1,o=fv,s=hv){const i=n.parentElement;if(t===null||!i){e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)";return}const l=e.getBoundingClientRect(),a=n.getBoundingClientRect(),c=i.getBoundingClientRect();let u=t.top-l.height-o,d=t.left-s;u<c.top&&(u+=l.height+t.height+o*(r?9:2)),d+l.width>c.right&&(d=c.right-l.width-s),u-=a.top,d-=a.left,e.style.opacity="1",e.style.transform=`translate(${d}px, ${u}px)`}var sg="Toggle",ig=b.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...s}=t,[i,l]=Ll({prop:n,onChange:o,defaultProp:r??!1,caller:sg});return p.jsx(yt.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0,...s,ref:e,onClick:Ug(t.onClick,()=>{t.disabled||l(!i)})})});ig.displayName=sg;var ln="ToggleGroup",[lg,gS]=Hg(ln,[vd]),ag=vd(),Ja=be.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const o=r;return p.jsx(pv,{...o,ref:e})}if(n==="multiple"){const o=r;return p.jsx(mv,{...o,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${ln}\``)});Ja.displayName=ln;var[cg,ug]=lg(ln),pv=be.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=t,[i,l]=Ll({prop:n,defaultProp:r??"",onChange:o,caller:ln});return p.jsx(cg,{scope:t.__scopeToggleGroup,type:"single",value:be.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:be.useCallback(()=>l(""),[l]),children:p.jsx(dg,{...s,ref:e})})}),mv=be.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=t,[i,l]=Ll({prop:n,defaultProp:r??[],onChange:o,caller:ln}),a=be.useCallback(u=>l((d=[])=>[...d,u]),[l]),c=be.useCallback(u=>l((d=[])=>d.filter(f=>f!==u)),[l]);return p.jsx(cg,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:a,onItemDeactivate:c,children:p.jsx(dg,{...s,ref:e})})});Ja.displayName=ln;var[_v,yv]=lg(ln),dg=be.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:s,dir:i,loop:l=!0,...a}=t,c=ag(n),u=Gg(i),d={role:"group",dir:u,...a};return p.jsx(_v,{scope:n,rovingFocus:o,disabled:r,children:o?p.jsx(Vg,{asChild:!0,...c,orientation:s,dir:u,loop:l,children:p.jsx(yt.div,{...d,ref:e})}):p.jsx(yt.div,{...d,ref:e})})}),fs="ToggleGroupItem",fg=be.forwardRef((t,e)=>{const n=ug(fs,t.__scopeToggleGroup),r=yv(fs,t.__scopeToggleGroup),o=ag(t.__scopeToggleGroup),s=n.value.includes(t.value),i=r.disabled||t.disabled,l={...t,pressed:s,disabled:i},a=be.useRef(null);return r.rovingFocus?p.jsx(Jg,{asChild:!0,...o,focusable:!i,active:s,ref:a,children:p.jsx(gd,{...l,ref:e})}):p.jsx(gd,{...l,ref:e})});fg.displayName=fs;var gd=be.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...o}=t,s=ug(fs,n),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=s.type==="single"?i:void 0;return p.jsx(ig,{...l,...o,ref:e,onPressedChange:a=>{a?s.onItemActivate(r):s.onItemDeactivate(r)}})}),xv=Ja,bv=fg;const Cv=wg("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),hg=b.createContext({size:"default",variant:"default"});function pd({className:t,variant:e,size:n,children:r,...o}){return p.jsx(xv,{"data-slot":"toggle-group","data-variant":e,"data-size":n,className:Ln("group/toggle-group flex items-center rounded-md data-[variant=outline]:shadow-xs",t),...o,children:p.jsx(hg.Provider,{value:{variant:e,size:n},children:r})})}function un({className:t,children:e,variant:n,size:r,...o}){const s=b.useContext(hg);return p.jsx(bv,{"data-slot":"toggle-group-item","data-variant":s.variant||n,"data-size":s.size||r,className:Ln(Cv({variant:s.variant||n,size:s.size||r}),"min-w-0 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...o,children:e})}function vv({editor:t,anchorElem:e,isLink:n,isBold:r,isItalic:o,isUnderline:s,isCode:i,isStrikethrough:l,isSubscript:a,isSuperscript:c,setIsLinkEditMode:u}){const d=b.useRef(null);b.useCallback(()=>{n?(u(!1),t.dispatchCommand(rl,null)):(u(!0),t.dispatchCommand(rl,"https://"))},[t,n,u]);function f(m){if(d!=null&&d.current&&(m.buttons===1||m.buttons===3)&&d.current.style.pointerEvents!=="none"){const _=m.clientX,y=m.clientY,x=document.elementFromPoint(_,y);d.current.contains(x)||(d.current.style.pointerEvents="none")}}function h(m){d!=null&&d.current&&d.current.style.pointerEvents!=="auto"&&(d.current.style.pointerEvents="auto")}b.useEffect(()=>{if(d!=null&&d.current)return document.addEventListener("mousemove",f),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h)}},[d]);const g=b.useCallback(()=>{const m=F(),_=d.current,y=window.getSelection();if(_===null)return;const x=t.getRootElement();if(m!==null&&y!==null&&!y.isCollapsed&&x!==null&&x.contains(y.anchorNode)){const C=dv(y,x);gv(C,_,e,n)}},[t,e,n]);return b.useEffect(()=>{const m=e.parentElement,_=()=>{t.getEditorState().read(()=>{g()})};return window.addEventListener("resize",_),m&&m.addEventListener("scroll",_),()=>{window.removeEventListener("resize",_),m&&m.removeEventListener("scroll",_)}},[t,g,e]),b.useEffect(()=>(t.getEditorState().read(()=>{g()}),He(t.registerUpdateListener(({editorState:m})=>{m.read(()=>{g()})}),t.registerCommand(tt,()=>(g(),!1),Ge))),[t,g]),p.jsx("div",{ref:d,className:"bg-background absolute top-0 left-0 z-10 flex gap-1 rounded-md border p-1 opacity-0 shadow-md transition-opacity duration-300 will-change-transform",children:t.isEditable()&&p.jsxs(p.Fragment,{children:[p.jsxs(pd,{type:"multiple",defaultValue:[r?"bold":"",o?"italic":"",s?"underline":"",l?"strikethrough":"",a?"subscript":"",c?"superscript":"",i?"code":"",n?"link":""],children:[p.jsx(un,{value:"bold","aria-label":"Toggle bold",onClick:()=>{t.dispatchCommand(Ke,"bold")},size:"sm",children:p.jsx(Sd,{className:"h-4 w-4"})}),p.jsx(un,{value:"italic","aria-label":"Toggle italic",onClick:()=>{t.dispatchCommand(Ke,"italic")},size:"sm",children:p.jsx(wd,{className:"h-4 w-4"})}),p.jsx(un,{value:"underline","aria-label":"Toggle underline",onClick:()=>{t.dispatchCommand(Ke,"underline")},size:"sm",children:p.jsx($d,{className:"h-4 w-4"})}),p.jsx(un,{value:"strikethrough","aria-label":"Toggle strikethrough",onClick:()=>{t.dispatchCommand(Ke,"strikethrough")},size:"sm",children:p.jsx(kd,{className:"h-4 w-4"})}),p.jsx(Lr,{orientation:"vertical"}),p.jsx(un,{value:"code","aria-label":"Toggle code",onClick:()=>{t.dispatchCommand(Ke,"code")},size:"sm",children:p.jsx(Cd,{className:"h-4 w-4"})}),p.jsx(Lr,{orientation:"vertical"})]}),p.jsxs(pd,{type:"single",defaultValue:a?"subscript":c?"superscript":"",children:[p.jsx(un,{value:"subscript","aria-label":"Toggle subscript",onClick:()=>{t.dispatchCommand(Ke,"subscript")},size:"sm",children:p.jsx(Nd,{className:"h-4 w-4"})}),p.jsx(un,{value:"superscript","aria-label":"Toggle superscript",onClick:()=>{t.dispatchCommand(Ke,"superscript")},size:"sm",children:p.jsx(Ed,{className:"h-4 w-4"})})]})]})})}function Sv(t,e,n){const[r,o]=b.useState(!1),[s,i]=b.useState(!1),[l,a]=b.useState(!1),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[h,g]=b.useState(!1),[m,_]=b.useState(!1),[y,x]=b.useState(!1),[C,k]=b.useState(!1),w=b.useCallback(()=>{t.getEditorState().read(()=>{if(t.isComposing())return;const v=F(),N=window.getSelection(),S=t.getRootElement();if(N!==null&&(!E(v)||S===null||!S.contains(N.anchorNode))){o(!1);return}if(!E(v))return;const T=Ua(v);a(v.hasFormat("bold")),u(v.hasFormat("italic")),f(v.hasFormat("underline")),g(v.hasFormat("strikethrough")),_(v.hasFormat("subscript")),x(v.hasFormat("superscript")),k(v.hasFormat("code"));const A=T.getParent();On(A)||On(T)?i(!0):i(!1),!Sa(v.anchor.getNode())&&v.getTextContent()!==""?o(R(T)||dt(T)):o(!1);const M=v.getTextContent().replace(/\n/g,"");if(!v.isCollapsed()&&M===""){o(!1);return}})},[t]);return b.useEffect(()=>(document.addEventListener("selectionchange",w),()=>{document.removeEventListener("selectionchange",w)}),[w]),b.useEffect(()=>He(t.registerUpdateListener(()=>{w()}),t.registerRootListener(()=>{t.getRootElement()===null&&o(!1)})),[t,w]),!r||!e?null:Cn.createPortal(p.jsx(vv,{editor:t,anchorElem:e,isLink:s,isBold:l,isItalic:c,isStrikethrough:h,isSubscript:m,isSuperscript:y,isUnderline:d,isCode:C,setIsLinkEditMode:n}),e)}function wv({anchorElem:t}){const[e]=ie(),{setIsLinkEditMode:n}=E_();return Sv(e,t,n)}function Tv(){const[t,e]=b.useState(null),n=r=>{r!==null&&e(r)};return p.jsxs("div",{className:"relative",children:[p.jsx(KC,{}),p.jsxs("div",{className:"relative",children:[p.jsx(Eb,{contentEditable:p.jsx("div",{className:"",children:p.jsx("div",{className:"",ref:n,children:p.jsx(Db,{placeholder:"Start typing...",className:"ContentEditable__root relative block min-h-72 max-h-96 overflow-auto px-8 py-4 focus:outline-none"})})}),ErrorBoundary:sb}),p.jsx(rb,{}),p.jsx(nb,{}),p.jsx(Cb,{}),p.jsx(Fb,{}),p.jsx(vb,{}),p.jsx(Ob,{}),p.jsx(fb,{}),p.jsx(bb,{}),p.jsx(Hb,{}),p.jsx(b0,{anchorElem:t,cellMerge:!0}),p.jsx(Y0,{anchorElem:t}),p.jsx(Q0,{}),p.jsx(uv,{anchorElem:t}),p.jsx(wv,{anchorElem:t}),p.jsx(wb,{transformers:[Mh,...ja,...Da,...Pa,...za]}),p.jsx("div",{className:"flex justify-end p-2 border-t bg-gray-50 dark:bg-gray-800",children:p.jsx(nv,{})})]})]})}function kv({parsedJsonContent:t,htmlContent:e,onConversionComplete:n}){const[r]=ie(),o=b.useRef(!1);return b.useEffect(()=>{if(!o.current){const s=setTimeout(()=>{t?(r.setEditorState(r.parseEditorState(JSON.stringify(t))),o.current=!0):e&&e.trim()!==""?r.update(()=>{const i=fe();i.clear();try{const a=new DOMParser().parseFromString(e,"text/html"),c=ka(r,a);fe().select(),no(c),o.current=!0,n==null||n()}catch(l){console.error("Error converting HTML to Lexical:",l);const a=ee();a.append(ue("")),i.append(a),o.current=!0}}):r.update(()=>{const i=fe();i.clear();const l=ee();l.append(ue("")),i.append(l),o.current=!0})},100);return()=>clearTimeout(s)}},[r,t,e,n]),null}const Nv={namespace:"Editor",theme:k_,nodes:Nx,onError:t=>{console.error(t)}};function Ev({editorState:t,editorSerializedState:e,jsonContent:n,htmlContent:r,onChange:o,onJsonChange:s,onHtmlChange:i,onConversionComplete:l}){const a=b.useMemo(()=>{if(!n)return null;if(typeof n=="object")return n;if(typeof n=="string"&&n.trim()!=="")try{return JSON.parse(n)}catch(c){return console.error("Failed to parse jsonContent:",c),null}return null},[n]);return p.jsx("div",{className:"bg-background overflow-hidden rounded-md",children:p.jsx(S_,{initialConfig:{...Nv,...t?{editorState:t}:{},...e?{editorState:JSON.stringify(e)}:{}},children:p.jsx(Sg,{children:p.jsxs(N_,{children:[p.jsx(Tv,{}),p.jsx(kv,{parsedJsonContent:a,htmlContent:r,onConversionComplete:l}),p.jsx(T_,{ignoreSelectionChange:!0,onChange:(c,u)=>{o==null||o(c),u&&u.read(()=>{const d=JSON.stringify(c.toJSON());s==null||s(d);try{const f=Us(u);i==null||i(f)}catch{}})}})]})})})})}function $v({field:t,value:e,onChange:n,processing:r,errors:o}){const[s,i]=b.useState(void 0),[l,a]=b.useState(void 0),c=b.useRef(void 0),u=b.useRef(null);b.useEffect(()=>{if(e&&typeof e=="object"&&"json"in e){try{i(JSON.stringify(e.json)),u.current=e.json}catch{i(void 0),u.current=null}const g=e.html;a(g),c.current=g;return}if(typeof e=="string"&&e.trim()!==""){const g=e.trim();g.startsWith("{")||g.startsWith("[")?(i(e),c.current=void 0,u.current=(()=>{try{return JSON.parse(e)}catch{return null}})(),a(void 0)):(i(void 0),u.current=null,a(e),c.current=e)}else i(void 0),a(void 0),c.current=void 0,u.current=null},[e]);const d=b.useCallback(()=>{n(t,{json:u.current,html:c.current})},[t,n]),f=b.useCallback(g=>{let m=null;try{m=JSON.parse(g)}catch{m=null}u.current=m,d()},[d]),h=b.useCallback(g=>{a(g),c.current=g,d()},[d]);return p.jsx(vg,{field:t,value:e,onChange:n,processing:r,errors:o,children:p.jsx("div",{className:"rounded-md border border-input",children:p.jsx(Ev,{jsonContent:s,htmlContent:l,onJsonChange:f,onHtmlChange:h},`editor-${t.id}`)})})}const pS=Object.freeze(Object.defineProperty({__proto__:null,default:$v},Symbol.toStringTag,{value:"Module"}));export{Tx as $,Uo as F,Gl as I,ql as K,Xt as M,F as P,$v as R,we as S,Xl as U,E as _,ho as a,ke as b,Ge as c,X as d,_s as e,pS as f,tt as h,He as j,ie as o,vy as u,Re as y,Ss as z};
