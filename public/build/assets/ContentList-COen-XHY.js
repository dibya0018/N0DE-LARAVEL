import{r as i,j as e,u as Be,b as E,a as me,t as y}from"./app-BAYl1HSz.js";import{h as Z}from"./moment-BLMuvzoS.js";import{r as Ye,g as xe}from"./lexical-converter-4eQd3LVe.js";import{c as ze,B as g}from"./button-BUWHkrIo.js";import{B as fe}from"./badge-QMdTmx3v.js";import{u as Ke,c as Ve,a as P}from"./index-D0mva12j.js";import{u as Je,c as qe}from"./utils-CSG-oG7g.js";import{c as we,R as Ze,A as We,C as Ge,a as Xe}from"./index-DU1cekCd.js";import{P as Qe,D as et}from"./Combination-DBQolvko.js";import{P as Ne}from"./index-WjG9McFh.js";import{P as tt}from"./index-DRazXELc.js";import{L as rt}from"./label-cm5VjJbG.js";import{I as st}from"./input-CNhlXZJH.js";import{D as nt,R as je}from"./data-table-DBeixPDt.js";import{D as O,a as H,b as F,c as I,d as $,e as L}from"./dialog-DohomiSb.js";import{S as ge}from"./scroll-area-4-y7N4RV.js";import{R as ot}from"./relation-entries-table-D2aOOuck.js";import{D as at,a as lt,b as it,g as ce}from"./dropdown-menu-zE5wHxoc.js";import{a as ve,b as ye,c as Ce}from"./tooltip-DsY4Q31h.js";import{P as ct}from"./plus-WwBbC7Wx.js";import{T as W}from"./trash-CiO9M-2A.js";import{D as dt}from"./download-DYCYjKDs.js";import{F as G}from"./file-text-CWXDWnWc.js";import{U as be}from"./upload-IcDaw6Sm.js";import{F as ut}from"./folder-BjjgW9yE.js";import{L as pt}from"./link-t6pPAohe.js";import{C as ht}from"./check-B69XlBAf.js";import{X as mt}from"./index-DzNUrV5G.js";import{A as xt}from"./align-center-TgbYJwzI.js";/* empty css            */import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./table-BXEyF7RO.js";import"./pagination-DqjXBUBk.js";import"./chevron-left-CIVxo5Hh.js";import"./chevron-right-D6wPFmnq.js";import"./select-CN0qBbIi.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";import"./index-47IHtonF.js";import"./chevron-down-Cw2QYx2J.js";import"./search-bar-CXlHkVVx.js";import"./checkbox-DM2FAlZO.js";import"./popover-BngHBur4.js";import"./date-picker-B4BjS-4b.js";import"./calendar-CA5vAzoc.js";import"./clock-B4VR18tN.js";import"./format-C_TaVLmE.js";import"./switch-DYMSKvXv.js";import"./loader-circle-GU8JMaLt.js";import"./dnd.esm-Bv3pd172.js";import"./extends-CF3RwP-h.js";import"./index-CDr1GRbl.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],jt=ze("FileSpreadsheet",ft);var de,ee="HoverCard",[Se,kr]=Ve(ee,[we]),te=we(),[gt,re]=Se(ee),De=r=>{const{__scopeHoverCard:l,children:u,open:c,defaultOpen:p,onOpenChange:f,openDelay:C=700,closeDelay:_=300}=r,x=te(l),k=i.useRef(0),j=i.useRef(0),M=i.useRef(!1),v=i.useRef(!1),[b,d]=Ke({prop:c,defaultProp:p??!1,onChange:f,caller:ee}),U=i.useCallback(()=>{clearTimeout(j.current),k.current=window.setTimeout(()=>d(!0),C)},[C,d]),A=i.useCallback(()=>{clearTimeout(k.current),!M.current&&!v.current&&(j.current=window.setTimeout(()=>d(!1),_))},[_,d]),K=i.useCallback(()=>d(!1),[d]);return i.useEffect(()=>()=>{clearTimeout(k.current),clearTimeout(j.current)},[]),e.jsx(gt,{scope:l,open:b,onOpenChange:d,onOpen:U,onClose:A,onDismiss:K,hasSelectionRef:M,isPointerDownOnContentRef:v,children:e.jsx(Ze,{...x,children:u})})};De.displayName=ee;var Re="HoverCardTrigger",Pe=i.forwardRef((r,l)=>{const{__scopeHoverCard:u,...c}=r,p=re(Re,u),f=te(u);return e.jsx(We,{asChild:!0,...f,children:e.jsx(tt.a,{"data-state":p.open?"open":"closed",...c,ref:l,onPointerEnter:P(r.onPointerEnter,Q(p.onOpen)),onPointerLeave:P(r.onPointerLeave,Q(p.onClose)),onFocus:P(r.onFocus,p.onOpen),onBlur:P(r.onBlur,p.onClose),onTouchStart:P(r.onTouchStart,C=>C.preventDefault())})})});Pe.displayName=Re;var ue="HoverCardPortal",[vt,yt]=Se(ue,{forceMount:void 0}),_e=r=>{const{__scopeHoverCard:l,forceMount:u,children:c,container:p}=r,f=re(ue,l);return e.jsx(vt,{scope:l,forceMount:u,children:e.jsx(Ne,{present:u||f.open,children:e.jsx(Qe,{asChild:!0,container:p,children:c})})})};_e.displayName=ue;var X="HoverCardContent",Te=i.forwardRef((r,l)=>{const u=yt(X,r.__scopeHoverCard),{forceMount:c=u.forceMount,...p}=r,f=re(X,r.__scopeHoverCard);return e.jsx(Ne,{present:c||f.open,children:e.jsx(Ct,{"data-state":f.open?"open":"closed",...p,onPointerEnter:P(r.onPointerEnter,Q(f.onOpen)),onPointerLeave:P(r.onPointerLeave,Q(f.onClose)),ref:l})})});Te.displayName=X;var Ct=i.forwardRef((r,l)=>{const{__scopeHoverCard:u,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:f,onInteractOutside:C,..._}=r,x=re(X,u),k=te(u),j=i.useRef(null),M=Je(l,j),[v,b]=i.useState(!1);return i.useEffect(()=>{if(v){const d=document.body;return de=d.style.userSelect||d.style.webkitUserSelect,d.style.userSelect="none",d.style.webkitUserSelect="none",()=>{d.style.userSelect=de,d.style.webkitUserSelect=de}}},[v]),i.useEffect(()=>{if(j.current){const d=()=>{b(!1),x.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var A;((A=document.getSelection())==null?void 0:A.toString())!==""&&(x.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",d),()=>{document.removeEventListener("pointerup",d),x.hasSelectionRef.current=!1,x.isPointerDownOnContentRef.current=!1}}},[x.isPointerDownOnContentRef,x.hasSelectionRef]),i.useEffect(()=>{j.current&&Nt(j.current).forEach(U=>U.setAttribute("tabindex","-1"))}),e.jsx(et,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:C,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:P(f,d=>{d.preventDefault()}),onDismiss:x.onDismiss,children:e.jsx(Ge,{...k,..._,onPointerDown:P(_.onPointerDown,d=>{d.currentTarget.contains(d.target)&&b(!0),x.hasSelectionRef.current=!1,x.isPointerDownOnContentRef.current=!0}),ref:M,style:{..._.style,userSelect:v?"text":void 0,WebkitUserSelect:v?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),bt="HoverCardArrow",wt=i.forwardRef((r,l)=>{const{__scopeHoverCard:u,...c}=r,p=te(u);return e.jsx(Xe,{...p,...c,ref:l})});wt.displayName=bt;function Q(r){return l=>l.pointerType==="touch"?void 0:r()}function Nt(r){const l=[],u=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;u.nextNode();)l.push(u.currentNode);return l}var St=De,Dt=Pe,Rt=_e,Pt=Te;function _t({...r}){return e.jsx(St,{"data-slot":"hover-card",...r})}function Tt({...r}){return e.jsx(Dt,{"data-slot":"hover-card-trigger",...r})}function Et({className:r,align:l="center",sideOffset:u=4,...c}){return e.jsx(Rt,{"data-slot":"hover-card-portal",children:e.jsx(Pt,{"data-slot":"hover-card-content",align:l,sideOffset:u,className:qe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),...c})})}function Ar({collection:r,project:l}){const u=i.useRef(null),[c,p]=i.useState([]),[f,C]=i.useState(!1),[_,x]=i.useState(!1),[k,j]=i.useState(!1),[M,v]=i.useState(!1),[b,d]=i.useState(!1),[U,A]=i.useState(!1),[K,pe]=i.useState(!1),[R,se]=i.useState(null),[N,ne]=i.useState(null),[S,oe]=i.useState(null),[Ee,ke]=i.useState(!1),B=i.useRef(null),Y=Be().props.userCan;i.useEffect(()=>{r.is_singleton&&E.get(`/projects/${l.id}/collections/${r.id}/content/search`,{params:{per_page:1}}).then(s=>{var a;((a=s==null?void 0:s.data)==null?void 0:a.total)!==void 0&&ke(s.data.total>0)}).catch(()=>{})},[r.is_singleton,r.id,l.id]);const Ae=s=>{s.deleted_at===null&&Y.update_content&&me.visit(route("projects.collections.content.edit",{project:l.id,collection:r.id,contentEntry:s.id}))},ae=async s=>{A(!0);try{const a=await E.post(route("projects.collections.content.export",{project:l.id,collection:r.id}),{format:s},{responseType:"blob"}),n=new Blob([a.data],{type:s==="json"?"application/json":s==="csv"?"text/csv":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(n),t=document.createElement("a");t.href=o;const D=s==="json"?"json":s==="csv"?"csv":"xlsx";t.download=`content_${r.slug}_${new Date().toISOString().split("T")[0]}.${D}`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(o),document.body.removeChild(t),y.success(`Content exported as ${s.toUpperCase()}`)}catch(a){y.error("Failed to export content"),console.error(a)}finally{A(!1)}},Oe=async()=>{var a,n,o,t,D;const s=(n=(a=B.current)==null?void 0:a.files)==null?void 0:n[0];if(!s){y.error("Please select a file");return}pe(!0);try{const w=new FormData;w.append("file",s);const h=await E.post(route("projects.collections.content.import",{project:l.id,collection:r.id}),w,{headers:{"Content-Type":"multipart/form-data"}});y.success(`Imported ${h.data.imported} entries`),h.data.errors&&h.data.errors.length>0&&console.warn("Import errors:",h.data.errors),v(!1),B.current&&(B.current.value=""),(o=u.current)==null||o.fetchData()}catch(w){y.error(((D=(t=w.response)==null?void 0:t.data)==null?void 0:D.message)||"Failed to import content"),console.error(w)}finally{pe(!1)}},He=async()=>{var s;d(!0);try{const a=c.map(n=>E.delete(route("projects.collections.content.destroy",{project:l.id,collection:r.id,contentEntry:n.id})));await Promise.all(a),y.success(`${c.length} content entries moved to trash`),p([]),C(!1),(s=u.current)==null||s.fetchData()}catch{y.error("Failed to move content to trash")}finally{d(!1)}},Fe=async()=>{var s;d(!0);try{const a=c.map(n=>E.delete(route("projects.collections.content.forceDestroy",{project:l.id,collection:r.id,contentEntry:n.id})));await Promise.all(a),y.success(`${c.length} content entries permanently deleted`),p([]),x(!1),(s=u.current)==null||s.fetchData()}catch{y.error("Failed to delete content")}finally{d(!1)}},Ie=async()=>{var s;d(!0);try{const a=c.map(n=>E.put(route("projects.collections.content.restore",{project:l.id,collection:r.id,contentEntry:n.id,contentEntryId:n.id}),{}));await Promise.all(a),y.success(`${c.length} content entries restored`),p([]),(s=u.current)==null||s.fetchData()}catch{y.error("Failed to restore content")}d(!1)},le=c.some(s=>s.deleted_at!==null),$e=(l.locales||[]).map(s=>({label:s,value:s})),Le=()=>{const s=[{header:"Status",accessorKey:"status",sortable:!0,align:"center",width:"w-24",padding:"px-10",filter:{type:"select",options:[{label:"Draft",value:"draft"},{label:"Published",value:"published"},{label:"Trashed",value:"trashed"}]},cell:a=>e.jsx(fe,{variant:a.status==="published"?"default":a.status==="trashed"?"destructive":"outline",className:a.status==="published"?"bg-green-600 hover:bg-green-700":a.status==="trashed"?"bg-red-600 hover:bg-red-700":"text-amber-600 border-amber-300",children:a.status==="published"?"Published":a.status==="trashed"?"Trashed":"Draft"})},{header:"Locale",accessorKey:"locale",sortable:!0,align:"center",filter:{type:"select",options:[...$e]},cell:a=>e.jsx(fe,{variant:"outline",className:"uppercase",children:a.locale})}];return r.fields&&r.fields.length>0&&r.fields.filter(n=>{var o;return n.type!=="password"&&n.type!=="json"&&!((o=n.options)!=null&&o.hideInContentList)&&!n.parent_field_id}).forEach(n=>{s.push({header:n.label,accessorKey:n.name,sortable:!0,cell:o=>{var D,w,h,z;const t=o[n.name];if(t==null||t==="")return"-";if((D=n.options)!=null&&D.repeatable){if(t.length===0)return"-";const V=t[0];if(typeof V!="object"){const J=`${V}${t.length>1?` (+${t.length-1} more)`:""}`;return t.length===1?J:e.jsxs(_t,{openDelay:100,children:[e.jsx(Tt,{asChild:!0,children:e.jsx("span",{className:"underline decoration-dotted cursor-help",children:J})}),e.jsx(Et,{align:"start",className:"w-48",children:e.jsx("ul",{className:"list-disc pl-4 space-y-1 text-sm",children:t.map((q,m)=>e.jsx("li",{children:String(q)},m))})})]})}}switch(n.type){case"text":return typeof t=="string"&&t.length>30?`${t.substring(0,30)}...`:t;case"email":case"slug":return t;case"richtext":return t&&xe(t).trim()!==""?e.jsx("div",{children:e.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),se({title:n.label,content:t})},className:"p-1 hover:bg-muted rounded",children:e.jsx(xt,{className:"w-4 h-4 text-indigo-500"})})}):e.jsx("div",{className:"text-center",children:"-"});case"longtext":return typeof t=="string"&&t.length>30?`${t.substring(0,30)}...`:t;case"date":if(!t)return"-";let V="YYYY-MM-DD"+((w=n.options)!=null&&w.includeTime?" HH:mm":"");return((h=n.options)==null?void 0:h.mode)==="range"?t.split(" - ").map(m=>Z.parseZone(m).format(V)).join(" / "):Z.parseZone(t).format(V);case"boolean":return t?e.jsx(ht,{className:"w-4 h-4 text-green-500"}):e.jsx(mt,{className:"w-4 h-4 text-red-500"});case"enumeration":if(Array.isArray(t))return t.join(", ");if(typeof t=="string")try{const m=JSON.parse(t);if(Array.isArray(m))return m.join(", ")}catch{}return t;case"number":return t===null?"-":Number(t).toString();case"media":return t&&Array.isArray(t)?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((m,T)=>e.jsx("div",{className:"w-8 h-8",children:m.thumbnail_url?e.jsx("img",{src:m.thumbnail_url,alt:"",className:"w-full h-full object-cover rounded"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted rounded",children:e.jsx(G,{className:"w-4 h-4"})})},T))}):"-";case"relation":const J=Array.isArray(t)?t:typeof t=="string"&&t.trim()!==""?(()=>{try{const m=JSON.parse(t);return Array.isArray(m)?m:[]}catch{return t.split(",").map(Number)}})():[];return J.length>0?e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:async m=>{var T,he;m.stopPropagation();try{const ie=((he=(T=n.options)==null?void 0:T.relation)==null?void 0:he.collection)??r.id,Me=await E.get(route("projects.collections.content.find",{project:l.id,collection:ie}),{params:{ids:J.join(",")}}),Ue=await E.get(route("projects.collections.content.getRelationCollection",{project:l.id,collection:ie}));ne({title:n.label,entries:Me.data,fields:Ue.data.fields})}catch{y.error("Failed to load related entries")}},className:"p-1 hover:bg-muted rounded",children:e.jsx(pt,{className:"w-4 h-4 text-indigo-500"})})}):e.jsx("div",{className:"text-center",children:"-"});case"group":const q=Array.isArray(t)?t:t?[t]:[];if(q.length>0){const m=n.children||((z=r.fields)==null?void 0:z.filter(T=>T.parent_field_id===n.id))||[];return e.jsx("div",{className:"flex",children:e.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),oe({title:n.label,data:q,fields:m})},className:"p-1 hover:bg-muted rounded",children:e.jsx(ut,{className:"w-4 h-4 text-indigo-500"})})})}return e.jsx("div",{className:"text-center",children:"-"});default:return t}}})}),s.push({header:"Created",accessorKey:"created_at",sortable:!0,filter:{type:"date"},cell:a=>{var n;return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:new Date(a.created_at).toLocaleString()}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",((n=a.creator)==null?void 0:n.name)||"Unknown"]})]})}},{header:"Updated",accessorKey:"updated_at",sortable:!0,filter:{type:"date"},cell:a=>{var n;return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:new Date(a.updated_at).toLocaleString()}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",((n=a.updater)==null?void 0:n.name)||"Unknown"]})]})}}),s};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-3 flex items-center justify-between",children:e.jsxs("h1",{className:"text-xl font-bold",children:[r.name,e.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["#",e.jsx("span",{className:"select-all",children:r.slug})]})]})}),e.jsx(nt,{ref:u,pageName:`content_${r.project_id}_${r.id}`,searchRoute:`/projects/${l.id}/collections/${r.id}/content/search`,searchPlaceholder:`Search ${r.name}...`,columns:Le(),toolbarButtons:e.jsxs(e.Fragment,{children:[e.jsxs(at,{children:[e.jsxs(ve,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(lt,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"icon",disabled:U,children:e.jsx(dt,{className:"h-4 w-4"})})})}),e.jsx(Ce,{children:"Export content"})]}),e.jsxs(it,{align:"end",children:[e.jsxs(ce,{onClick:()=>ae("json"),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Export as JSON"]}),e.jsxs(ce,{onClick:()=>ae("csv"),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),e.jsxs(ce,{onClick:()=>ae("excel"),children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Export as Excel"]})]})]}),Y.create_content&&e.jsxs(ve,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"icon",onClick:()=>v(!0),children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsx(Ce,{children:"Import content"})]})]}),actions:[{label:"Create New",onClick:()=>me.visit(route("projects.collections.content.create",{project:l.id,collection:r.id})),icon:e.jsx(ct,{className:"h-4 w-4 mr-2"}),show:Y.create_content&&!(r.is_singleton&&Ee)},le?null:{label:"Trash",onClick:()=>C(!0),icon:e.jsx(W,{className:"h-4 w-4 mr-2"}),variant:"warning",show:c.length>0&&Y.move_content_to_trash},!le&&{label:"Delete",onClick:()=>x(!0),icon:e.jsx(W,{className:"h-4 w-4 mr-2"}),variant:"destructive",show:c.length>0&&Y.delete_content},le?{label:"Restore Selected",onClick:()=>j(!0),icon:e.jsx(je,{className:"h-4 w-4 mr-2"}),show:c.length>0&&Y.update_content,variant:"outline"}:null].filter(s=>!!s),onRowClick:Ae,selectable:!0,onSelectionChange:p,selectedItems:c},r.id),e.jsx(O,{open:f,onOpenChange:C,children:e.jsxs(H,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(I,{children:"Move to Trash"}),e.jsxs($,{children:["Are you sure you want to move ",c.length," content entries to trash? You can restore them later."]})]}),e.jsxs(L,{children:[e.jsx(g,{variant:"outline",onClick:()=>C(!1),disabled:b,children:"Cancel"}),e.jsxs(g,{variant:"warning",onClick:He,disabled:b,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Move to Trash"]})]})]})}),e.jsx(O,{open:_,onOpenChange:x,children:e.jsxs(H,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(I,{children:"Delete Permanently"}),e.jsxs($,{children:["Are you sure you want to permanently delete ",c.length," content entries? This action cannot be undone."]})]}),e.jsxs(L,{children:[e.jsx(g,{variant:"outline",onClick:()=>x(!1),disabled:b,children:"Cancel"}),e.jsxs(g,{variant:"destructive",onClick:Fe,disabled:b,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Delete Permanently"]})]})]})}),e.jsx(O,{open:k,onOpenChange:j,children:e.jsxs(H,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(I,{children:"Restore Content"}),e.jsxs($,{children:["Are you sure you want to restore ",c.length," content entries?"]})]}),e.jsxs(L,{children:[e.jsx(g,{variant:"outline",onClick:()=>j(!1),disabled:b,children:"Cancel"}),e.jsxs(g,{onClick:async()=>{await Ie(),j(!1)},disabled:b,children:[e.jsx(je,{className:"mr-2 h-4 w-4"})," Restore"]})]})]})}),e.jsx(O,{open:!!R,onOpenChange:s=>!s&&se(null),children:e.jsxs(H,{className:"sm:max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(I,{children:R==null?void 0:R.title}),(R==null?void 0:R.title)&&e.jsx($,{children:"Rich text preview"})]}),R&&e.jsx(ge,{className:"max-h-[60vh] pr-4",children:e.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:Ye(R.content)}})}),e.jsx(L,{children:e.jsx(g,{variant:"outline",onClick:()=>se(null),children:"Close"})})]})}),e.jsx(O,{open:!!N,onOpenChange:s=>!s&&ne(null),children:e.jsxs(H,{className:"sm:max-w-4xl",children:[e.jsxs(F,{children:[e.jsx(I,{children:N==null?void 0:N.title}),(N==null?void 0:N.title)&&e.jsx($,{children:"Related entries"})]}),N&&e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsx(ot,{fields:N.fields.filter(s=>{var a;return!["password","json"].includes(s.type)&&!((a=s.options)!=null&&a.hideInContentList)}),entries:N.entries,showStatus:!0,showCreated:!0})}),e.jsx(L,{children:e.jsx(g,{variant:"outline",onClick:()=>ne(null),children:"Close"})})]})}),e.jsx(O,{open:!!S,onOpenChange:s=>!s&&oe(null),children:e.jsxs(H,{className:"sm:max-w-4xl",children:[e.jsxs(F,{children:[e.jsx(I,{children:S==null?void 0:S.title}),(S==null?void 0:S.title)&&e.jsx($,{children:"Field group data"})]}),S&&e.jsx(ge,{className:"max-h-[60vh] pr-4",children:e.jsx("div",{className:"space-y-4",children:S.data.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("h4",{className:"font-medium text-sm text-muted-foreground",children:["Item ",a+1]}),e.jsx("div",{className:"space-y-2",children:S.fields.filter(n=>{var o;return!["password","json"].includes(n.type)&&!((o=n.options)!=null&&o.hideInContentList)}).map(n=>{const o=s[n.name],t=()=>{var D,w;if(o==null||o==="")return"-";switch(n.type){case"text":case"longtext":return typeof o=="string"&&o.length>50?`${o.substring(0,50)}...`:o;case"email":case"slug":return o;case"richtext":{const h=xe(o);return h.length>50?`${h.substring(0,50)}...`:h}case"date":{if(!o)return"-";const h="YYYY-MM-DD"+((D=n.options)!=null&&D.includeTime?" HH:mm":"");return((w=n.options)==null?void 0:w.mode)==="range"&&typeof o=="string"?o.split(" - ").map(z=>Z.parseZone(z).format(h)).join(" / "):Z.parseZone(o).format(h)}case"boolean":return o?"Yes":"No";case"enumeration":if(Array.isArray(o))return o.join(", ");if(typeof o=="string")try{const h=JSON.parse(o);if(Array.isArray(h))return h.join(", ")}catch{}return o;case"number":return o===null?"-":Number(o).toString();case"media":return!o||!Array.isArray(o)?"-":e.jsx("div",{className:"flex flex-wrap gap-1",children:o.map((h,z)=>e.jsx("div",{className:"w-8 h-8",children:h.thumbnail_url?e.jsx("img",{src:h.thumbnail_url,alt:"",className:"w-full h-full object-cover rounded"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted rounded",children:e.jsx(G,{className:"w-4 h-4"})})},z))});case"relation":return Array.isArray(o)?`${o.length} relation${o.length===1?"":"s"}`:o?"1 relation":"-";default:return String(o)}};return e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-muted-foreground",children:[n.label,":"]}),e.jsx("div",{children:t()})]},n.id||n.name)})})]},a))})}),e.jsx(L,{children:e.jsx(g,{variant:"outline",onClick:()=>oe(null),children:"Close"})})]})}),e.jsx(O,{open:M,onOpenChange:v,children:e.jsxs(H,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(I,{children:"Import Content"}),e.jsx($,{children:"Import content entries from a JSON, CSV, or Excel file. The file should match the collection structure."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(rt,{htmlFor:"import_file",children:"Select File"}),e.jsx(st,{ref:B,id:"import_file",type:"file",accept:".json,.csv,.xlsx,.xls",className:"w-full"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: JSON, CSV, Excel (.xlsx, .xls)"})]})}),e.jsxs(L,{children:[e.jsx(g,{variant:"outline",onClick:()=>{v(!1),B.current&&(B.current.value="")},disabled:K,children:"Cancel"}),e.jsxs(g,{onClick:Oe,disabled:K,children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),K?"Importing...":"Import"]})]})]})})]})}export{Ar as default};
