import{r as p,j as e,H as b,b as n,t as o}from"./app-BAYl1HSz.js";import{A as L}from"./app-layout-BEHjmAYT.js";import S from"./layout-DjpJEdUZ.js";import{H as x}from"./heading-small-BlUNSpUE.js";import{B as m}from"./button-BUWHkrIo.js";import{S as v}from"./separator-DNWIp4wA.js";import{S as A}from"./Select-b8uBCLur.js";import{l as j}from"./locales-BuGYwHl-.js";import{T as z}from"./trash-2-DxLslLPH.js";/* empty css            */import"./utils-CSG-oG7g.js";import"./index-DzNUrV5G.js";import"./index-D0mva12j.js";import"./Combination-DBQolvko.js";import"./index-DRazXELc.js";import"./index-WjG9McFh.js";import"./tooltip-DsY4Q31h.js";import"./index-DU1cekCd.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./dropdown-menu-zE5wHxoc.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";import"./index-CDr1GRbl.js";import"./user-BSjMmka3.js";import"./settings-Bhr0gP4l.js";import"./app-logo-icon-BrzWybGo.js";import"./index-B_2jjvkB.js";import"./folder-BjjgW9yE.js";import"./image-u2W-qx98.js";import"./globe-CUGWl2f4.js";import"./users-DJytDsFA.js";import"./key-BAlHmL0b.js";import"./download-DYCYjKDs.js";import"./layout-grid-DOI_FcEe.js";import"./chevron-right-D6wPFmnq.js";import"./heading-zKqXxHZB.js";import"./extends-CF3RwP-h.js";function me({project:h}){const[a,i]=p.useState(h),[l,u]=p.useState(null),f=[{title:a.name,href:route("projects.show",a.id)},{title:"Settings",href:route("projects.settings.project",a.id)},{title:"Localization",href:route("projects.settings.localization",a.id)}],c=Array.isArray(a.locales)?a.locales:a.locales?[a.locales]:[],y=p.useMemo(()=>Object.entries(j).filter(([t])=>!c.includes(t)).map(([t,s])=>({value:t,label:`${t} - ${s}`})),[a]),w=async()=>{var t,s;if(l)try{const r=await n.post(route("projects.settings.locales.add",a.id),{locale:l.value});i(r.data),u(null),o.success("Locale added")}catch(r){o.error(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to add locale")}},g=async t=>{try{const s=await n.put(route("projects.settings.locales.default",a.id),{locale:t});i(s.data),o.success("Default locale updated")}catch{o.error("Failed to update default locale")}},N=async t=>{var s,r;try{const d=await n.delete(route("projects.settings.locales.delete",[a.id,t]));i(d.data),o.success("Locale deleted")}catch(d){o.error(((r=(s=d.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete locale")}};return e.jsxs(L,{breadcrumbs:f,children:[e.jsx(b,{title:"Localization settings"}),e.jsx(S,{project:a,children:e.jsxs("div",{className:"space-y-10 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx(x,{title:"Available Locales"}),e.jsx("div",{className:"mt-4 overflow-x-auto border rounded-md",children:e.jsx("table",{className:"min-w-full text-sm",children:e.jsxs("tbody",{children:[c.map(t=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:t}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:j[t]||"-"}),e.jsx("td",{className:"px-4 py-2 text-center whitespace-nowrap",children:t===a.default_locale?e.jsx("span",{className:"font-medium",children:"Default"}):e.jsx(m,{variant:"link",className:"px-2",onClick:()=>g(t),children:"Set as default"})}),e.jsx("td",{className:"px-4 py-2 text-center whitespace-nowrap",children:t!==a.default_locale&&e.jsx(m,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>N(t),children:e.jsx(z,{className:"w-4 h-4"})})})]},t)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-2 text-muted-foreground",colSpan:4,children:"No locales yet."})})]})})})]}),e.jsx(v,{}),e.jsxs("div",{children:[e.jsx(x,{title:"Add a Locale"}),e.jsxs("div",{className:"mt-4 flex gap-2 w-full",children:[e.jsx(A,{value:l,onChange:u,options:y,placeholder:"Select locale",classNamePrefix:"react-select",className:"w-full"}),e.jsx(m,{onClick:w,disabled:!l,children:"Add"})]})]})]})})]})}export{me as default};
