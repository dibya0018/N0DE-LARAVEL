import{j as e,L as E,c as H,r as h,H as P,t as T,a as J}from"./app-BAYl1HSz.js";import{A as V}from"./app-layout-BEHjmAYT.js";import{H as X}from"./heading-zKqXxHZB.js";import{B as g}from"./button-BUWHkrIo.js";import{S as q}from"./separator-DNWIp4wA.js";import{c as K}from"./utils-CSG-oG7g.js";import{I as Q}from"./input-CNhlXZJH.js";import{L as C}from"./label-cm5VjJbG.js";import{I as D}from"./input-error-BN6HrjaN.js";import{X as S}from"./index-DzNUrV5G.js";import{I as W}from"./image-u2W-qx98.js";/* empty css            */import"./tooltip-DsY4Q31h.js";import"./index-D0mva12j.js";import"./Combination-DBQolvko.js";import"./index-DRazXELc.js";import"./index-DU1cekCd.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./index-WjG9McFh.js";import"./dropdown-menu-zE5wHxoc.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";import"./index-CDr1GRbl.js";import"./user-BSjMmka3.js";import"./settings-Bhr0gP4l.js";import"./app-logo-icon-BrzWybGo.js";import"./index-B_2jjvkB.js";import"./folder-BjjgW9yE.js";import"./globe-CUGWl2f4.js";import"./users-DJytDsFA.js";import"./key-BAlHmL0b.js";import"./download-DYCYjKDs.js";import"./layout-grid-DOI_FcEe.js";import"./chevron-right-D6wPFmnq.js";const Y=[{title:"General",href:"/settings/app",icon:null}];function Z({children:n}){if(typeof window>"u")return null;const r=window.location.pathname;return e.jsxs("div",{children:[e.jsx(X,{title:"App Settings",description:"Manage your app settings"}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-y-0 lg:space-x-12",children:[e.jsx("aside",{className:"w-full lg:w-48",children:e.jsx("nav",{className:"flex flex-col space-y-1 space-x-0",children:Y.map((o,u)=>e.jsx(g,{size:"sm",variant:"ghost",asChild:!0,className:K("w-full justify-start",{"bg-muted":r===o.href}),children:e.jsx(E,{href:o.href,children:o.title})},`${o.href}-${u}`))})}),e.jsx(q,{className:"my-6 md:hidden"}),e.jsx("div",{className:"flex-1 md:max-w-2xl",children:e.jsx("section",{className:"max-w-xl space-y-12",children:n})})]})]})}const ee=[{title:"App settings",href:"/settings/app"}];function Be({settings:n}){const{data:r,setData:o,post:u,processing:j,errors:f}=H({app_name:n.app_name||"",logo:null,favicon:null,remove_logo:!1,remove_favicon:!1}),[L,x]=h.useState(null),l=h.useRef(null),m=h.useRef(null),F=a=>{a.preventDefault();const s=new FormData;s.append("app_name",r.app_name||""),r.logo&&s.append("logo",r.logo),r.favicon&&s.append("favicon",r.favicon),r.remove_logo&&s.append("remove_logo","1"),r.remove_favicon&&s.append("remove_favicon","1"),u(route("settings.app.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{T.success("Settings saved successfully!"),o({app_name:n.app_name||"",logo:null,favicon:null,remove_logo:!1,remove_favicon:!1}),l.current&&(l.current.value=""),m.current&&(m.current.value=""),J.reload()}})},v=(a,s)=>{if(a){if(!(s==="logo"?["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"]:["image/x-icon","image/png","image/jpg","image/gif","image/svg+xml"]).includes(a.type)){alert(`Please select a valid ${s} file (PNG, JPG, GIF, SVG${s==="favicon"?", ICO":""})`);return}const c=s==="logo"?2*1024*1024:1024*1024;if(a.size>c){alert(`File size must be less than ${s==="logo"?"2MB":"1MB"}`);return}}o(s,a),o(s==="logo"?"remove_logo":"remove_favicon",!1)},R=a=>{var t;const s=((t=a.target.files)==null?void 0:t[0])||null;v(s,"logo")},z=a=>{var t;const s=((t=a.target.files)==null?void 0:t[0])||null;v(s,"favicon")},A=(a,s)=>{a.preventDefault(),x(s)},I=a=>{a.preventDefault(),x(null)},$=(a,s)=>{a.preventDefault(),x(null);const t=a.dataTransfer.files[0];t&&v(t,s)},k=()=>{o("logo",null),o("remove_logo",!0),l.current&&(l.current.value="")},B=()=>{o("favicon",null),o("remove_favicon",!0),m.current&&(m.current.value="")},N=({type:a,label:s,description:t,accept:c,maxSize:O,currentFile:b,newFile:p,onRemove:G,onChange:M,error:w})=>{const d=a==="logo"?l:m,U=b&&!p&&!(a==="logo"?r.remove_logo:r.remove_favicon),_=L===a,y=a==="logo"?"h-20 w-20":"h-12 w-12";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{className:"text-base font-medium",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t})]}),U&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("img",{src:b,alt:`Current ${s.toLowerCase()}`,className:`${y} object-contain border rounded-lg bg-white`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Current ",s.toLowerCase()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click remove to delete"})]}),e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:G,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Remove"]})]}),p&&e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("img",{src:URL.createObjectURL(p),alt:`New ${s.toLowerCase()} preview`,className:`${y} object-contain border rounded-lg bg-white`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-green-800",children:["New ",s.toLowerCase()," ready"]}),e.jsx("p",{className:"text-xs text-green-600",children:p.name})]}),e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>{o(a,null),d.current&&(d.current.value="")},children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${_?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:i=>A(i,a),onDragLeave:I,onDrop:i=>$(i,a),onClick:()=>{var i;return(i=d.current)==null?void 0:i.click()},children:[e.jsx("input",{ref:d,type:"file",accept:c,onChange:M,className:"hidden"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"h-8 w-8 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:_?"Drop your file here":"Click to upload or drag and drop"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c," up to ",O]})]})]})]}),w&&e.jsx(D,{message:w})]})};return e.jsxs(V,{breadcrumbs:ee,children:[e.jsx(P,{title:"App settings"}),e.jsx(Z,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:F,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{className:"text-base font-medium",children:"App Name"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Set the name that appears in your application"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{id:"app_name",value:r.app_name||"",onChange:a=>o("app_name",a.target.value),placeholder:"Enter your app name",className:"max-w-md"}),e.jsx(D,{message:f.app_name})]})]}),e.jsx(N,{type:"logo",label:"Logo",description:"Upload your application logo. Recommended size: 200x60px",accept:"image/jpeg,image/png,image/jpg,image/gif,image/svg+xml",maxSize:"2MB",currentFile:n.logo_file,newFile:r.logo,onRemove:k,onChange:R,error:f.logo}),e.jsx(N,{type:"favicon",label:"Favicon",description:"Upload your favicon. Recommended size: 32x32px or 16x16px",accept:"image/x-icon,image/png,image/jpg,image/gif,image/svg+xml",maxSize:"1MB",currentFile:n.favicon_file,newFile:r.favicon,onRemove:B,onChange:z,error:f.favicon}),e.jsx("div",{className:"flex",children:e.jsx(g,{type:"submit",disabled:j,className:"min-w-24",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):"Save Changes"})})]})})})]})}export{Be as default};
