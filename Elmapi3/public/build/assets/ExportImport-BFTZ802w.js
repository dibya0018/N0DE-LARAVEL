import{r as i,j as e,H as R,b as w,t as a}from"./app-BAYl1HSz.js";import{A as U}from"./app-layout-BEHjmAYT.js";import $ from"./layout-DjpJEdUZ.js";import{H as F}from"./heading-small-BlUNSpUE.js";import{c as P,B as v}from"./button-BUWHkrIo.js";import{C as m}from"./checkbox-DM2FAlZO.js";import{L as p}from"./label-cm5VjJbG.js";import{C as x,a as u,b as h,d as j,c as f}from"./card-CrMVoWAt.js";import{D as E}from"./download-DYCYjKDs.js";/* empty css            */import"./utils-CSG-oG7g.js";import"./index-DzNUrV5G.js";import"./index-D0mva12j.js";import"./Combination-DBQolvko.js";import"./index-DRazXELc.js";import"./index-WjG9McFh.js";import"./tooltip-DsY4Q31h.js";import"./index-DU1cekCd.js";import"./floating-ui.dom-DtF1XweH.js";import"./index-WbFOJLSP.js";import"./dropdown-menu-zE5wHxoc.js";import"./index-CC0gYkaS.js";import"./index-ClMuC-A5.js";import"./index-CDr1GRbl.js";import"./user-BSjMmka3.js";import"./settings-Bhr0gP4l.js";import"./app-logo-icon-BrzWybGo.js";import"./index-B_2jjvkB.js";import"./folder-BjjgW9yE.js";import"./image-u2W-qx98.js";import"./globe-CUGWl2f4.js";import"./users-DJytDsFA.js";import"./key-BAlHmL0b.js";import"./layout-grid-DOI_FcEe.js";import"./chevron-right-D6wPFmnq.js";import"./heading-zKqXxHZB.js";import"./separator-DNWIp4wA.js";import"./index-47IHtonF.js";import"./check-B69XlBAf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],J=P("FileJson",H);function ve({project:s}){const S=[{title:s.name,href:route("projects.show",s.id)},{title:"Settings",href:route("projects.settings.project",s.id)},{title:"Export/Import",href:route("projects.settings.export-import",s.id)}],[C,g]=i.useState(!1),[c,_]=i.useState(!0),[N,k]=i.useState(!1),I=async()=>{g(!0);try{const t=await w.post(route("projects.settings.export-import.export-project",s.id),{include_collections:c,include_content:N},{responseType:"blob"}),r=new Blob([t.data],{type:"application/json"}),l=window.URL.createObjectURL(r),o=document.createElement("a");o.href=l;const n=s.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||`project-${s.id}`;o.download=`project_${n}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(l),document.body.removeChild(o),a.success("Project exported successfully")}catch(t){a.error("Failed to export project"),console.error(t)}finally{g(!1)}},[b,y]=i.useState(null),[d,L]=i.useState({}),O=async t=>{y(t.id);try{const r=await w.post(route("projects.settings.export-import.export-collection",{project:s.id,collection:t.id}),{include_content:d[t.id]??!1},{responseType:"blob"}),l=new Blob([r.data],{type:"application/json"}),o=window.URL.createObjectURL(l),n=document.createElement("a");n.href=o,n.download=`collection_${t.slug}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(o),document.body.removeChild(n),a.success(`Collection "${t.name}" exported successfully`)}catch(r){a.error("Failed to export collection"),console.error(r)}finally{y(null)}};return e.jsxs(U,{breadcrumbs:S,children:[e.jsx(R,{title:"Export/Import"}),e.jsx($,{project:s,children:e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsx(F,{title:"Export/Import",description:"Export project structure and content, or import from JSON files"}),e.jsxs(x,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Export Project"}),e.jsx(j,{children:"Export your project structure (collections, fields) and optionally content to a JSON file"})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(m,{id:"include_collections",checked:c,onCheckedChange:t=>_(!!t),className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:"include_collections",className:"font-medium",children:"Include Collections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export collection structure and field definitions"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(m,{id:"include_content",checked:N,onCheckedChange:t=>k(!!t),disabled:!c,className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:"include_content",className:"font-medium",children:"Include Content"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export published content entries (requires collections to be included)"})]})]})]}),e.jsxs(v,{onClick:I,disabled:C||!c,className:"w-full sm:w-auto",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),C?"Exporting...":"Export Project"]})]})]}),s.collections&&s.collections.length>0&&e.jsxs(x,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Export Collection Structure"}),e.jsx(j,{children:"Export individual collection structure (fields and configuration) to JSON"})]}),e.jsx(f,{children:e.jsx("div",{className:"space-y-2",children:s.collections.map(t=>e.jsxs("div",{className:"flex flex-col gap-3 p-3 border rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slug: ",t.slug]})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>O(t),disabled:b===t.id,children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),b===t.id?"Exporting...":"Export"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(m,{id:`include_content_${t.id}`,checked:d[t.id]??!1,onCheckedChange:r=>{L({...d,[t.id]:!!r})},className:"mt-1"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{htmlFor:`include_content_${t.id}`,className:"font-medium text-sm",children:"Include Content"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Export published content entries along with the collection structure"})]})]})]},t.id))})})]}),e.jsxs(x,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Import Project"}),e.jsx(j,{children:'Import a project from a JSON file when creating a new project. Use the project creation modal and select "Import from file" option.'})]}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:'Go to the project creation modal and choose "Import from file" to import a project structure.'})]})})]})]})})]})}export{ve as default};
