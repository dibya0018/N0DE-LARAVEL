import{f as qe,g as Je,j as v}from"./app-BAYl1HSz.js";import Ue from"./FieldBase-Bf9Vt966.js";import{p as de}from"./prism-Dqf3inl0.js";import{B as Ve}from"./button-BUWHkrIo.js";import{C as Ae}from"./code-DWMjAwzg.js";import{C as $e}from"./check-B69XlBAf.js";import{C as Qe}from"./circle-alert-BCdqIib6.js";/* empty css            */import"./label-cm5VjJbG.js";import"./index-DRazXELc.js";import"./utils-CSG-oG7g.js";import"./input-error-BN6HrjaN.js";var g={},ve;function Ge(){if(ve)return g;ve=1;var o=g&&g.__assign||function(){return o=Object.assign||function(i){for(var t,c=1,l=arguments.length;c<l;c++){t=arguments[c];for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&(i[f]=t[f])}return i},o.apply(this,arguments)},O=g&&g.__createBinding||(Object.create?function(i,t,c,l){l===void 0&&(l=c);var f=Object.getOwnPropertyDescriptor(t,c);(!f||("get"in f?!t.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return t[c]}}),Object.defineProperty(i,l,f)}:function(i,t,c,l){l===void 0&&(l=c),i[l]=t[c]}),K=g&&g.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),N=g&&g.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var c in i)c!=="default"&&Object.prototype.hasOwnProperty.call(i,c)&&O(t,i,c);return K(t,i),t},q=g&&g.__rest||function(i,t){var c={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&t.indexOf(l)<0&&(c[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,l=Object.getOwnPropertySymbols(i);f<l.length;f++)t.indexOf(l[f])<0&&Object.prototype.propertyIsEnumerable.call(i,l[f])&&(c[l[f]]=i[l[f]]);return c};Object.defineProperty(g,"__esModule",{value:!0});var h=N(qe()),J=89,b=90,D=77,_=57,y=219,I=222,Q=192,G=100,he=3e3,ge=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),U=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),B="npm__react-simple-code-editor__textarea",me=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(B,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(B,` {
    color: transparent !important;
  }

  .`).concat(B,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),pe=h.forwardRef(function(t,c){var l=t.autoFocus,f=t.disabled,ye=t.form,be=t.highlight,Z=t.ignoreTabKey,xe=Z===void 0?!1:Z,X=t.insertSpaces,Ee=X===void 0?!0:X,Se=t.maxLength,Ce=t.minLength,_e=t.name,ke=t.onBlur,Oe=t.onClick,je=t.onFocus,ee=t.onKeyDown,we=t.onKeyUp,L=t.onValueChange,te=t.padding,p=te===void 0?0:te,Ke=t.placeholder,Ne=t.preClassName,De=t.readOnly,Ie=t.required,Me=t.style,ne=t.tabSize,Te=ne===void 0?2:ne,re=t.textareaClassName,Fe=t.textareaId,ae=t.value,Pe=q(t,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),s=h.useRef({stack:[],offset:-1}),W=h.useRef(null),ie=h.useState(!0),ze=ie[0],Re=ie[1],oe={paddingTop:typeof p=="object"?p.top:p,paddingRight:typeof p=="object"?p.right:p,paddingBottom:typeof p=="object"?p.bottom:p,paddingLeft:typeof p=="object"?p.left:p},V=be(ae),k=function(e,a){return e.substring(0,a).split(`
`)},Y=h.useCallback(function(e,a){var n,r,u;a===void 0&&(a=!1);var d=s.current,E=d.stack,T=d.offset;if(E.length&&T>-1){s.current.stack=E.slice(0,T+1);var F=s.current.stack.length;if(F>G){var w=F-G;s.current.stack=E.slice(w,F),s.current.offset=Math.max(s.current.offset-w,0)}}var x=Date.now();if(a){var C=s.current.stack[s.current.offset];if(C&&x-C.timestamp<he){var P=/[^a-z0-9]([a-z0-9]+)$/i,m=(n=k(C.value,C.selectionStart).pop())===null||n===void 0?void 0:n.match(P),z=(r=k(e.value,e.selectionStart).pop())===null||r===void 0?void 0:r.match(P);if(m!=null&&m[1]&&(!((u=z==null?void 0:z[1])===null||u===void 0)&&u.startsWith(m[1]))){s.current.stack[s.current.offset]=o(o({},e),{timestamp:x});return}}}s.current.stack.push(o(o({},e),{timestamp:x})),s.current.offset++},[]),le=h.useCallback(function(){var e=W.current;if(e){var a=e.value,n=e.selectionStart,r=e.selectionEnd;Y({value:a,selectionStart:n,selectionEnd:r})}},[Y]),A=function(e){var a=W.current;a&&(a.value=e.value,a.selectionStart=e.selectionStart,a.selectionEnd=e.selectionEnd,L==null||L(e.value))},j=function(e){var a=W.current,n=s.current.stack[s.current.offset];n&&a&&(s.current.stack[s.current.offset]=o(o({},n),{selectionStart:a.selectionStart,selectionEnd:a.selectionEnd})),Y(e),A(e)},Be=function(){var e=s.current,a=e.stack,n=e.offset,r=a[n-1];r&&(A(r),s.current.offset=Math.max(n-1,0))},Le=function(){var e=s.current,a=e.stack,n=e.offset,r=a[n+1];r&&(A(r),s.current.offset=Math.min(n+1,a.length-1))},We=function(e){if(!(ee&&(ee(e),e.defaultPrevented))){e.key==="Escape"&&e.currentTarget.blur();var a=e.currentTarget,n=a.value,r=a.selectionStart,u=a.selectionEnd,d=(Ee?" ":"	").repeat(Te);if(e.key==="Tab"&&!xe&&ze)if(e.preventDefault(),e.shiftKey){var E=k(n,r),T=E.length-1,F=k(n,u).length-1,w=n.split(`
`).map(function(R,ce){return ce>=T&&ce<=F&&R.startsWith(d)?R.substring(d.length):R}).join(`
`);if(n!==w){var x=E[T];j({value:w,selectionStart:x!=null&&x.startsWith(d)?r-d.length:r,selectionEnd:u-(n.length-w.length)})}}else if(r!==u){var E=k(n,r),C=E.length-1,P=k(n,u).length-1,x=E[C];j({value:n.split(`
`).map(function(ue,fe){return fe>=C&&fe<=P?d+ue:ue}).join(`
`),selectionStart:x&&/\S/.test(x)?r+d.length:r,selectionEnd:u+d.length*(P-C+1)})}else{var m=r+d.length;j({value:n.substring(0,r)+d+n.substring(u),selectionStart:m,selectionEnd:m})}else if(e.key==="Backspace"){var z=r!==u,He=n.substring(0,r);if(He.endsWith(d)&&!z){e.preventDefault();var m=r-d.length;j({value:n.substring(0,r-d.length)+n.substring(u),selectionStart:m,selectionEnd:m})}}else if(e.key==="Enter"){if(r===u){var $=k(n,r).pop(),H=$==null?void 0:$.match(/^\s+/);if(H!=null&&H[0]){e.preventDefault();var se=`
`+H[0],m=r+se.length;j({value:n.substring(0,r)+se+n.substring(u),selectionStart:m,selectionEnd:m})}}}else if(e.keyCode===_||e.keyCode===y||e.keyCode===I||e.keyCode===Q){var S=void 0;e.keyCode===_&&e.shiftKey?S=["(",")"]:e.keyCode===y?e.shiftKey?S=["{","}"]:S=["[","]"]:e.keyCode===I?e.shiftKey?S=['"','"']:S=["'","'"]:e.keyCode===Q&&!e.shiftKey&&(S=["`","`"]),r!==u&&S&&(e.preventDefault(),j({value:n.substring(0,r)+S[0]+n.substring(r,u)+S[1]+n.substring(u),selectionStart:r,selectionEnd:u+2}))}else(U?e.metaKey&&e.keyCode===b:e.ctrlKey&&e.keyCode===b)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),Be()):(U?e.metaKey&&e.keyCode===b&&e.shiftKey:ge?e.ctrlKey&&e.keyCode===J:e.ctrlKey&&e.keyCode===b&&e.shiftKey)&&!e.altKey?(e.preventDefault(),Le()):e.keyCode===D&&e.ctrlKey&&(!U||e.shiftKey)&&(e.preventDefault(),Re(function(R){return!R}))}},Ye=function(e){var a=e.currentTarget,n=a.value,r=a.selectionStart,u=a.selectionEnd;Y({value:n,selectionStart:r,selectionEnd:u},!0),L(n)};return h.useEffect(function(){le()},[le]),h.useImperativeHandle(c,function(){return{get session(){return{history:s.current}},set session(e){s.current=e.history}}},[]),h.createElement("div",o({},Pe,{style:o(o({},M.container),Me)}),h.createElement("pre",o({className:Ne,"aria-hidden":"true",style:o(o(o({},M.editor),M.highlight),oe)},typeof V=="string"?{dangerouslySetInnerHTML:{__html:V+"<br />"}}:{children:V})),h.createElement("textarea",{ref:function(e){return W.current=e},style:o(o(o({},M.editor),M.textarea),oe),className:B+(re?" ".concat(re):""),id:Fe,value:ae,onChange:Ye,onKeyDown:We,onClick:Oe,onKeyUp:we,onFocus:je,onBlur:ke,disabled:f,form:ye,maxLength:Se,minLength:Ce,name:_e,placeholder:Ke,readOnly:De,required:Ie,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),h.createElement("style",{dangerouslySetInnerHTML:{__html:me}}))}),M={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return g.default=pe,g}var Ze=Ge();const Xe=Je(Ze);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;function dt({field:o,value:O,onChange:K,processing:N,errors:q}){const h=y=>{try{return y===""||JSON.parse(y),!0}catch{return!1}},J=()=>{K(o,`{
  
}`)},b=typeof O=="object"&&O!==null?JSON.stringify(O,null,2):O||"",D=h(b),_=!b||b==="";return v.jsx(Ue,{field:o,value:b,onChange:K,processing:N,errors:q,children:v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:`border rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 
                    ${!D&&!_?"border-red-500":"border-input"}`,children:[v.jsxs("div",{className:"flex items-center justify-between bg-muted py-1 px-3 border-b",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ae,{className:"h-4 w-4 mr-2 text-muted-foreground"}),v.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"JSON Editor"})]}),v.jsxs("div",{className:"flex items-center",children:[D&&!_&&v.jsxs("span",{className:"flex items-center text-xs text-green-500 mr-2",children:[v.jsx($e,{className:"h-3 w-3 mr-1"})," Valid JSON"]}),!D&&!_&&v.jsxs("span",{className:"flex items-center text-xs text-red-500 mr-2",children:[v.jsx(Qe,{className:"h-3 w-3 mr-1"})," Invalid JSON"]})]})]}),v.jsx(Xe,{value:b,onValueChange:y=>K(o,y),highlight:y=>{const I=typeof y=="string"?y:String(y||"");return de.highlight(I,de.languages.json,"json")},padding:12,disabled:N,placeholder:o.placeholder||`{
  "key": "value"
}`,style:{fontFamily:'"Fira code", "Fira Mono", monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New"',fontSize:14,minHeight:"200px"},className:"min-h-[200px]"})]}),v.jsx("div",{className:"flex gap-2",children:_&&v.jsx(Ve,{type:"button",onClick:J,variant:"outline",size:"sm",disabled:N,className:"text-xs",children:"Initialize Empty Object"})})]})})}export{dt as default};
